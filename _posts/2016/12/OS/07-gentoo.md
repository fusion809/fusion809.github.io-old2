## Gentoo Linux
{% include_relative infoboxes/07-gentoo.html %}

[**Gentoo Linux**](https://www.gentoo.org/) is a Linux distribution that uses its own package manager, Portage (which is primarily invoked from the command-line with `emerge`), that is so named because it is similar to FreeBSD's Ports system. Portage compiles and installs software from source code by following instructions in a specialized type of shell script known as an ebuild. These ebuilds are stored in repositories that are usually git-controlled and are referred to as overlays. Despite it serving as a source package manager by default, Portage can also install pre-built binary packages. [Calculate Linux](http://www.calculate-linux.org/) is a distribution derived from Gentoo Linux that despite using the Portage package manager works with binary packages by default.

The official Gentoo overlay is also known as the Portage Tree and is stored on a Gentoo system in the `/usr/portage` directory. The Portage Tree has looser licensing requirements than the official repositories of Arch Linux, CentOS, Debian, Fedora and many other distributions. Not only does it contain some proprietary firmware but it also contains some proprietary desktop applications such as [Google Chrome](https://packages.gentoo.org/packages/www-client/google-chrome), [Opera](https://packages.gentoo.org/packages/www-client/opera), [RuneScape's NXT Client](https://packages.gentoo.org/packages/games-rpg/runescape-launcher), [Spotify](https://packages.gentoo.org/packages/media-sound/spotify), [Vivaldi](https://packages.gentoo.org/packages/www-client/vivaldi), *etc.* Unofficial overlays are installed via the official tool (that is, it is developed by the Gentoo Linux development team), [Layman](https://wiki.gentoo.org/wiki/Layman), to `/var/lib/layman`.

ebuilds usually include USE flag and keyword fields. USE flags are essentially options that determine which features of the package provided by the ebuild are built and which are not. For example, the `gtk` USE flag, if enabled, would cause one's packages to be built with GTK widget toolkit support. Likewise keywords tell one the stability of the ebuild on the various processor architectures Gentoo has been ported to. For example, the `amd64` keyword means that the ebuild is stable (and well-tested) on AMD64 (or x86-64) platforms. Likewise the `~x86` keyword means that the ebuild is unstable on x86 (or 32-bit systems).

Many packages, especially core packages like the Linux kernel sources package &mdash; [`sys-kernel/gentoo-sources`](https://packages.gentoo.org/package/sys-kernel/gentoo-sources) &mdash; have several different available versions, often with alternate versions being provided from the same overlay. This is often when there are multiple different versions of the package still supported upstream (like in the case of LTS releases) and the older versions of the package are better tested (and hence more likely to be marked stable). By default, Portage favours the most up-to-date and stable packages when given a choice of package versions. By adjusting keyword settings in `/etc/portage/make.conf` one can switch from a "stable" system to a bleeding-edge system.

Portage is a complicated package manager to use too. Frequently Portage will complain of an error (most often a package or USE flag conflict) and exit, leaving the user to fix whatever is wrong. For advanced users this is usually no problem, but for less sophisticated users it can be a deal-breaker. I used to hate Portage when I used Sabayon Linux for a few months as my primary OS. Mostly because it seemed like I always got errors from Portage whenever I tried to install packages. It took a fair bit of effort for me to learn the basics of Portage error-fixing. Nowadays while I do not have Sabayon installed on any of the partitions of my day-to-day PC, I still use Portage on a weekly basis (roughly), which is roughly how often I fire up my Gentoo Linux VirtualBox VM and update it using the commands:

{% include Code/coder.html line1="emerge --sync && layman -S" line2="emerge -uDU --with-bdeps=y @world" %}

Despite this Gentoo Linux's documentation (which is mostly located at the [*Gentoo Wiki*](https://wiki.gentoo.org/wiki/Main_Page)) is second only to Arch Linux in terms of quality and comprehensibility.

Creating your own custom ebuilds for Gentoo is more challenging, in my opinion, than packaging for RPM-based distros or Arch Linux. This is partly because ebuilds have security features in place (restricting access to one's file system during the build), that while may make the building process safer, can also make it more annoying. For example, the Atom ebuild in the Portage Tree is incredibly complicated (instead of using the default build system of Atom) mostly because simpler ebuilds (that do use Atom's default build system) give access violation errors and fail. Likewise there are several functions used in ebuilds (that are not usual shell script functions, but rather functions specifically defined for ebuilds) that you need to be familiar with in order to efficiently write a working ebuild. I have found them similar in difficulty to write than Debian packages are to build. I have created my own (at the moment unmaintained) overlay for Gentoo/Sabayon, [`sabayon-tools`](https://github.com/fusion809/sabayon-tools).

Ideal Gentoo users are advanced users that:

* Want a lot of freedom to customize their system to their liking.
* Are not open-source software-obsessed. Proprietary software riddles the Portage Tree. If one is obsessed with open-source one should probably consider using the Free Software Foundation-approved derivative of Gentoo Linux, [Ututo XS](http://www.ututo.org/) (the official home page is in Spanish, so those not fluent in Spanish beware, as while Google Translate may help it is not perfect at translation), which is entirely open-source.
* Learn well by reading written documentation or already have plenty of experience with Portage.
* May need to install obscure pieces of software on the odd occasion (not absolutely necessary, but it would suit these users especially well). As Gentoo Portage overlays are very extensive it is likely that if one requires any obscure software one will be able to find it by searching [gpo.zugaina.org](http://gpo.zugaina.org/). I would say Gentoo is second only to Arch Linux and distros derived from it, in terms of how easy it is to get any piece of software one wants.
* Are willing to wait a long time to setup one's system to one's liking. If one wants a desktop environment one will likely have to spend several hours (if not days) compiling the desktop environment components and their dependencies with Portage.

{% include Layouts/clear.html %}
