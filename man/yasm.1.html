<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
YASM(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
YASM(1)</td>
<td class="head-vol">
The Yasm Modular Assembler</td>
<td class="head-rtitle">
YASM(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> yasm - The Yasm Modular Assembler</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>yasm</b> [<b>-f&#160;</b><b></b><i>format</i>] [<b>-o&#160;</b><b></b><i>outfile</i>] [<b></b><i>other&#160;options</i>...] {<i>infile</i>}</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>yasm</b> <b>-h</b></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The Yasm Modular Assembler is a portable, retargetable assembler written under the &#8220;new&#8221; (2 or 3 clause) BSD license. Yasm currently supports the x86 and AMD64 instruction sets, accepts NASM and GAS assembler syntaxes, outputs binary, ELF32, ELF64, COFF, Win32, and Win64 object formats, and generates source debugging information in STABS, DWARF 2, and CodeView 8 formats.<div class="spacer">
</div>
YASM consists of the  <b>yasm</b> command, libyasm, the core backend library, and a large number of modules. Currently, libyasm and the loadable modules are statically built into the  <b>yasm</b> executable.<div class="spacer">
</div>
The  <b>yasm</b> command assembles the file infile and directs output to the file  <i>outfile</i> if specified. If  <i>outfile</i> is not specified,  <b>yasm</b> will derive a default output file name from the name of its input file, usually by appending .o or .obj, or by removing all extensions for a raw binary file. Failing that, the output file name will be yasm.out.<div class="spacer">
</div>
If called with an  <i>infile</i> of &#8220;-&#8221;,  <b>yasm</b> assembles the standard input and directs output to the file  <i>outfile</i>, or yasm.out if no  <i>outfile</i> is specified.</div>
<div class="section">
<h1>OPTIONS</h1> Many options may be given in one of two forms: either a dash followed by a single letter, or two dashes followed by a long option name. Options are listed in alphabetical order.<div class="subsection">
<h2>General Options</h2>  <b>-a </b><b></b><i>arch</i> or <b>--arch=</b><b></b><i>arch</i>: Select target architecture<div style="margin-left: 4.00ex;">
Selects the target architecture. The default architecture is &#8220;x86&#8221;, which supports both the IA-32 and derivatives and AMD64 instruction sets. To print a list of available architectures to standard output, use &#8220;help&#8221; as  <i>arch</i>. See  <b>yasm_arch</b>(7) for a list of supported architectures.</div>
<div class="spacer">
</div>
<b>-f </b><b></b><i>format</i> or <b>--oformat=</b><b></b><i>format</i>: Select object format<div style="margin-left: 4.00ex;">
Selects the output object format. The default object format is &#8220;bin&#8221;, which is a flat format binary with no relocation. To print a list of available object formats to standard output, use &#8220;help&#8221; as  <i>format</i>. See  <b>yasm_objfmts</b>(7) for a list of supported object formats.</div>
<div class="spacer">
</div>
<b>-g </b><b></b><i>debug</i> or <b>--dformat=</b><b></b><i>debug</i>: Select debugging format<div style="margin-left: 4.00ex;">
Selects the debugging format for debug information. Debugging information can be used by a debugger to associate executable code back to the source file or get data structure and type information. Available debug formats vary between different object formats;  <b>yasm</b> will error when an invalid combination is selected. The default object format is selected by the object format. To print a list of available debugging formats to standard output, use &#8220;help&#8221; as  <i>debug</i>. See  <b>yasm_dbgfmts</b>(7) for a list of supported debugging formats.</div>
<div class="spacer">
</div>
<b>-L </b><b></b><i>list</i> or <b>--lformat=</b><b></b><i>list</i>: Select list file format<div style="margin-left: 4.00ex;">
Selects the format/style of the output list file. List files typically intermix the original source with the machine code generated by the assembler. The default list format is &#8220;nasm&#8221;, which mimics the NASM list file format. To print a list of available list file formats to standard output, use &#8220;help&#8221; as  <i>list</i>.</div>
<div class="spacer">
</div>
<b>-l </b><b></b><i>listfile</i> or <b>--list=</b><b></b><i>listfile</i>: Specify list filename<div style="margin-left: 4.00ex;">
Specifies the name of the output list file. If this option is not used, no list file is generated.</div>
<div class="spacer">
</div>
<b>-m </b><b></b><i>machine</i> or <b>--machine=</b><b></b><i>machine</i>: Select target machine architecture<div style="margin-left: 4.00ex;">
Selects the target machine architecture. Essentially a subtype of the selected architecture, the machine type selects between major subsets of an architecture. For example, for the &#8220;x86&#8221; architecture, the two available machines are &#8220;x86&#8221;, which is used for the IA-32 and derivative 32-bit instruction set, and &#8220;amd64&#8221;, which is used for the 64-bit instruction set. This differentiation is required to generate the proper object file for relocatable object formats such as COFF and ELF. To print a list of available machines for a given architecture to standard output, use &#8220;help&#8221; as  <i>machine</i> and the given architecture using  <b>-a </b><b></b><i>arch</i>. See  <b>yasm_arch</b>(7) for more details.</div>
<div class="spacer">
</div>
<b>-o </b><b></b><i>filename</i> or <b>--objfile=</b><b></b><i>filename</i>: Specify object filename<div style="margin-left: 4.00ex;">
Specifies the name of the output file, overriding any default name generated by Yasm.</div>
<div class="spacer">
</div>
<b>-p </b><b></b><i>parser</i> or <b>--parser=</b><b></b><i>parser</i>: Select parser<div style="margin-left: 4.00ex;">
Selects the parser (the assembler syntax). The default parser is &#8220;nasm&#8221;, which emulates the syntax of NASM, the Netwide Assembler. Another available parser is &#8220;gas&#8221;, which emulates the syntax of GNU AS. To print a list of available parsers to standard output, use &#8220;help&#8221; as  <i>parser</i>. See  <b>yasm_parsers</b>(7) for a list of supported parsers.</div>
<div class="spacer">
</div>
<b>-r </b><b></b><i>preproc</i> or <b>--preproc=</b><b></b><i>preproc</i>: Select preprocessor<div style="margin-left: 4.00ex;">
Selects the preprocessor to use on the input file before passing it to the parser. Preprocessors often provide macro functionality that is not included in the main parser. The default preprocessor is &#8220;nasm&#8221;, which is an imported version of the actual NASM preprocessor. A &#8220;raw&#8221; preprocessor is also available, which simply skips the preprocessing step, passing the input file directly to the parser. To print a list of available preprocessors to standard output, use &#8220;help&#8221; as  <i>preproc</i>.</div>
<div class="spacer">
</div>
<b>-h</b> or <b>--help</b>: Print a summary of options<div style="margin-left: 4.00ex;">
Prints a summary of invocation options. All other options are ignored, and no output file is generated.</div>
<div class="spacer">
</div>
<b>--version</b>: Get the Yasm version<div style="margin-left: 4.00ex;">
This option causes Yasm to prints the version number of Yasm as well as a license summary to standard output. All other options are ignored, and no output file is generated.</div>
</div>
<div class="subsection">
<h2>Warning Options</h2>  <b>-W</b> options have two contrary forms:  <b>-W</b><b></b><i>name</i> and  <b>-Wno-</b><b></b><i>name</i>. Only the non-default forms are shown here.<div class="spacer">
</div>
The warning options are handled in the order given on the command line, so if  <b>-w</b> is followed by  <b>-Worphan-labels</b>, all warnings are turned off  <i>except</i> for orphan-labels.<div class="spacer">
</div>
<b>-w</b>: Inhibit all warning messages<div style="margin-left: 4.00ex;">
This option causes Yasm to inhibit all warning messages. As discussed above, this option may be followed by other options to re-enable specified warnings.</div>
<div class="spacer">
</div>
<b>-Werror</b>: Treat warnings as errors<div style="margin-left: 4.00ex;">
This option causes Yasm to treat all warnings as errors. Normally warnings do not prevent an object file from being generated and do not result in a failure exit status from  <b>yasm</b>, whereas errors do. This option makes warnings equivalent to errors in terms of this behavior.</div>
<div class="spacer">
</div>
<b>-Wno-unrecognized-char</b>: Do not warn on unrecognized input characters<div style="margin-left: 4.00ex;">
Causes Yasm to not warn on unrecognized characters found in the input. Normally Yasm will generate a warning for any non-ASCII character found in the input file.</div>
<div class="spacer">
</div>
<b>-Worphan-labels</b>: Warn on labels lacking a trailing option<div style="margin-left: 4.00ex;">
When using the NASM-compatible parser, causes Yasm to warn about labels found alone on a line without a trailing colon. While these are legal labels in NASM syntax, they may be unintentional, due to typos or macro definition ordering.</div>
<div class="spacer">
</div>
<b>-X </b><b></b><i>style</i>: Change error/warning reporting style<div style="margin-left: 4.00ex;">
Selects a specific output style for error and warning messages. The default is &#8220;gnu&#8221; style, which mimics the output of  <b>gcc</b>. The &#8220;vc&#8221; style is also available, which mimics the output of Microsoft&#180;s Visual C++ compiler.<div style="height: 1.00em;">
&#160;</div>
This option is available so that Yasm integrates more naturally into IDE environments such as Visual Studio or Emacs, allowing the IDE to correctly recognize the error/warning message as such and link back to the offending line of source code.</div>
</div>
<div class="subsection">
<h2>Preprocessor Options</h2> While these preprocessor options theoretically will affect any preprocessor, the only preprocessor currently in Yasm is the &#8220;nasm&#8221; preprocessor.<div class="spacer">
</div>
<b>-D </b><b></b><i>macro[=value]</i>: Pre-define a macro<div style="margin-left: 4.00ex;">
Pre-defines a single-line macro. The value is optional (if no value is given, the macro is still defined, but to an empty value).</div>
<div class="spacer">
</div>
<b>-e</b> or <b>--preproc-only</b>: Only preprocess<div style="margin-left: 4.00ex;">
Stops assembly after the preprocessing stage; preprocessed output is sent to the specified output name or, if no output name is specified, the standard output. No object file is produced.</div>
<div class="spacer">
</div>
<b>-I </b><b></b><i>path</i>: Add include file path<div style="margin-left: 4.00ex;">
Adds directory  <i>path</i> to the search path for include files. The search path defaults to only including the directory in which the source file resides.</div>
<div class="spacer">
</div>
<b>-P </b><b></b><i>filename</i>: Pre-include a file<div style="margin-left: 4.00ex;">
Pre-includes file  <i>filename</i>, making it look as though  <i>filename</i> was prepended to the input. Can be useful for prepending multi-line macros that the  <b>-D</b> can&#180;t support.</div>
<div class="spacer">
</div>
<b>-U </b><b></b><i>macro</i>: Undefine a macro<div style="margin-left: 4.00ex;">
Undefines a single-line macro (may be either a built-in macro or one defined earlier in the command line with  <b>-D</b>.</div>
</div>
</div>
<div class="section">
<h1>EXAMPLES</h1> To assemble NASM syntax, 32-bit x86 source source.asm into ELF file source.o, warning on orphan labels:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
yasm -f elf32 -Worphan-labels source.asm<br/>
</div>
<div class="spacer">
</div>
To assemble NASM syntax AMD64 source x.asm into Win64 file object.obj:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
yasm -f win64 -o object.obj x.asm<br/>
</div>
<div class="spacer">
</div>
To assemble already preprocessed NASM syntax x86 source y.asm into flat binary file y.com:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
yasm -f bin -r raw -o y.com y.asm<br/>
</div>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1> The  <b>yasm</b> command exits 0 on success, and nonzero if an error occurs.</div>
<div class="section">
<h1>COMPATIBILITY</h1> Yasm&#180;s NASM parser and preprocessor, while they strive to be as compatible as possible with NASM, have a few incompatibilities due to YASM&#180;s different internal structure.<div class="spacer">
</div>
Yasm&#180;s GAS parser and preprocessor are missing a number of features present in GNU AS.</div>
<div class="section">
<h1>RESTRICTIONS</h1> As object files are often architecture and machine dependent, not all combinations of object formats, architectures, and machines are legal; trying to use an invalid combination will result in an error.<div class="spacer">
</div>
There is no support for symbol maps.</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>yasm_arch</b>(7),  <b>yasm_dbgfmts</b>(7),  <b>yasm_objfmts</b>(7),  <b>yasm_parsers</b>(7)<div class="spacer">
</div>
Related tools:  <b>as</b>(1),  <b>ld</b>(1),  <b>nasm</b>(1)</div>
<div class="section">
<h1>BUGS</h1> When using the &#8220;x86&#8221; architecture, it is overly easy to generate AMD64 code (using the  <b>BITS 64</b> directive) and generate a 32-bit object file (by failing to specify  <b>-m amd64</b> or selecting a 64-bit object format such as ELF64 on the command line).</div>
<div class="section">
<h1>AUTHOR</h1>  <b>Peter Johnson</b> &lt;peter@tortall.net&gt;<div style="margin-left: 4.00ex;">
Author.</div>
</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright &#169; 2004, 2005, 2006, 2007 Peter Johnson<div style="height: 0.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
April 2007</td>
<td class="foot-os">
Yasm</td>
</tr>
</table>
</div>
</body>
</html>

