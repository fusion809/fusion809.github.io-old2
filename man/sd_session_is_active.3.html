<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
SD_SESSION_IS_ACTIVE(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
SD_SESSION_IS_ACTIVE(3)</td>
<td class="head-vol">
sd_session_is_active</td>
<td class="head-rtitle">
SD_SESSION_IS_ACTIVE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sd_session_is_active, sd_session_is_remote, sd_session_get_state, sd_session_get_uid, sd_session_get_seat, sd_session_get_service, sd_session_get_type, sd_session_get_class, sd_session_get_desktop, sd_session_get_display, sd_session_get_tty, sd_session_get_vt, sd_session_get_remote_host, sd_session_get_remote_user - Determine state of a specific session</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
#include &lt;systemd/sd-login.h&gt;<br/>
<div class="spacer">
</div>
<div style="margin-left: 25.00ex;text-indent: -25.00ex;" class="spacer">
<b>int sd_session_is_active(const&#160;char&#160;*</b><i>session</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 25.00ex;text-indent: -25.00ex;" class="spacer">
<b>int sd_session_is_remote(const&#160;char&#160;*</b><i>session</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 25.00ex;text-indent: -25.00ex;" class="spacer">
<b>int sd_session_get_state(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>state</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 23.00ex;text-indent: -23.00ex;" class="spacer">
<b>int sd_session_get_uid(const&#160;char&#160;*</b><i>session</i><b>, uid_t&#160;*</b><i>uid</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 24.00ex;text-indent: -24.00ex;" class="spacer">
<b>int sd_session_get_seat(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>seat</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 27.00ex;text-indent: -27.00ex;" class="spacer">
<b>int sd_session_get_service(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>service</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 24.00ex;text-indent: -24.00ex;" class="spacer">
<b>int sd_session_get_type(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>type</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 25.00ex;text-indent: -25.00ex;" class="spacer">
<b>int sd_session_get_class(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>class</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 27.00ex;text-indent: -27.00ex;" class="spacer">
<b>int sd_session_get_desktop(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>desktop</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 27.00ex;text-indent: -27.00ex;" class="spacer">
<b>int sd_session_get_display(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>display</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 31.00ex;text-indent: -31.00ex;" class="spacer">
<b>int sd_session_get_remote_host(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>remote_host</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 31.00ex;text-indent: -31.00ex;" class="spacer">
<b>int sd_session_get_remote_user(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>remote_user</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 23.00ex;text-indent: -23.00ex;" class="spacer">
<b>int sd_session_get_tty(const&#160;char&#160;*</b><i>session</i><b>, char&#160;**</b><i>tty</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 22.00ex;text-indent: -22.00ex;" class="spacer">
<b>int sd_session_get_vt(const&#160;char&#160;*</b><i>session</i><b>, unsigned&#160;int&#160;*</b><i>vt</i><b>);</b></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>sd_session_is_active()</b> may be used to determine whether the session identified by the specified session identifier is currently active (i.e. currently in the foreground and available for user input) or not.<div class="spacer">
</div>
<b>sd_session_is_remote()</b> may be used to determine whether the session identified by the specified session identifier is a remote session (i.e. its remote host is known) or not.<div class="spacer">
</div>
<b>sd_session_get_state()</b> may be used to determine the state of the session identified by the specified session identifier. The following states are currently known: &quot;online&quot; (session logged in, but session not active, i.e. not in the foreground), &quot;active&quot; (session logged in and active, i.e. in the foreground), &quot;closing&quot; (session nominally logged out, but some processes belonging to it are still around). In the future additional states might be defined, client code should be written to be robust in regards to additional state strings being returned. This function is a more generic version of  <b>sd_session_is_active()</b>. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_uid()</b> may be used to determine the user identifier of the Unix user the session identified by the specified session identifier belongs to.<div class="spacer">
</div>
<b>sd_session_get_seat()</b> may be used to determine the seat identifier of the seat the session identified by the specified session identifier belongs to. Note that not all sessions are attached to a seat, this call will fail for them. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_service()</b> may be used to determine the name of the service (as passed during PAM session setup) that registered the session identified by the specified session identifier. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_type()</b> may be used to determine the type of the session identified by the specified session identifier. The returned string is one of &quot;x11&quot;, &quot;wayland&quot;, &quot;tty&quot;, &quot;mir&quot; or &quot;unspecified&quot; and needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_class()</b> may be used to determine the class of the session identified by the specified session identifier. The returned string is one of &quot;user&quot;, &quot;greeter&quot;, &quot;lock-screen&quot;, or &quot;background&quot; and needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_desktop()</b> may be used to determine the brand of the desktop running on the session identified by the specified session identifier. This field can be set freely by desktop environments and does not follow any special formatting. However, desktops are strongly recommended to use the same identifiers and capitalization as for  <i>$XDG_CURRENT_DESKTOP</i>, as defined by the  <b>Desktop Entry Specification</b>[1]. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_display()</b> may be used to determine the X11 display of the session identified by the specified session identifier. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_remote_host()</b> may be used to determine the remote hostname of the session identified by the specified session identifier. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_remote_user()</b> may be used to determine the remote username of the session identified by the specified session identifier. The returned string needs to be freed with the libc  <b>free</b>(3) call after use. Note that this value is rarely known to the system, and even then should not be relied on.<div class="spacer">
</div>
<b>sd_session_get_tty()</b> may be used to determine the TTY device of the session identified by the specified session identifier. The returned string needs to be freed with the libc  <b>free</b>(3) call after use.<div class="spacer">
</div>
<b>sd_session_get_vt()</b> may be used to determine the VT number of the session identified by the specified session identifier. This function will return an error if the seat does not support VTs.<div class="spacer">
</div>
If the  <i>session</i> parameter of any of these functions is passed as  <b>NULL</b>, the operation is executed for the session the calling process is a member of, if there is any.</div>
<div class="section">
<h1>RETURN VALUE</h1> If the test succeeds,  <b>sd_session_is_active()</b> and  <b>sd_session_is_remote()</b> return a positive integer; if it fails, 0. On success,  <b>sd_session_get_state()</b>,  <b>sd_session_get_uid()</b>,  <b>sd_session_get_seat()</b>,  <b>sd_session_get_service()</b>,  <b>sd_session_get_type()</b>,  <b>sd_session_get_class()</b>,  <b>sd_session_get_display()</b>,  <b>sd_session_get_remote_user()</b>,  <b>sd_session_get_remote_host()</b> and  <b>sd_session_get_tty()</b> return 0 or a positive integer. On failure, these calls return a negative errno-style error code.</div>
<div class="section">
<h1>ERRORS</h1> Returned errors may indicate the following problems:<div class="spacer">
</div>
<b>-ENXIO</b><div style="margin-left: 4.00ex;">
The specified session does not exist.</div>
<div class="spacer">
</div>
<b>-ENODATA</b><div style="margin-left: 4.00ex;">
Given field is not specified for the described session.</div>
<div class="spacer">
</div>
<b>-EINVAL</b><div style="margin-left: 4.00ex;">
An input parameter was invalid (out of range, or NULL, where that's not accepted).</div>
<div class="spacer">
</div>
<b>-ENOMEM</b><div style="margin-left: 4.00ex;">
Memory allocation failed.</div>
</div>
<div class="section">
<h1>NOTES</h1> The  <b>sd_session_is_active()</b>,  <b>sd_session_get_state()</b>,  <b>sd_session_get_uid()</b>,  <b>sd_session_get_seat()</b>,  <b>sd_session_get_service()</b>,  <b>sd_session_get_type()</b>,  <b>sd_session_get_class()</b>,  <b>sd_session_get_display()</b>,  <b>sd_session_get_remote_host()</b>,  <b>sd_session_get_remote_user()</b> and  <b>sd_session_get_tty()</b> interfaces are available as a shared library, which can be compiled and linked to with the  <b>libsystemd</b>&#160;<b>pkg-config</b>(1) file.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>systemd</b>(1),  <b>sd-login</b>(3),  <b>sd_pid_get_session</b>(3)</div>
<div class="section">
<h1>NOTES</h1><dl>
<dt>
 1.</dt>
<dd>
Desktop Entry Specification</dd>
</dl>
<div style="margin-left: 4.00ex;">
http://standards.freedesktop.org/desktop-entry-spec/latest/</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
systemd 226</td>
</tr>
</table>
</div>
</body>
</html>

