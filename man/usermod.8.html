<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
USERMOD(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
USERMOD(8)</td>
<td class="head-vol">
System Management Commands</td>
<td class="head-rtitle">
USERMOD(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> usermod - modify a user account</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 8.00ex;text-indent: -8.00ex;" class="spacer">
<b>usermod</b> [<i>options</i>] <i>LOGIN</i></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <b>usermod</b> command modifies the system account files to reflect the changes that are specified on the command line.</div>
<div class="section">
<h1>OPTIONS</h1> The options which apply to the  <b>usermod</b> command are:<div class="spacer">
</div>
<b>-a</b>, <b>--append</b><div style="margin-left: 4.00ex;">
Add the user to the supplementary group(s). Use only with the  <b>-G</b> option.</div>
<div class="spacer">
</div>
<b>-c</b>, <b>--comment</b>&#160;<i>COMMENT</i><div style="margin-left: 4.00ex;">
The new value of the user's password file comment field. It is normally modified using the  <b>chfn</b>(1) utility.</div>
<div class="spacer">
</div>
<b>-d</b>, <b>--home</b>&#160;<i>HOME_DIR</i><div style="margin-left: 4.00ex;">
The user's new login directory.<div style="height: 1.00em;">
&#160;</div>
If the  <b>-m</b> option is given, the contents of the current home directory will be moved to the new home directory, which is created if it does not already exist.</div>
<div class="spacer">
</div>
<b>-e</b>, <b>--expiredate</b>&#160;<i>EXPIRE_DATE</i><div style="margin-left: 4.00ex;">
The date on which the user account will be disabled. The date is specified in the format  <i>YYYY-MM-DD</i>.<div style="height: 1.00em;">
&#160;</div>
An empty  <i>EXPIRE_DATE</i> argument will disable the expiration of the account.<div style="height: 1.00em;">
&#160;</div>
This option requires a /etc/shadow file. A /etc/shadow entry will be created if there were none.</div>
<div class="spacer">
</div>
<b>-f</b>, <b>--inactive</b>&#160;<i>INACTIVE</i><div style="margin-left: 4.00ex;">
The number of days after a password expires until the account is permanently disabled.<div style="height: 1.00em;">
&#160;</div>
A value of 0 disables the account as soon as the password has expired, and a value of -1 disables the feature.<div style="height: 1.00em;">
&#160;</div>
This option requires a /etc/shadow file. A /etc/shadow entry will be created if there were none.</div>
<div class="spacer">
</div>
<b>-g</b>, <b>--gid</b>&#160;<i>GROUP</i><div style="margin-left: 4.00ex;">
The group name or number of the user's new initial login group. The group must exist.<div style="height: 1.00em;">
&#160;</div>
Any file from the user's home directory owned by the previous primary group of the user will be owned by this new group.<div style="height: 1.00em;">
&#160;</div>
The group ownership of files outside of the user's home directory must be fixed manually.</div>
<div class="spacer">
</div>
<b>-G</b>, <b>--groups</b>&#160;<i>GROUP1</i>[<i>,GROUP2,...</i>[<i>,GROUPN</i>]]]<div style="margin-left: 4.00ex;">
A list of supplementary groups which the user is also a member of. Each group is separated from the next by a comma, with no intervening whitespace. The groups are subject to the same restrictions as the group given with the  <b>-g</b> option.<div style="height: 1.00em;">
&#160;</div>
If the user is currently a member of a group which is not listed, the user will be removed from the group. This behaviour can be changed via the  <b>-a</b> option, which appends the user to the current supplementary group list.</div>
<div class="spacer">
</div>
<b>-l</b>, <b>--login</b>&#160;<i>NEW_LOGIN</i><div style="margin-left: 4.00ex;">
The name of the user will be changed from  <i>LOGIN</i> to  <i>NEW_LOGIN</i>. Nothing else is changed. In particular, the user's home directory or mail spool should probably be renamed manually to reflect the new login name.</div>
<div class="spacer">
</div>
<b>-L</b>, <b>--lock</b><div style="margin-left: 4.00ex;">
Lock a user's password. This puts a '!' in front of the encrypted password, effectively disabling the password. You can't use this option with  <b>-p</b> or  <b>-U</b>.<div style="height: 1.00em;">
&#160;</div>
Note: if you wish to lock the account (not only access with a password), you should also set the  <i>EXPIRE_DATE</i> to  <i>1</i>.</div>
<div class="spacer">
</div>
<b>-m</b>, <b>--move-home</b><div style="margin-left: 4.00ex;">
Move the content of the user's home directory to the new location.<div style="height: 1.00em;">
&#160;</div>
This option is only valid in combination with the  <b>-d</b> (or  <b>--home</b>) option.<div style="height: 1.00em;">
&#160;</div>
<b>usermod</b> will try to adapt the ownership of the files and to copy the modes, ACL and extended attributes, but manual changes might be needed afterwards.</div>
<div class="spacer">
</div>
<b>-o</b>, <b>--non-unique</b><div style="margin-left: 4.00ex;">
When used with the  <b>-u</b> option, this option allows to change the user ID to a non-unique value.</div>
<div class="spacer">
</div>
<b>-p</b>, <b>--password</b>&#160;<i>PASSWORD</i><div style="margin-left: 4.00ex;">
The encrypted password, as returned by  <b>crypt</b>(3).<div style="height: 1.00em;">
&#160;</div>
<b>Note:</b> This option is not recommended because the password (or encrypted password) will be visible by users listing the processes.<div style="height: 1.00em;">
&#160;</div>
You should make sure the password respects the system's password policy.</div>
<div class="spacer">
</div>
<b>-R</b>, <b>--root</b>&#160;<i>CHROOT_DIR</i><div style="margin-left: 4.00ex;">
Apply changes in the  <i>CHROOT_DIR</i> directory and use the configuration files from the  <i>CHROOT_DIR</i> directory.</div>
<div class="spacer">
</div>
<b>-s</b>, <b>--shell</b>&#160;<i>SHELL</i><div style="margin-left: 4.00ex;">
The name of the user's new login shell. Setting this field to blank causes the system to select the default login shell.</div>
<div class="spacer">
</div>
<b>-u</b>, <b>--uid</b>&#160;<i>UID</i><div style="margin-left: 4.00ex;">
The new numerical value of the user's ID.<div style="height: 1.00em;">
&#160;</div>
This value must be unique, unless the  <b>-o</b> option is used. The value must be non-negative.<div style="height: 1.00em;">
&#160;</div>
The user's mailbox, and any files which the user owns and which are located in the user's home directory will have the file user ID changed automatically.<div style="height: 1.00em;">
&#160;</div>
The ownership of files outside of the user's home directory must be fixed manually.<div style="height: 1.00em;">
&#160;</div>
No checks will be performed with regard to the  <b>UID_MIN</b>,  <b>UID_MAX</b>,  <b>SYS_UID_MIN</b>, or  <b>SYS_UID_MAX</b> from /etc/login.defs.</div>
<div class="spacer">
</div>
<b>-U</b>, <b>--unlock</b><div style="margin-left: 4.00ex;">
Unlock a user's password. This removes the '!' in front of the encrypted password. You can't use this option with  <b>-p</b> or  <b>-L</b>.<div style="height: 1.00em;">
&#160;</div>
Note: if you wish to unlock the account (not only access with a password), you should also set the  <i>EXPIRE_DATE</i> (for example to  <i>99999</i>, or to the  <b>EXPIRE</b> value from /etc/default/useradd).</div>
<div class="spacer">
</div>
<b>-v</b>, <b>--add-sub-uids</b>&#160;<i>FIRST</i>-<i>LAST</i><div style="margin-left: 4.00ex;">
Add a range of subordinate uids to the user's account.<div style="height: 1.00em;">
&#160;</div>
This option may be specified multiple times to add multiple ranges to a users account.<div style="height: 1.00em;">
&#160;</div>
No checks will be performed with regard to  <b>SUB_UID_MIN</b>,  <b>SUB_UID_MAX</b>, or  <b>SUB_UID_COUNT</b> from /etc/login.defs.</div>
<div class="spacer">
</div>
<b>-V</b>, <b>--del-sub-uids</b>&#160;<i>FIRST</i>-<i>LAST</i><div style="margin-left: 4.00ex;">
Remove a range of subordinate uids from the user's account.<div style="height: 1.00em;">
&#160;</div>
This option may be specified multiple times to remove multiple ranges to a users account. When both  <b>--del-sub-uids</b> and  <b>--add-sub-uids</b> are specified, the removal of all subordinate uid ranges happens before any subordinate uid range is added.<div style="height: 1.00em;">
&#160;</div>
No checks will be performed with regard to  <b>SUB_UID_MIN</b>,  <b>SUB_UID_MAX</b>, or  <b>SUB_UID_COUNT</b> from /etc/login.defs.</div>
<div class="spacer">
</div>
<b>-w</b>, <b>--add-sub-gids</b>&#160;<i>FIRST</i>-<i>LAST</i><div style="margin-left: 4.00ex;">
Add a range of subordinate gids to the user's account.<div style="height: 1.00em;">
&#160;</div>
This option may be specified multiple times to add multiple ranges to a users account.<div style="height: 1.00em;">
&#160;</div>
No checks will be performed with regard to  <b>SUB_GID_MIN</b>,  <b>SUB_GID_MAX</b>, or  <b>SUB_GID_COUNT</b> from /etc/login.defs.</div>
<div class="spacer">
</div>
<b>-W</b>, <b>--del-sub-gids</b>&#160;<i>FIRST</i>-<i>LAST</i><div style="margin-left: 4.00ex;">
Remove a range of subordinate gids from the user's account.<div style="height: 1.00em;">
&#160;</div>
This option may be specified multiple times to remove multiple ranges to a users account. When both  <b>--del-sub-gids</b> and  <b>--add-sub-gids</b> are specified, the removal of all subordinate gid ranges happens before any subordinate gid range is added.<div style="height: 1.00em;">
&#160;</div>
No checks will be performed with regard to  <b>SUB_GID_MIN</b>,  <b>SUB_GID_MAX</b>, or  <b>SUB_GID_COUNT</b> from /etc/login.defs.</div>
<div class="spacer">
</div>
<b>-Z</b>, <b>--selinux-user</b>&#160;<i>SEUSER</i><div style="margin-left: 4.00ex;">
The new SELinux user for the user's login.<div style="height: 1.00em;">
&#160;</div>
A blank  <i>SEUSER</i> will remove the SELinux user mapping for user  <i>LOGIN</i> (if any).</div>
</div>
<div class="section">
<h1>CAVEATS</h1> You must make certain that the named user is not executing any processes when this command is being executed if the user's numerical user ID, the user's name, or the user's home directory is being changed.  <b>usermod</b> checks this on Linux, but only check if the user is logged in according to utmp on other architectures.<div class="spacer">
</div>
You must change the owner of any  <b>crontab</b> files or  <b>at</b> jobs manually.<div class="spacer">
</div>
You must make any changes involving NIS on the NIS server.</div>
<div class="section">
<h1>CONFIGURATION</h1> The following configuration variables in /etc/login.defs change the behavior of this tool:<div class="spacer">
</div>
<b>MAIL_DIR</b> (string)<div style="margin-left: 4.00ex;">
The mail spool directory. This is needed to manipulate the mailbox when its corresponding user account is modified or deleted. If not specified, a compile-time default is used.</div>
<div class="spacer">
</div>
<b>MAIL_FILE</b> (string)<div style="margin-left: 4.00ex;">
Defines the location of the users mail spool files relatively to their home directory.</div>
<div class="spacer">
</div>
The  <b>MAIL_DIR</b> and  <b>MAIL_FILE</b> variables are used by  <b>useradd</b>,  <b>usermod</b>, and  <b>userdel</b> to create, move, or delete the user's mail spool.<div class="spacer">
</div>
If  <b>MAIL_CHECK_ENAB</b> is set to  <i>yes</i>, they are also used to define the  <b>MAIL</b> environment variable.<div class="spacer">
</div>
<b>MAX_MEMBERS_PER_GROUP</b> (number)<div style="margin-left: 4.00ex;">
Maximum members per group entry. When the maximum is reached, a new group entry (line) is started in /etc/group (with the same name, same password, and same GID).<div style="height: 1.00em;">
&#160;</div>
The default value is 0, meaning that there are no limits in the number of members in a group.<div style="height: 1.00em;">
&#160;</div>
This feature (split group) permits to limit the length of lines in the group file. This is useful to make sure that lines for NIS groups are not larger than 1024 characters.<div style="height: 1.00em;">
&#160;</div>
If you need to enforce such limit, you can use 25.<div style="height: 1.00em;">
&#160;</div>
Note: split groups may not be supported by all tools (even in the Shadow toolsuite). You should not use this variable unless you really need it.</div>
<div class="spacer">
</div>
<b>SUB_GID_MIN</b> (number), <b>SUB_GID_MAX</b> (number), <b>SUB_GID_COUNT</b> (number)<div style="margin-left: 4.00ex;">
If /etc/subuid exists, the commands  <b>useradd</b> and  <b>newusers</b> (unless the user already have subordinate group IDs) allocate  <b>SUB_GID_COUNT</b> unused group IDs from the range  <b>SUB_GID_MIN</b> to  <b>SUB_GID_MAX</b> for each new user.<div style="height: 1.00em;">
&#160;</div>
The default values for  <b>SUB_GID_MIN</b>,  <b>SUB_GID_MAX</b>,  <b>SUB_GID_COUNT</b> are respectively 100000, 600100000 and 10000.</div>
<div class="spacer">
</div>
<b>SUB_UID_MIN</b> (number), <b>SUB_UID_MAX</b> (number), <b>SUB_UID_COUNT</b> (number)<div style="margin-left: 4.00ex;">
If /etc/subuid exists, the commands  <b>useradd</b> and  <b>newusers</b> (unless the user already have subordinate user IDs) allocate  <b>SUB_UID_COUNT</b> unused user IDs from the range  <b>SUB_UID_MIN</b> to  <b>SUB_UID_MAX</b> for each new user.<div style="height: 1.00em;">
&#160;</div>
The default values for  <b>SUB_UID_MIN</b>,  <b>SUB_UID_MAX</b>,  <b>SUB_UID_COUNT</b> are respectively 100000, 600100000 and 10000.</div>
</div>
<div class="section">
<h1>FILES</h1> /etc/group<div style="margin-left: 4.00ex;">
Group account information.</div>
<div class="spacer">
</div>
/etc/gshadow<div style="margin-left: 4.00ex;">
Secure group account information.</div>
<div class="spacer">
</div>
/etc/login.defs<div style="margin-left: 4.00ex;">
Shadow password suite configuration.</div>
<div class="spacer">
</div>
/etc/passwd<div style="margin-left: 4.00ex;">
User account information.</div>
<div class="spacer">
</div>
/etc/shadow<div style="margin-left: 4.00ex;">
Secure user account information.</div>
<div class="spacer">
</div>
/etc/subgid<div style="margin-left: 4.00ex;">
Per user subordinate group IDs.</div>
<div class="spacer">
</div>
/etc/subuid<div style="margin-left: 4.00ex;">
Per user subordinate user IDs.</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>chfn</b>(1),  <b>chsh</b>(1),  <b>passwd</b>(1),  <b>crypt</b>(3),  <b>gpasswd</b>(8),  <b>groupadd</b>(8),  <b>groupdel</b>(8),  <b>groupmod</b>(8),  <b>login.defs</b>(5),  <b>subgid</b>(5), <b>subuid</b>(5),<b>useradd</b>(8),  <b>userdel</b>(8).</div>
<table class="foot">
<tr>
<td class="foot-date">
05/09/2014</td>
<td class="foot-os">
shadow-utils 4.2.1</td>
</tr>
</table>
</div>
</body>
</html>

