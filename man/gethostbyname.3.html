<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
GETHOSTBYNAME(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
GETHOSTBYNAME(3)</td>
<td class="head-vol">
Linux Programmer's Manual</td>
<td class="head-rtitle">
GETHOSTBYNAME(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> gethostbyname, gethostbyaddr, sethostent, gethostent, endhostent, h_errno, herror, hstrerror, gethostbyaddr_r, gethostbyname2, gethostbyname2_r, gethostbyname_r, gethostent_r - get network host entry</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>#include &lt;netdb.h&gt;</b> <b>extern int h_errno;</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>struct hostent *gethostbyname(const char *</b><i>name</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>#include &lt;sys/socket.h&gt;</b>       /* for AF_INET */<br/>
<b>struct hostent *gethostbyaddr(const void *</b><i>addr</i><b>,</b><br/>
<b>                              socklen_t </b><i>len</i><b>, int </b><i>type</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>void sethostent(int </b><i>stayopen</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<b>void endhostent(void);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>void herror(const char *</b><i>s</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>const char *hstrerror(int </b><i>err</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
/* System V/POSIX extension */<div style="height: 0.00em;">
&#160;</div>
<b>struct hostent *gethostent(void);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
/* GNU extensions */<div style="height: 0.00em;">
&#160;</div>
<br/>
<b>struct hostent *gethostbyname2(const char *</b><i>name</i><b>, int </b><i>af</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<b>int gethostent_r(</b><br/>
<b>        struct hostent *</b><i>ret</i><b>, char *</b><i>buf</i><b>, size_t </b><i>buflen</i><b>,</b><br/>
<b>        struct hostent **</b><i>result</i><b>, int *</b><i>h_errnop</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>int gethostbyaddr_r(const void *</b><i>addr</i><b>, socklen_t </b><i>len</i><b>, int </b><i>type</i><b>,</b><br/>
<b>        struct hostent *</b><i>ret</i><b>, char *</b><i>buf</i><b>, size_t </b><i>buflen</i><b>,</b><br/>
<b>        struct hostent **</b><i>result</i><b>, int *</b><i>h_errnop</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>int gethostbyname_r(const char *</b><i>name</i><b>,</b><br/>
<b>        struct hostent *</b><i>ret</i><b>, char *</b><i>buf</i><b>, size_t </b><i>buflen</i><b>,</b><br/>
<b>        struct hostent **</b><i>result</i><b>, int *</b><i>h_errnop</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>int gethostbyname2_r(const char *</b><i>name</i><b>, int </b><i>af,</i><br/>
<b>        struct hostent *</b><i>ret</i><b>, char *</b><i>buf</i><b>, size_t </b><i>buflen</i><b>,</b><br/>
<b>        struct hostent **</b><i>result</i><b>, int *</b><i>h_errnop</i><b>);</b><br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
Feature Test Macro Requirements for glibc (see <b>feature_test_macros</b>(7)):<br/>
<div style="height: 1.00em;">
&#160;</div>
<b>gethostbyname2</b>(), <b>gethostent_r</b>(), <b>gethostbyaddr_r</b>(), <b>gethostbyname_r</b>(), <b>gethostbyname2_r</b>():<div style="margin-left: 4.00ex;">
_BSD_SOURCE || _SVID_SOURCE</div>
<div style="height: 1.00em;">
&#160;</div>
<b>herror</b>(), <b>hstrerror</b>():<div style="margin-left: 4.00ex;">
<dl>
<dt>
Since glibc 2.8:</dt>
<dd>
_BSD_SOURCE || _SVID_SOURCE</dd>
</dl>
<dl>
<dt>
Before glibc 2.8:</dt>
<dd>
none</dd>
</dl>
</div>
<div style="height: 1.00em;">
&#160;</div>
<b>h_errno</b>:<div style="margin-left: 4.00ex;">
<dl>
<dt>
Since glibc 2.12:</dt>
<dd>
_BSD_SOURCE || _SVID_SOURCE ||<br/>
    (_POSIX_C_SOURCE &lt; 200809L &amp;&amp; _XOPEN_SOURCE &lt; 700)</dd>
</dl>
<dl>
<dt>
Before glibc 2.12:</dt>
<dd>
none</dd>
</dl>
</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>gethostbyname*</b>(), <b>gethostbyaddr*</b>(), <b>herror</b>(), and <b>hstrerror</b>() functions are obsolete. Applications should use <b>getaddrinfo</b>(3), <b>getnameinfo</b>(3), and <b>gai_strerror</b>(3) instead.<div style="height: 1.00em;">
&#160;</div>
The <b>gethostbyname</b>() function returns a structure of type <i>hostent</i> for the given host <i>name</i>. Here <i>name</i> is either a hostname or an IPv4 address in standard dot notation (as for <b>inet_addr</b>(3)). If <i>name</i> is an IPv4 address, no lookup is performed and <b>gethostbyname</b>() simply copies <i>name</i> into the <i>h_name</i> field and its <i>struct in_addr</i> equivalent into the <i>h_addr_list[0]</i> field of the returned <i>hostent</i> structure. If <i>name</i> doesn't end in a dot and the environment variable <b>HOSTALIASES</b> is set, the alias file pointed to by <b>HOSTALIASES</b> will first be searched for <i>name</i> (see <b>hostname</b>(7) for the file format). The current domain and its parents are searched unless  <i>name</i> ends in a dot.<div class="spacer">
</div>
The <b>gethostbyaddr</b>() function returns a structure of type  <i>hostent</i> for the given host address  <i>addr</i> of length <i>len</i> and address type  <i>type</i>. Valid address types are <b>AF_INET</b> and <b>AF_INET6</b>. The host address argument is a pointer to a struct of a type depending on the address type, for example a  <i>struct in_addr *</i> (probably obtained via a call to <b>inet_addr</b>(3)) for address type <b>AF_INET</b>.<div class="spacer">
</div>
The <b>sethostent</b>() function specifies, if  <i>stayopen</i> is true (1), that a connected TCP socket should be used for the name server queries and that the connection should remain open during successive queries. Otherwise, name server queries will use UDP datagrams.<div class="spacer">
</div>
The <b>endhostent</b>() function ends the use of a TCP connection for name server queries.<div class="spacer">
</div>
The (obsolete) <b>herror</b>() function prints the error message associated with the current value of  <i>h_errno</i> on <i>stderr</i>.<div class="spacer">
</div>
The (obsolete) <b>hstrerror</b>() function takes an error number (typically  <i>h_errno</i>) and returns the corresponding message string.<div class="spacer">
</div>
The domain name queries carried out by <b>gethostbyname</b>() and <b>gethostbyaddr</b>() rely on the Name Service Switch (<b>nsswitch.conf</b>(5)) configured sources or a local name server (<b>named</b>(8)). The default action is to query the Name Service Switch (<b>nsswitch.conf(5))</b> configured sources, failing that, a local name server (<b>named</b>(8)).<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>Historical</h2> The <b>nsswitch.conf</b>(5) file is the modern way of controlling the order of host lookups.<div class="spacer">
</div>
In glibc 2.4 and earlier, the <i>order</i> keyword was used to control the order of host lookups as defined in <i>/etc/host.conf</i> (<b>host.conf</b>(5)).<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The <i>hostent</i> structure is defined in <i>&lt;netdb.h&gt;</i> as follows:<div style="height: 1.00em;">
&#160;</div>
<br/>
<br/>
struct hostent {<br/>
    char  *h_name;            /* official name of host */<br/>
    char **h_aliases;         /* alias list */<br/>
    int    h_addrtype;        /* host address type */<br/>
    int    h_length;          /* length of address */<br/>
    char **h_addr_list;       /* list of addresses */<br/>
}<br/>
#define h_addr h_addr_list[0] /* for backward compatibility */<br/>
<br/>
<div class="spacer">
</div>
The members of the <i>hostent</i> structure are:<dl>
<dt>
<i>h_name</i></dt>
<dd>
The official name of the host.</dd>
</dl>
<dl>
<dt>
<i>h_aliases</i></dt>
<dd>
An array of alternative names for the host, terminated by a null pointer.</dd>
</dl>
<dl>
<dt>
<i>h_addrtype</i></dt>
<dd>
The type of address; always <b>AF_INET</b> or <b>AF_INET6</b> at present.</dd>
</dl>
<dl>
<dt>
<i>h_length</i></dt>
<dd>
The length of the address in bytes.</dd>
</dl>
<dl>
<dt>
<i>h_addr_list</i></dt>
<dd>
An array of pointers to network addresses for the host (in network byte order), terminated by a null pointer.</dd>
</dl>
<dl>
<dt>
<i>h_addr</i></dt>
<dd>
The first address in <i>h_addr_list</i> for backward compatibility.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>RETURN VALUE</h1> The <b>gethostbyname</b>() and <b>gethostbyaddr</b>() functions return the <i>hostent</i> structure or a null pointer if an error occurs. On error, the <i>h_errno</i> variable holds an error number. When non-NULL, the return value may point at static data, see the notes below.</div>
<div class="section">
<h1>ERRORS</h1> The variable  <i>h_errno</i> can have the following values:<dl>
<dt>
<b>HOST_NOT_FOUND</b></dt>
<dd>
The specified host is unknown.</dd>
</dl>
<dl>
<dt>
<b>NO_DATA</b></dt>
<dd>
The requested name is valid but does not have an IP address. Another type of request to the name server for this domain may return an answer. The constant <b>NO_ADDRESS</b> is a synonym for <b>NO_DATA</b>.</dd>
</dl>
<dl>
<dt>
<b>NO_RECOVERY</b></dt>
<dd>
A nonrecoverable name server error occurred.</dd>
</dl>
<dl>
<dt>
<b>TRY_AGAIN</b></dt>
<dd>
A temporary error occurred on an authoritative name server. Try again later.</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/host.conf</i></dt>
<dd>
resolver configuration file</dd>
</dl>
<dl>
<dt>
<i>/etc/hosts</i></dt>
<dd>
host database file</dd>
</dl>
<dl>
<dt>
<i>/etc/nsswitch.conf</i></dt>
<dd>
name service switch configuration</dd>
</dl>
</div>
<div class="section">
<h1>ATTRIBUTES</h1> For an explanation of the terms used in this section, see <b>attributes</b>(7).<table class="tbl">
<col style="width: 59.00ex;"/>
<col style="width: 13.00ex;"/>
<col style="width: 5.00ex;"/>
<tbody>
<tr>
<td>
Interface</td>
<td>
Attribute</td>
<td>
Value</td>
</tr>
<tr>
<td>
gethostbyname ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
<tr>
<td>
MT-Unsafe race:hostbyname env</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
locale</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
T}</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
gethostbyaddr ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
<tr>
<td>
MT-Unsafe race:hostbyaddr env</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
locale</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
T}</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
sethostent (),  endhostent (),  gethostent_r ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
<tr>
<td>
MT-Unsafe race:hostent env</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
locale</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
T}</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
herror (),  hstrerror ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
<tr>
<td>
gethostent ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
<tr>
<td>
MT-Unsafe race:hostent</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
race:hostentbuf env locale</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
T}</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
gethostbyname2 ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
<tr>
<td>
MT-Unsafe race:hostbyname2</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
env locale</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
T}</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
gethostbyaddr_r (), gethostbyname_r (), gethostbyname2_r ()</td>
<td>
Thread safety</td>
<td>
</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
In the above table, <i>hostent</i> in <i>race:hostent</i> signifies that if any of the functions <b>sethostent</b>(3), <b>gethostent</b>(3), <b>gethostent_r</b>(3), or <b>endhostent</b>(3) are used in parallel in different threads of a program, then data races could occur.</div>
<div class="section">
<h1>CONFORMING TO</h1> POSIX.1-2001 specifies <b>gethostbyname</b>(), <b>gethostbyaddr</b>(), <b>sethostent</b>(), <b>endhostent</b>(), <b>gethostent</b>(), and <i>h_errno</i>; <b>gethostbyname</b>(), <b>gethostbyaddr</b>(), and <i>h_errno</i> are marked obsolescent in that standard. POSIX.1-2008 removes the specifications of <b>gethostbyname</b>(), <b>gethostbyaddr</b>(), and <i>h_errno</i>, recommending the use of <b>getaddrinfo</b>(3) and <b>getnameinfo</b>(3) instead.</div>
<div class="section">
<h1>NOTES</h1> The functions <b>gethostbyname</b>() and <b>gethostbyaddr</b>() may return pointers to static data, which may be overwritten by later calls. Copying the <i>struct hostent</i> does not suffice, since it contains pointers; a deep copy is required.<div class="spacer">
</div>
In the original BSD implementation the <i>len</i> argument of <b>gethostbyname</b>() was an <i>int</i>. The SUSv2 standard is buggy and declares the <i>len</i> argument of <b>gethostbyaddr</b>() to be of type <i>size_t</i>. (That is wrong, because it has to be <i>int</i>, and <i>size_t</i> is not. POSIX.1-2001 makes it <i>socklen_t</i>, which is OK.) See also <b>accept</b>(2).<div class="spacer">
</div>
The BSD prototype for <b>gethostbyaddr</b>() uses <i>const char&#160;*</i> for the first argument.<div class="subsection">
<h2>System V/POSIX extension</h2> POSIX requires the <b>gethostent</b>() call, which should return the next entry in the host data base. When using DNS/BIND this does not make much sense, but it may be reasonable if the host data base is a file that can be read line by line. On many systems, a routine of this name reads from the file <i>/etc/hosts</i>. It may be available only when the library was built without DNS support. The glibc version will ignore ipv6 entries. This function is not reentrant, and glibc adds a reentrant version <b>gethostent_r</b>().</div>
<div class="subsection">
<h2>GNU extensions</h2> Glibc2 also has a <b>gethostbyname2</b>() that works like <b>gethostbyname</b>(), but permits to specify the address family to which the address must belong.<div class="spacer">
</div>
Glibc2 also has reentrant versions <b>gethostent_r</b>(), <b>gethostbyaddr_r</b>(), <b>gethostbyname_r</b>() and <b>gethostbyname2_r</b>(). The caller supplies a <i>hostent</i> structure <i>ret</i> which will be filled in on success, and a temporary work buffer <i>buf</i> of size <i>buflen</i>. After the call, <i>result</i> will point to the result on success. In case of an error or if no entry is found <i>result</i> will be NULL. The functions return 0 on success and a nonzero error number on failure. In addition to the errors returned by the nonreentrant versions of these functions, if <i>buf</i> is too small, the functions will return <b>ERANGE</b>, and the call should be retried with a larger buffer. The global variable <i>h_errno</i> is not modified, but the address of a variable in which to store error numbers is passed in <i>h_errnop</i>.</div>
</div>
<div class="section">
<h1>BUGS</h1> <b>gethostbyname</b>() does not recognize components of a dotted IPv4 address string that are expressed in hexadecimal.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>getaddrinfo</b>(3), <b>getnameinfo</b>(3), <b>inet</b>(3), <b>inet_ntop</b>(3), <b>inet_pton</b>(3), <b>resolver</b>(3), <b>hosts</b>(5), <b>nsswitch.conf</b>(5), <b>hostname</b>(7), <b>named</b>(8)</div>
<div class="section">
<h1>COLOPHON</h1> This page is part of release 4.02 of the Linux <i>man-pages</i> project. A description of the project, information about reporting bugs, and the latest version of this page, can be found at http://www.kernel.org/doc/man-pages/.</div>
<table class="foot">
<tr>
<td class="foot-date">
2015-07-23</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

