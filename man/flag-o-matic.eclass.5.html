<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
FLAG-O-MATIC.ECLASS(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
FLAG-O-MATIC.ECLASS(5)</td>
<td class="head-vol">
portage</td>
<td class="head-rtitle">
FLAG-O-MATIC.ECLASS(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> flag-o-matic.eclass - common functions to manipulate and query toolchain flags</div>
<div class="section">
<h1>DESCRIPTION</h1> This eclass contains a suite of functions to help developers sanely and safely manage toolchain flags in their builds.</div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
<b>filter-flags</b> &lt;flags&gt;</dt>
<dd>
Remove particular &lt;flags&gt; from {C,CPP,CXX,CCAS,F,FC,LD}FLAGS.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>filter-lfs-flags</b></dt>
<dd>
Remove flags that enable Large File Support.</dd>
</dl>
<dl>
<dt>
<b>filter-ldflags</b> &lt;flags&gt;</dt>
<dd>
Remove particular &lt;flags&gt; from LDFLAGS.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>append-cppflags</b> &lt;flags&gt;</dt>
<dd>
Add extra &lt;flags&gt; to the current CPPFLAGS.</dd>
</dl>
<dl>
<dt>
<b>append-cflags</b> &lt;flags&gt;</dt>
<dd>
Add extra &lt;flags&gt; to the current CFLAGS.  If a flag might not be supported with different compilers (or versions), then use test-flags-CC like so:<br/>
append-cflags $(test-flags-CC -funky-flag)<br/>
</dd>
</dl>
<dl>
<dt>
<b>append-cxxflags</b> &lt;flags&gt;</dt>
<dd>
Add extra &lt;flags&gt; to the current CXXFLAGS.  If a flag might not be supported with different compilers (or versions), then use test-flags-CXX like so:<br/>
append-cxxflags $(test-flags-CXX -funky-flag)<br/>
</dd>
</dl>
<dl>
<dt>
<b>append-fflags</b> &lt;flags&gt;</dt>
<dd>
Add extra &lt;flags&gt; to the current {F,FC}FLAGS.  If a flag might not be supported with different compilers (or versions), then use test-flags-F77 like so:<br/>
append-fflags $(test-flags-F77 -funky-flag)<br/>
</dd>
</dl>
<dl>
<dt>
<b>append-lfs-flags</b></dt>
<dd>
Add flags that enable Large File Support.</dd>
</dl>
<dl>
<dt>
<b>append-ldflags</b> &lt;flags&gt;</dt>
<dd>
Add extra &lt;flags&gt; to the current LDFLAGS.</dd>
</dl>
<dl>
<dt>
<b>append-flags</b> &lt;flags&gt;</dt>
<dd>
Add extra &lt;flags&gt; to your current {C,CXX,F,FC}FLAGS.</dd>
</dl>
<dl>
<dt>
<b>replace-flags</b> &lt;old&gt; &lt;new&gt;</dt>
<dd>
Replace the &lt;old&gt; flag with &lt;new&gt;.  Accepts shell globs for &lt;old&gt;.</dd>
</dl>
<dl>
<dt>
<b>replace-cpu-flags</b> &lt;old&gt; &lt;new&gt;</dt>
<dd>
Replace cpu flags (like -march/-mcpu/-mtune) that select the &lt;old&gt; cpu with flags that select the &lt;new&gt; cpu.  Accepts shell globs for &lt;old&gt;.</dd>
</dl>
<dl>
<dt>
<b>is-flagq</b> &lt;flag&gt;</dt>
<dd>
Returns shell true if &lt;flag&gt; is in {C,CXX,F,FC}FLAGS, else returns shell false.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>is-flag</b> &lt;flag&gt;</dt>
<dd>
Echo's &quot;true&quot; if flag is set in {C,CXX,F,FC}FLAGS.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>is-ldflagq</b> &lt;flag&gt;</dt>
<dd>
Returns shell true if &lt;flag&gt; is in LDFLAGS, else returns shell false.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>is-ldflag</b> &lt;flag&gt;</dt>
<dd>
Echo's &quot;true&quot; if flag is set in LDFLAGS.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>filter-mfpmath</b> &lt;math types&gt;</dt>
<dd>
Remove specified math types from the fpmath flag.  For example, if the user has -mfpmath=sse,386, running `filter-mfpmath sse` will leave the user with -mfpmath=386.</dd>
</dl>
<dl>
<dt>
<b>strip-flags</b></dt>
<dd>
Strip *FLAGS of everything except known good/safe flags.  This runs over all flags returned by all_flag_vars().</dd>
</dl>
<dl>
<dt>
<b>test-flag-CC</b> &lt;flag&gt;</dt>
<dd>
Returns shell true if &lt;flag&gt; is supported by the C compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flag-CXX</b> &lt;flag&gt;</dt>
<dd>
Returns shell true if &lt;flag&gt; is supported by the C++ compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flag-F77</b> &lt;flag&gt;</dt>
<dd>
Returns shell true if &lt;flag&gt; is supported by the Fortran 77 compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flag-FC</b> &lt;flag&gt;</dt>
<dd>
Returns shell true if &lt;flag&gt; is supported by the Fortran 90 compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flags-CC</b> &lt;flags&gt;</dt>
<dd>
Returns shell true if &lt;flags&gt; are supported by the C compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flags-CXX</b> &lt;flags&gt;</dt>
<dd>
Returns shell true if &lt;flags&gt; are supported by the C++ compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flags-F77</b> &lt;flags&gt;</dt>
<dd>
Returns shell true if &lt;flags&gt; are supported by the Fortran 77 compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flags-FC</b> &lt;flags&gt;</dt>
<dd>
Returns shell true if &lt;flags&gt; are supported by the Fortran 90 compiler, else returns shell false.</dd>
</dl>
<dl>
<dt>
<b>test-flags</b> &lt;flags&gt;</dt>
<dd>
Short-hand that should hopefully work for both C and C++ compiler, but its really only present due to the append-flags() abomination.</dd>
</dl>
<dl>
<dt>
<b>test_version_info</b> &lt;version&gt;</dt>
<dd>
Returns shell true if the current C compiler version matches &lt;version&gt;, else returns shell false. Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>strip-unsupported-flags</b></dt>
<dd>
Strip {C,CXX,F,FC}FLAGS of any flags not supported by the active toolchain.</dd>
</dl>
<dl>
<dt>
<b>get-flag</b> &lt;flag&gt;</dt>
<dd>
Find and echo the value for a particular flag.  Accepts shell globs.</dd>
</dl>
<dl>
<dt>
<b>has_m64</b></dt>
<dd>
This doesn't test if the flag is accepted, it tests if the flag actually WORKS. Non-multilib gcc will take both -m32 and -m64. If the flag works return code is 0, else the return code is 1.</dd>
</dl>
<dl>
<dt>
<b>replace-sparc64-flags</b></dt>
<dd>
Sets mcpu to v8 and uses the original value as mtune if none specified.</dd>
</dl>
<dl>
<dt>
<b>append-libs</b> &lt;libs&gt;</dt>
<dd>
Add extra &lt;libs&gt; to the current LIBS. All arguments should be prefixed with either -l or -L.  For compatibility, if arguments are not prefixed as options, they are given a -l prefix automatically.</dd>
</dl>
<dl>
<dt>
<b>raw-ldflags</b> [flags]</dt>
<dd>
Turn C style ldflags (-Wl,-foo) into straight ldflags - the results are suitable for passing directly to 'ld'; note LDFLAGS is usually passed to gcc where it needs the '-Wl,'.<div style="height: 1.00em;">
&#160;</div>
If no flags are specified, then default to ${LDFLAGS}.</dd>
</dl>
<dl>
<dt>
<b>no-as-needed</b></dt>
<dd>
Return value: Flag to disable asneeded behavior for use with append-ldflags.</dd>
</dl>
</div>
<div class="section">
<h1>MAINTAINERS</h1><br/>
toolchain@gentoo.org<br/>
</div>
<div class="section">
<h1>REPORTING BUGS</h1> Please report bugs via http://bugs.gentoo.org/</div>
<div class="section">
<h1>FILES</h1> <b>/usr/portage/eclass/flag-o-matic.eclass</b></div>
<div class="section">
<h1>SEE ALSO</h1> <b>ebuild</b>(5)<br/>
https://gitweb.gentoo.org/repo/gentoo.git/log/eclass/flag-o-matic.eclass<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
Aug 2015</td>
<td class="foot-os">
Portage</td>
</tr>
</table>
</div>
</body>
</html>

