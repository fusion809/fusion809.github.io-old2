<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
SD_BUS_NEW(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
SD_BUS_NEW(3)</td>
<td class="head-vol">
sd_bus_new</td>
<td class="head-rtitle">
SD_BUS_NEW(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sd_bus_new, sd_bus_ref, sd_bus_unref - Create a new bus object and create or destroy references to it</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
#include &lt;systemd/sd-bus.h&gt;<br/>
<div class="spacer">
</div>
<div style="margin-left: 15.00ex;text-indent: -15.00ex;" class="spacer">
<b>int sd_bus_new(sd_bus&#160;**</b><i>bus</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 19.00ex;text-indent: -19.00ex;" class="spacer">
<b>sd_bus *sd_bus_ref(sd_bus&#160;*</b><i>bus</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 21.00ex;text-indent: -21.00ex;" class="spacer">
<b>sd_bus *sd_bus_unref(sd_bus&#160;*</b><i>bus</i><b>);</b></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>sd_bus_new()</b> creates a new bus object. This object is reference-counted, and will be destroyed when all references are gone. Initially, the caller of this function owns the sole reference and the bus object will not be connected to any bus. To connect it to a bus, make sure to set an address with  <b>sd_bus_set_address</b>(3) or a related call, and then start the connection with  <b>sd_bus_start</b>(3).<div class="spacer">
</div>
In most cases it's a better idea to invoke  <b>sd_bus_default_user</b>(3),  <b>sd_bus_default_system</b>(3) or related calls instead of the more low-level  <b>sd_bus_new()</b> and  <b>sd_bus_start()</b>. The higher-level calls not only allocate a bus object but also start the connection to a well-known bus in a single function invocation.<div class="spacer">
</div>
<b>sd_bus_ref()</b> creates a new reference to  <i>bus</i>.<div class="spacer">
</div>
<b>sd_bus_unref()</b> destroys a reference to  <i>bus</i>. Once the reference count has dropped to zero,  <i>bus</i> cannot be used anymore, so further calls to  <b>sd_bus_ref()</b> or  <b>sd_bus_unref()</b> are illegal.</div>
<div class="section">
<h1>RETURN VALUE</h1> On success,  <b>sd_bus_new()</b> returns 0 or a positive integer. On failure, it returns a negative errno-style error code.<div class="spacer">
</div>
<b>sd_bus_ref</b> always returns the argument.<div class="spacer">
</div>
<b>sd_bus_unref</b> always returns  <b>NULL</b>.</div>
<div class="section">
<h1>ERRORS</h1> Returned errors may indicate the following problems:<div class="spacer">
</div>
<b>-ENOMEM</b><div style="margin-left: 4.00ex;">
Memory allocation failed.</div>
</div>
<div class="section">
<h1>NOTES</h1>  <b>sd_bus_new()</b> and other functions described here are available as a shared library, which can be compiled and linked to with the  <b>libsystemd</b>&#160;<b>pkg-config</b>(1) file.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>systemd</b>(1),  <b>sd-bus</b>(3),  <b>sd_bus_default_user</b>(3),  <b>sd_bus_default_system</b>(3),  <b>sd_bus_open_user</b>(3),  <b>sd_bus_open_system</b>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
systemd 226</td>
</tr>
</table>
</div>
</body>
</html>

