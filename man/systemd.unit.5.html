<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
SYSTEMD.UNIT(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
SYSTEMD.UNIT(5)</td>
<td class="head-vol">
systemd.unit</td>
<td class="head-rtitle">
SYSTEMD.UNIT(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> systemd.unit - Unit configuration</div>
<div class="section">
<h1>SYNOPSIS</h1>  <i>service</i>.service,  <i>socket</i>.socket,  <i>device</i>.device,  <i>mount</i>.mount,  <i>automount</i>.automount,  <i>swap</i>.swap,  <i>target</i>.target,  <i>path</i>.path,  <i>timer</i>.timer,  <i>snapshot</i>.snapshot,  <i>slice</i>.slice,  <i>scope</i>.scope<div class="spacer">
</div>
<br/>
/etc/systemd/system/*<br/>
/run/systemd/system/*<br/>
/usr/lib/systemd/system/*<br/>
...<br/>
    <br/>
<div class="spacer">
</div>
<br/>
$XDG_CONFIG_HOME/systemd/user/*<br/>
$HOME/.config/systemd/user/*<br/>
/etc/systemd/user/*<br/>
$XDG_RUNTIME_DIR/systemd/user/*<br/>
/run/systemd/user/*<br/>
$XDG_DATA_HOME/systemd/user/*<br/>
$HOME/.local/share/systemd/user/*<br/>
/usr/lib/systemd/user/*<br/>
...<br/>
    <br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> A unit configuration file encodes information about a service, a socket, a device, a mount point, an automount point, a swap file or partition, a start-up target, a watched file system path, a timer controlled and supervised by  <b>systemd</b>(1), a temporary system state snapshot, a resource management slice or a group of externally created processes. The syntax is inspired by  <b>XDG Desktop Entry Specification</b>[1] .desktop files, which are in turn inspired by Microsoft Windows .ini files.<div class="spacer">
</div>
This man page lists the common configuration options of all the unit types. These options need to be configured in the [Unit] or [Install] sections of the unit files.<div class="spacer">
</div>
In addition to the generic [Unit] and [Install] sections described here, each unit may have a type-specific section, e.g. [Service] for a service unit. See the respective man pages for more information:  <b>systemd.service</b>(5),  <b>systemd.socket</b>(5),  <b>systemd.device</b>(5),  <b>systemd.mount</b>(5),  <b>systemd.automount</b>(5),  <b>systemd.swap</b>(5),  <b>systemd.target</b>(5),  <b>systemd.path</b>(5),  <b>systemd.timer</b>(5),  <b>systemd.snapshot</b>(5).  <b>systemd.slice</b>(5).  <b>systemd.scope</b>(5).<div class="spacer">
</div>
Various settings are allowed to be specified more than once, in which case the interpretation depends on the setting. Often, multiple settings form a list, and setting to an empty value &quot;resets&quot;, which means that previous assignments are ignored. When this is allowed, it is mentioned in the description of the setting. Note that using multiple assignments to the same value makes the unit file incompatible with parsers for the XDG .desktop file format.<div class="spacer">
</div>
Unit files are loaded from a set of paths determined during compilation, described in the next section.<div class="spacer">
</div>
Unit files may contain additional options on top of those listed here. If systemd encounters an unknown option, it will write a warning log message but continue loading the unit. If an option or section name is prefixed with  <b>X-</b>, it is ignored completely by systemd. Options within an ignored section do not need the prefix. Applications may use this to include additional information in the unit files.<div class="spacer">
</div>
Boolean arguments used in unit files can be written in various formats. For positive settings the strings  <b>1</b>,  <b>yes</b>,  <b>true</b> and  <b>on</b> are equivalent. For negative settings, the strings  <b>0</b>,  <b>no</b>,  <b>false</b> and  <b>off</b> are equivalent.<div class="spacer">
</div>
Time span values encoded in unit files can be written in various formats. A stand-alone number specifies a time in seconds. If suffixed with a time unit, the unit is honored. A concatenation of multiple values with units is supported, in which case the values are added up. Example: &quot;50&quot; refers to 50 seconds; &quot;2min 200ms&quot; refers to 2 minutes plus 200 milliseconds, i.e. 120200ms. The following time units are understood: s, min, h, d, w, ms, us. For details see  <b>systemd.time</b>(7).<div class="spacer">
</div>
Empty lines and lines starting with # or ; are ignored. This may be used for commenting. Lines ending in a backslash are concatenated with the following line while reading and the backslash is replaced by a space character. This may be used to wrap long lines.<div class="spacer">
</div>
Along with a unit file foo.service, the directory foo.service.wants/ may exist. All unit files symlinked from such a directory are implicitly added as dependencies of type  <i>Wants=</i> to the unit. This is useful to hook units into the start-up of other units, without having to modify their unit files. For details about the semantics of  <i>Wants=</i>, see below. The preferred way to create symlinks in the .wants/ directory of a unit file is with the  <b>enable</b> command of the  <b>systemctl</b>(1) tool which reads information from the [Install] section of unit files (see below). A similar functionality exists for  <i>Requires=</i> type dependencies as well, the directory suffix is .requires/ in this case.<div class="spacer">
</div>
Along with a unit file foo.service, a directory foo.service.d/ may exist. All files with the suffix &quot;.conf&quot; from this directory will be parsed after the file itself is parsed. This is useful to alter or add configuration settings to a unit, without having to modify their unit files. Make sure that the file that is included has the appropriate section headers before any directive. Note that for instanced units this logic will first look for the instance &quot;.d/&quot; subdirectory and read its &quot;.conf&quot; files, followed by the template &quot;.d/&quot; subdirectory and reads its &quot;.conf&quot; files.<div class="spacer">
</div>
Note that while systemd offers a flexible dependency system between units it is recommended to use this functionality only sparingly and instead rely on techniques such as bus-based or socket-based activation which make dependencies implicit, resulting in a both simpler and more flexible system.<div class="spacer">
</div>
Some unit names reflect paths existing in the file system namespace. Example: a device unit dev-sda.device refers to a device with the device node /dev/sda in the file system namespace. If this applies, a special way to escape the path name is used, so that the result is usable as part of a filename. Basically, given a path, &quot;/&quot; is replaced by &quot;-&quot; and all other characters which are not ASCII alphanumerics are replaced by C-style &quot;\x2d&quot; escapes (except that &quot;_&quot; is never replaced and &quot;.&quot; is only replaced when it would be the first character in the escaped path). The root directory &quot;/&quot; is encoded as single dash, while otherwise the initial and ending &quot;/&quot; are removed from all paths during transformation. This escaping is reversible. Properly escaped paths can be generated using the  <b>systemd-escape</b>(1) command.<div class="spacer">
</div>
Optionally, units may be instantiated from a template file at runtime. This allows creation of multiple units from a single configuration file. If systemd looks for a unit configuration file, it will first search for the literal unit name in the file system. If that yields no success and the unit name contains an &quot;@&quot; character, systemd will look for a unit template that shares the same name but with the instance string (i.e. the part between the &quot;@&quot; character and the suffix) removed. Example: if a service getty@tty3.service is requested and no file by that name is found, systemd will look for getty@.service and instantiate a service from that configuration file if it is found.<div class="spacer">
</div>
To refer to the instance string from within the configuration file you may use the special &quot;%i&quot; specifier in many of the configuration options. See below for details.<div class="spacer">
</div>
If a unit file is empty (i.e. has the file size 0) or is symlinked to /dev/null, its configuration will not be loaded and it appears with a load state of &quot;masked&quot;, and cannot be activated. Use this as an effective way to fully disable a unit, making it impossible to start it even manually.<div class="spacer">
</div>
The unit file format is covered by the  <b>Interface Stability Promise</b>[2].</div>
<div class="section">
<h1>UNIT FILE LOAD PATH</h1> Unit files are loaded from a set of paths determined during compilation, described in the two tables below. Unit files found in directories listed earlier override files with the same name in directories lower in the list.<div class="spacer">
</div>
When systemd is running in user mode (<b>--user</b>) and the variable  <i>$SYSTEMD_UNIT_PATH</i> is set, the contents of this variable overrides the unit load path. If  <i>$SYSTEMD_UNIT_PATH</i> ends with an empty component (&quot;:&quot;), the usual unit load path will be appended to the contents of the variable.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
<b>Table&#160;1.&#160; Load path when running in system mode (--system).</b><table class="tbl">
<col style="width: 23.00ex;"/>
<col style="width: 27.00ex;"/>
<tbody>
<tr>
<td>
Path</td>
<td>
Description</td>
</tr>
<tr>
<td>
/etc/systemd/system</td>
<td>
Local configuration</td>
</tr>
<tr>
<td>
/run/systemd/system</td>
<td>
Runtime units</td>
</tr>
<tr>
<td>
/usr/lib/systemd/system</td>
<td>
Units of installed packages</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
<b>Table&#160;2.&#160; Load path when running in user mode (--user).</b><table class="tbl">
<col style="width: 33.00ex;"/>
<col style="width: 107.00ex;"/>
<tbody>
<tr>
<td>
Path</td>
<td>
Description</td>
</tr>
<tr>
<td>
$XDG_CONFIG_HOME/systemd/user</td>
<td>
User configuration (only used when $XDG_CONFIG_HOME is set)</td>
</tr>
<tr>
<td>
$HOME/.config/systemd/user</td>
<td>
User configuration (only used when $XDG_CONFIG_HOME is not set)</td>
</tr>
<tr>
<td>
/etc/systemd/user</td>
<td>
Local configuration</td>
</tr>
<tr>
<td>
$XDG_RUNTIME_DIR/systemd/user</td>
<td>
Runtime units (only used when $XDG_RUNTIME_DIR is set)</td>
</tr>
<tr>
<td>
/run/systemd/user</td>
<td>
Runtime units</td>
</tr>
<tr>
<td>
$XDG_DATA_HOME/systemd/user</td>
<td>
Units of packages that have been installed in the home directory (only used when $XDG_DATA_HOME is set)</td>
</tr>
<tr>
<td>
$HOME/.local/share/systemd/user</td>
<td>
Units of packages that have been installed in the home directory (only used when $XDG_DATA_HOME is not set)</td>
</tr>
<tr>
<td>
/usr/lib/systemd/user</td>
<td>
Units of packages that have been installed system-wide</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Additional units might be loaded into systemd (&quot;linked&quot;) from directories not on the unit load path. See the<div style="height: 0.00em;">
&#160;</div>
<b>link</b> command for  <b>systemctl</b>(1). Also, some units are dynamically created via a  <b>systemd.generator</b>(7).</div>
<div class="section">
<h1>[UNIT] SECTION OPTIONS</h1> Unit file may include a [Unit] section, which carries generic information about the unit that is not dependent on the type of unit:<div class="spacer">
</div>
<i>Description=</i><div style="margin-left: 4.00ex;">
A free-form string describing the unit. This is intended for use in UIs to show descriptive information along with the unit name. The description should contain a name that means something to the end user. &quot;Apache2 Web Server&quot; is a good example. Bad examples are &quot;high-performance light-weight HTTP server&quot; (too generic) or &quot;Apache2&quot; (too specific and meaningless for people who do not know Apache).</div>
<div class="spacer">
</div>
<i>Documentation=</i><div style="margin-left: 4.00ex;">
A space-separated list of URIs referencing documentation for this unit or its configuration. Accepted are only URIs of the types &quot;http://&quot;, &quot;https://&quot;, &quot;file:&quot;, &quot;info:&quot;, &quot;man:&quot;. For more information about the syntax of these URIs, see  <b>uri</b>(7). The URIs should be listed in order of relevance, starting with the most relevant. It is a good idea to first reference documentation that explains what the unit's purpose is, followed by how it is configured, followed by any other related documentation. This option may be specified more than once, in which case the specified list of URIs is merged. If the empty string is assigned to this option, the list is reset and all prior assignments will have no effect.</div>
<div class="spacer">
</div>
<i>Requires=</i><div style="margin-left: 4.00ex;">
Configures requirement dependencies on other units. If this unit gets activated, the units listed here will be activated as well. If one of the other units gets deactivated or its activation fails, this unit will be deactivated. This option may be specified more than once or multiple space-separated units may be specified in one option in which case requirement dependencies for all listed names will be created. Note that requirement dependencies do not influence the order in which services are started or stopped. This has to be configured independently with the  <i>After=</i> or  <i>Before=</i> options. If a unit foo.service requires a unit bar.service as configured with  <i>Requires=</i> and no ordering is configured with  <i>After=</i> or  <i>Before=</i>, then both units will be started simultaneously and without any delay between them if foo.service is activated. Often it is a better choice to use  <i>Wants=</i> instead of  <i>Requires=</i> in order to achieve a system that is more robust when dealing with failing services.<div style="height: 1.00em;">
&#160;</div>
Note that dependencies of this type may also be configured outside of the unit configuration file by adding a symlink to a .requires/ directory accompanying the unit file. For details see above.</div>
<div class="spacer">
</div>
<i>RequiresOverridable=</i><div style="margin-left: 4.00ex;">
Similar to  <i>Requires=</i>. Dependencies listed in  <i>RequiresOverridable=</i> which cannot be fulfilled or fail to start are ignored if the startup was explicitly requested by the user. If the start-up was pulled in indirectly by some dependency or automatic start-up of units that is not requested by the user, this dependency must be fulfilled and otherwise the transaction fails. Hence, this option may be used to configure dependencies that are normally honored unless the user explicitly starts up the unit, in which case whether they failed or not is irrelevant.</div>
<div class="spacer">
</div>
<i>Requisite=</i>, <i>RequisiteOverridable=</i><div style="margin-left: 4.00ex;">
Similar to  <i>Requires=</i> and  <i>RequiresOverridable=</i>, respectively. However, if the units listed here are not started already, they will not be started and the transaction will fail immediately.</div>
<div class="spacer">
</div>
<i>Wants=</i><div style="margin-left: 4.00ex;">
A weaker version of  <i>Requires=</i>. Units listed in this option will be started if the configuring unit is. However, if the listed units fail to start or cannot be added to the transaction, this has no impact on the validity of the transaction as a whole. This is the recommended way to hook start-up of one unit to the start-up of another unit.<div style="height: 1.00em;">
&#160;</div>
Note that dependencies of this type may also be configured outside of the unit configuration file by adding symlinks to a .wants/ directory accompanying the unit file. For details, see above.</div>
<div class="spacer">
</div>
<i>BindsTo=</i><div style="margin-left: 4.00ex;">
Configures requirement dependencies, very similar in style to  <i>Requires=</i>, however in addition to this behavior, it also declares that this unit is stopped when any of the units listed suddenly disappears. Units can suddenly, unexpectedly disappear if a service terminates on its own choice, a device is unplugged or a mount point unmounted without involvement of systemd.</div>
<div class="spacer">
</div>
<i>PartOf=</i><div style="margin-left: 4.00ex;">
Configures dependencies similar to  <i>Requires=</i>, but limited to stopping and restarting of units. When systemd stops or restarts the units listed here, the action is propagated to this unit. Note that this is a one-way dependency&#160;&#8212; changes to this unit do not affect the listed units.</div>
<div class="spacer">
</div>
<i>Conflicts=</i><div style="margin-left: 4.00ex;">
A space-separated list of unit names. Configures negative requirement dependencies. If a unit has a  <i>Conflicts=</i> setting on another unit, starting the former will stop the latter and vice versa. Note that this setting is independent of and orthogonal to the  <i>After=</i> and  <i>Before=</i> ordering dependencies.<div style="height: 1.00em;">
&#160;</div>
If a unit A that conflicts with a unit B is scheduled to be started at the same time as B, the transaction will either fail (in case both are required part of the transaction) or be modified to be fixed (in case one or both jobs are not a required part of the transaction). In the latter case, the job that is not the required will be removed, or in case both are not required, the unit that conflicts will be started and the unit that is conflicted is stopped.</div>
<div class="spacer">
</div>
<i>Before=</i>, <i>After=</i><div style="margin-left: 4.00ex;">
A space-separated list of unit names. Configures ordering dependencies between units. If a unit foo.service contains a setting  <b>Before=bar.service</b> and both units are being started, bar.service's start-up is delayed until foo.service is started up. Note that this setting is independent of and orthogonal to the requirement dependencies as configured by  <i>Requires=</i>. It is a common pattern to include a unit name in both the  <i>After=</i> and  <i>Requires=</i> option, in which case the unit listed will be started before the unit that is configured with these options. This option may be specified more than once, in which case ordering dependencies for all listed names are created.  <i>After=</i> is the inverse of  <i>Before=</i>, i.e. while  <i>After=</i> ensures that the configured unit is started after the listed unit finished starting up,  <i>Before=</i> ensures the opposite, i.e. that the configured unit is fully started up before the listed unit is started. Note that when two units with an ordering dependency between them are shut down, the inverse of the start-up order is applied. i.e. if a unit is configured with  <i>After=</i> on another unit, the former is stopped before the latter if both are shut down. If one unit with an ordering dependency on another unit is shut down while the latter is started up, the shut down is ordered before the start-up regardless of whether the ordering dependency is actually of type  <i>After=</i> or  <i>Before=</i>. If two units have no ordering dependencies between them, they are shut down or started up simultaneously, and no ordering takes place.</div>
<div class="spacer">
</div>
<i>OnFailure=</i><div style="margin-left: 4.00ex;">
A space-separated list of one or more units that are activated when this unit enters the &quot;failed&quot; state.</div>
<div class="spacer">
</div>
<i>PropagatesReloadTo=</i>, <i>ReloadPropagatedFrom=</i><div style="margin-left: 4.00ex;">
A space-separated list of one or more units where reload requests on this unit will be propagated to, or reload requests on the other unit will be propagated to this unit, respectively. Issuing a reload request on a unit will automatically also enqueue a reload request on all units that the reload request shall be propagated to via these two settings.</div>
<div class="spacer">
</div>
<i>JoinsNamespaceOf=</i><div style="margin-left: 4.00ex;">
For units that start processes (such as service units), lists one or more other units whose network and/or temporary file namespace to join. This only applies to unit types which support the  <i>PrivateNetwork=</i> and  <i>PrivateTmp=</i> directives (see  <b>systemd.exec</b>(5) for details). If a unit that has this setting set is started, its processes will see the same /tmp, /tmp/var and network namespace as one listed unit that is started. If multiple listed units are already started, it is not defined which namespace is joined. Note that this setting only has an effect if  <i>PrivateNetwork=</i> and/or  <i>PrivateTmp=</i> is enabled for both the unit that joins the namespace and the unit whose namespace is joined.</div>
<div class="spacer">
</div>
<i>RequiresMountsFor=</i><div style="margin-left: 4.00ex;">
Takes a space-separated list of absolute paths. Automatically adds dependencies of type  <i>Requires=</i> and  <i>After=</i> for all mount units required to access the specified path.<div style="height: 1.00em;">
&#160;</div>
Mount points marked with  <b>noauto</b> are not mounted automatically and will be ignored for the purposes of this option. If such a mount should be a requirement for this unit, direct dependencies on the mount units may be added ( <i>Requires=</i> and  <i>After=</i> or some other combination).</div>
<div class="spacer">
</div>
<i>OnFailureJobMode=</i><div style="margin-left: 4.00ex;">
Takes a value of &quot;fail&quot;, &quot;replace&quot;, &quot;replace-irreversibly&quot;, &quot;isolate&quot;, &quot;flush&quot;, &quot;ignore-dependencies&quot; or &quot;ignore-requirements&quot;. Defaults to &quot;replace&quot;. Specifies how the units listed in  <i>OnFailure=</i> will be enqueued. See  <b>systemctl</b>(1)'s  <b>--job-mode=</b> option for details on the possible values. If this is set to &quot;isolate&quot;, only a single unit may be listed in  <i>OnFailure=</i>..</div>
<div class="spacer">
</div>
<i>IgnoreOnIsolate=</i><div style="margin-left: 4.00ex;">
Takes a boolean argument. If  <b>true</b>, this unit will not be stopped when isolating another unit. Defaults to  <b>false</b>.</div>
<div class="spacer">
</div>
<i>IgnoreOnSnapshot=</i><div style="margin-left: 4.00ex;">
Takes a boolean argument. If  <b>true</b>, this unit will not be included in snapshots. Defaults to  <b>true</b> for device and snapshot units,  <b>false</b> for the others.</div>
<div class="spacer">
</div>
<i>StopWhenUnneeded=</i><div style="margin-left: 4.00ex;">
Takes a boolean argument. If  <b>true</b>, this unit will be stopped when it is no longer used. Note that in order to minimize the work to be executed, systemd will not stop units by default unless they are conflicting with other units, or the user explicitly requested their shut down. If this option is set, a unit will be automatically cleaned up if no other active unit requires it. Defaults to  <b>false</b>.</div>
<div class="spacer">
</div>
<i>RefuseManualStart=</i>, <i>RefuseManualStop=</i><div style="margin-left: 4.00ex;">
Takes a boolean argument. If  <b>true</b>, this unit can only be activated or deactivated indirectly. In this case, explicit start-up or termination requested by the user is denied, however if it is started or stopped as a dependency of another unit, start-up or termination will succeed. This is mostly a safety feature to ensure that the user does not accidentally activate units that are not intended to be activated explicitly, and not accidentally deactivate units that are not intended to be deactivated. These options default to  <b>false</b>.</div>
<div class="spacer">
</div>
<i>AllowIsolate=</i><div style="margin-left: 4.00ex;">
Takes a boolean argument. If  <b>true</b>, this unit may be used with the  <b>systemctl isolate</b> command. Otherwise, this will be refused. It probably is a good idea to leave this disabled except for target units that shall be used similar to runlevels in SysV init systems, just as a precaution to avoid unusable system states. This option defaults to  <b>false</b>.</div>
<div class="spacer">
</div>
<i>DefaultDependencies=</i><div style="margin-left: 4.00ex;">
Takes a boolean argument. If  <b>true</b>, (the default), a few default dependencies will implicitly be created for the unit. The actual dependencies created depend on the unit type. For example, for service units, these dependencies ensure that the service is started only after basic system initialization is completed and is properly terminated on system shutdown. See the respective man pages for details. Generally, only services involved with early boot or late shutdown should set this option to  <b>false</b>. It is highly recommended to leave this option enabled for the majority of common units. If set to  <b>false</b>, this option does not disable all implicit dependencies, just non-essential ones.</div>
<div class="spacer">
</div>
<i>JobTimeoutSec=</i>, <i>JobTimeoutAction=</i>, <i>JobTimeoutRebootArgument=</i><div style="margin-left: 4.00ex;">
When a job for this unit is queued a time-out may be configured. If this time limit is reached, the job will be cancelled, the unit however will not change state or even enter the &quot;failed&quot; mode. This value defaults to 0 (job timeouts disabled), except for device units. NB: this timeout is independent from any unit-specific timeout (for example, the timeout set with  <i>TimeoutStartSec=</i> in service units) as the job timeout has no effect on the unit itself, only on the job that might be pending for it. Or in other words: unit-specific timeouts are useful to abort unit state changes, and revert them. The job timeout set with this option however is useful to abort only the job waiting for the unit state to change.<div style="height: 1.00em;">
&#160;</div>
<i>JobTimeoutAction=</i> optionally configures an additional action to take when the time-out is hit. It takes the same values as the per-service  <i>StartLimitAction=</i> setting, see  <b>systemd.service</b>(5) for details. Defaults to  <b>none</b>.  <i>JobTimeoutRebootArgument=</i> configures an optional reboot string to pass to the  <b>reboot</b>(2) system call.</div>
<div class="spacer">
</div>
<i>ConditionArchitecture=</i>, <i>ConditionVirtualization=</i>, <i>ConditionHost=</i>, <i>ConditionKernelCommandLine=</i>, <i>ConditionSecurity=</i>, <i>ConditionCapability=</i>, <i>ConditionACPower=</i>, <i>ConditionNeedsUpdate=</i>, <i>ConditionFirstBoot=</i>, <i>ConditionPathExists=</i>, <i>ConditionPathExistsGlob=</i>, <i>ConditionPathIsDirectory=</i>, <i>ConditionPathIsSymbolicLink=</i>, <i>ConditionPathIsMountPoint=</i>, <i>ConditionPathIsReadWrite=</i>, <i>ConditionDirectoryNotEmpty=</i>, <i>ConditionFileNotEmpty=</i>, <i>ConditionFileIsExecutable=</i><div style="margin-left: 4.00ex;">
Before starting a unit verify that the specified condition is true. If it is not true, the starting of the unit will be skipped, however all ordering dependencies of it are still respected. A failing condition will not result in the unit being moved into a failure state. The condition is checked at the time the queued start job is to be executed.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionArchitecture=</i> may be used to check whether the system is running on a specific architecture. Takes one of  <i>x86</i>,  <i>x86-64</i>,  <i>ppc</i>,  <i>ppc-le</i>,  <i>ppc64</i>,  <i>ppc64-le</i>,  <i>ia64</i>,  <i>parisc</i>,  <i>parisc64</i>,  <i>s390</i>,  <i>s390x</i>,  <i>sparc</i>,  <i>sparc64</i>,  <i>mips</i>,  <i>mips-le</i>,  <i>mips64</i>,  <i>mips64-le</i>,  <i>alpha</i>,  <i>arm</i>,  <i>arm-be</i>,  <i>arm64</i>,  <i>arm64-be</i>,  <i>sh</i>,  <i>sh64</i>,  <i>m86k</i>,  <i>tilegx</i>,  <i>cris</i> to test against a specific architecture. The architecture is determined from the information returned by  <b>uname</b>(2) and is thus subject to  <b>personality</b>(2). Note that a  <i>Personality=</i> setting in the same unit file has no effect on this condition. A special architecture name  <i>native</i> is mapped to the architecture the system manager itself is compiled for. The test may be negated by prepending an exclamation mark.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionVirtualization=</i> may be used to check whether the system is executed in a virtualized environment and optionally test whether it is a specific implementation. Takes either boolean value to check if being executed in any virtualized environment, or one of  <i>vm</i> and  <i>container</i> to test against a generic type of virtualization solution, or one of  <i>qemu</i>,  <i>kvm</i>,  <i>zvm</i>,  <i>vmware</i>,  <i>microsoft</i>,  <i>oracle</i>,  <i>xen</i>,  <i>bochs</i>,  <i>uml</i>,  <i>openvz</i>,  <i>lxc</i>,  <i>lxc-libvirt</i>,  <i>systemd-nspawn</i>,  <i>docker</i> to test against a specific implementation. See  <b>systemd-detect-virt</b>(1) for a full list of known virtualization technologies and their identifiers. If multiple virtualization technologies are nested, only the innermost is considered. The test may be negated by prepending an exclamation mark.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionHost=</i> may be used to match against the hostname or machine ID of the host. This either takes a hostname string (optionally with shell style globs) which is tested against the locally set hostname as returned by  <b>gethostname</b>(2), or a machine ID formatted as string (see  <b>machine-id</b>(5)). The test may be negated by prepending an exclamation mark.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionKernelCommandLine=</i> may be used to check whether a specific kernel command line option is set (or if prefixed with the exclamation mark unset). The argument must either be a single word, or an assignment (i.e. two words, separated &quot;=&quot;). In the former case the kernel command line is searched for the word appearing as is, or as left hand side of an assignment. In the latter case, the exact assignment is looked for with right and left hand side matching.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionSecurity=</i> may be used to check whether the given security module is enabled on the system. Currently the recognized values values are  <i>selinux</i>,  <i>apparmor</i>,  <i>ima</i>,  <i>smack</i> and  <i>audit</i>. The test may be negated by prepending an exclamation mark.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionCapability=</i> may be used to check whether the given capability exists in the capability bounding set of the service manager (i.e. this does not check whether capability is actually available in the permitted or effective sets, see  <b>capabilities</b>(7) for details). Pass a capability name such as &quot;CAP_MKNOD&quot;, possibly prefixed with an exclamation mark to negate the check.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionACPower=</i> may be used to check whether the system has AC power, or is exclusively battery powered at the time of activation of the unit. This takes a boolean argument. If set to  <i>true</i>, the condition will hold only if at least one AC connector of the system is connected to a power source, or if no AC connectors are known. Conversely, if set to  <i>false</i>, the condition will hold only if there is at least one AC connector known and all AC connectors are disconnected from a power source.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionNeedsUpdate=</i> takes one of /var or /etc as argument, possibly prefixed with a &quot;!&quot; (for inverting the condition). This condition may be used to conditionalize units on whether the specified directory requires an update because /usr's modification time is newer than the stamp file .updated in the specified directory. This is useful to implement offline updates of the vendor operating system resources in /usr that require updating of /etc or /var on the next following boot. Units making use of this condition should order themselves before  <b>systemd-update-done.service</b>(8), to make sure they run before the stamp files's modification time gets reset indicating a completed update.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionFirstBoot=</i> takes a boolean argument. This condition may be used to conditionalize units on whether the system is booting up with an unpopulated /etc directory. This may be used to populate /etc on the first boot after factory reset, or when a new system instances boots up for the first time.<div style="height: 1.00em;">
&#160;</div>
With  <i>ConditionPathExists=</i> a file existence condition is checked before a unit is started. If the specified absolute path name does not exist, the condition will fail. If the absolute path name passed to  <i>ConditionPathExists=</i> is prefixed with an exclamation mark (&quot;!&quot;), the test is negated, and the unit is only started if the path does not exist.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionPathExistsGlob=</i> is similar to  <i>ConditionPathExists=</i>, but checks for the existence of at least one file or directory matching the specified globbing pattern.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionPathIsDirectory=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether a certain path exists and is a directory.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionPathIsSymbolicLink=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether a certain path exists and is a symbolic link.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionPathIsMountPoint=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether a certain path exists and is a mount point.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionPathIsReadWrite=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether the underlying file system is readable and writable (i.e. not mounted read-only).<div style="height: 1.00em;">
&#160;</div>
<i>ConditionDirectoryNotEmpty=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether a certain path exists and is a non-empty directory.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionFileNotEmpty=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether a certain path exists and refers to a regular file with a non-zero size.<div style="height: 1.00em;">
&#160;</div>
<i>ConditionFileIsExecutable=</i> is similar to  <i>ConditionPathExists=</i> but verifies whether a certain path exists, is a regular file and marked executable.<div style="height: 1.00em;">
&#160;</div>
If multiple conditions are specified, the unit will be executed if all of them apply (i.e. a logical AND is applied). Condition checks can be prefixed with a pipe symbol (|) in which case a condition becomes a triggering condition. If at least one triggering condition is defined for a unit, then the unit will be executed if at least one of the triggering conditions apply and all of the non-triggering conditions. If you prefix an argument with the pipe symbol and an exclamation mark, the pipe symbol must be passed first, the exclamation second. Except for  <i>ConditionPathIsSymbolicLink=</i>, all path checks follow symlinks. If any of these options is assigned the empty string, the list of conditions is reset completely, all previous condition settings (of any kind) will have no effect.</div>
<div class="spacer">
</div>
<i>AssertArchitecture=</i>, <i>AssertVirtualization=</i>, <i>AssertHost=</i>, <i>AssertKernelCommandLine=</i>, <i>AssertSecurity=</i>, <i>AssertCapability=</i>, <i>AssertACPower=</i>, <i>AssertNeedsUpdate=</i>, <i>AssertFirstBoot=</i>, <i>AssertPathExists=</i>, <i>AssertPathExistsGlob=</i>, <i>AssertPathIsDirectory=</i>, <i>AssertPathIsSymbolicLink=</i>, <i>AssertPathIsMountPoint=</i>, <i>AssertPathIsReadWrite=</i>, <i>AssertDirectoryNotEmpty=</i>, <i>AssertFileNotEmpty=</i>, <i>AssertFileIsExecutable=</i><div style="margin-left: 4.00ex;">
Similar to the  <i>ConditionArchitecture=</i>,  <i>ConditionVirtualization=</i>, ... condition settings described above these settings add assertion checks to the start-up of the unit. However, unlike the conditions settings any assertion setting that is not met results in failure of the start job it was triggered by.</div>
<div class="spacer">
</div>
<i>SourcePath=</i><div style="margin-left: 4.00ex;">
A path to a configuration file this unit has been generated from. This is primarily useful for implementation of generator tools that convert configuration from an external configuration file format into native unit files. This functionality should not be used in normal units.</div>
</div>
<div class="section">
<h1>[INSTALL] SECTION OPTIONS</h1> Unit file may include an &quot;[Install]&quot; section, which carries installation information for the unit. This section is not interpreted by  <b>systemd</b>(1) during runtime. It is used exclusively by the  <b>enable</b> and  <b>disable</b> commands of the  <b>systemctl</b>(1) tool during installation of a unit:<div class="spacer">
</div>
<i>Alias=</i><div style="margin-left: 4.00ex;">
A space-separated list of additional names this unit shall be installed under. The names listed here must have the same suffix (i.e. type) as the unit file name. This option may be specified more than once, in which case all listed names are used. At installation time,  <b>systemctl enable</b> will create symlinks from these names to the unit filename.</div>
<div class="spacer">
</div>
<i>WantedBy=</i>, <i>RequiredBy=</i><div style="margin-left: 4.00ex;">
This option may be used more than once, or a space-separated list of unit names may be given. A symbolic link is created in the .wants/ or .requires/ directory of each of the listed units when this unit is installed by  <b>systemctl enable</b>. This has the effect that a dependency of type  <i>Wants=</i> or  <i>Requires=</i> is added from the listed unit to the current unit. The primary result is that the current unit will be started when the listed unit is started. See the description of  <i>Wants=</i> and  <i>Requires=</i> in the [Unit] section for details.<div style="height: 1.00em;">
&#160;</div>
<b>WantedBy=foo.service</b> in a service bar.service is mostly equivalent to  <b>Alias=foo.service.wants/bar.service</b> in the same file. In case of template units,  <b>systemctl enable</b> must be called with an instance name, and this instance will be added to the .wants/ or .requires/ list of the listed unit. E.g.  <b>WantedBy=getty.target</b> in a service getty@.service will result in  <b>systemctl enable getty@tty2.service</b> creating a getty.target.wants/getty@tty2.service link to getty@.service.</div>
<div class="spacer">
</div>
<i>Also=</i><div style="margin-left: 4.00ex;">
Additional units to install/deinstall when this unit is installed/deinstalled. If the user requests installation/deinstallation of a unit with this option configured,  <b>systemctl enable</b> and  <b>systemctl disable</b> will automatically install/uninstall units listed in this option as well.<div style="height: 1.00em;">
&#160;</div>
This option may be used more than once, or a space-separated list of unit names may be given.</div>
<div class="spacer">
</div>
<i>DefaultInstance=</i><div style="margin-left: 4.00ex;">
In template unit files, this specifies for which instance the unit shall be enabled if the template is enabled without any explicitly set instance. This option has no effect in non-template unit files. The specified string must be usable as instance identifier.</div>
<div class="spacer">
</div>
The following specifiers are interpreted in the Install section: %n, %N, %p, %i, %U, %u, %m, %H, %b, %v. For their meaning see the next section.</div>
<div class="section">
<h1>SPECIFIERS</h1> Many settings resolve specifiers which may be used to write generic unit files referring to runtime or unit parameters that are replaced when the unit files are loaded. The following specifiers are understood:<div style="height: 1.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
<b>Table&#160;3.&#160;Specifiers available in unit files</b><table class="tbl">
<col style="width: 9.00ex;"/>
<col style="width: 63.00ex;"/>
<col style="width: 381.00ex;"/>
<tbody>
<tr>
<td>
Specifier</td>
<td>
Meaning</td>
<td>
Details</td>
</tr>
<tr>
<td>
&quot;%n&quot;</td>
<td>
Full unit name</td>
<td>
&#160;</td>
</tr>
<tr>
<td>
&quot;%N&quot;</td>
<td>
Unescaped full unit name</td>
<td>
Same as &quot;%n&quot;, but with escaping undone</td>
</tr>
<tr>
<td>
&quot;%p&quot;</td>
<td>
Prefix name</td>
<td>
For instantiated units, this refers to the string before the &quot;@&quot; character of the unit name. For non-instantiated units, this refers to the name of the unit with the type suffix removed.</td>
</tr>
<tr>
<td>
&quot;%P&quot;</td>
<td>
Unescaped prefix name</td>
<td>
Same as &quot;%p&quot;, but with escaping undone</td>
</tr>
<tr>
<td>
&quot;%i&quot;</td>
<td>
Instance name</td>
<td>
For instantiated units: this is the string between the &quot;@&quot; character and the suffix of the unit name.</td>
</tr>
<tr>
<td>
&quot;%I&quot;</td>
<td>
Unescaped instance name</td>
<td>
Same as &quot;%i&quot;, but with escaping undone</td>
</tr>
<tr>
<td>
&quot;%f&quot;</td>
<td>
Unescaped filename</td>
<td>
This is either the unescaped instance name (if applicable) with / prepended (if applicable), or the prefix name prepended with /.</td>
</tr>
<tr>
<td>
&quot;%c&quot;</td>
<td>
Control group path of the unit</td>
<td>
This path does not include the /sys/fs/cgroup/systemd/ prefix.</td>
</tr>
<tr>
<td>
&quot;%r&quot;</td>
<td>
Control group path of the slice the unit is placed in</td>
<td>
This usually maps to the parent cgroup path of &quot;%c&quot;.</td>
</tr>
<tr>
<td>
&quot;%R&quot;</td>
<td>
Root control group path below which slices and units are placed</td>
<td>
For system instances, this resolves to /, except in containers, where this maps to the container's root control group path.</td>
</tr>
<tr>
<td>
&quot;%t&quot;</td>
<td>
Runtime directory</td>
<td>
This is either /run (for the system manager) or the path &quot;$XDG_RUNTIME_DIR&quot; resolves to (for user managers).</td>
</tr>
<tr>
<td>
&quot;%u&quot;</td>
<td>
User name</td>
<td>
This is the name of the configured user of the unit, or (if none is set) the user running the systemd instance.</td>
</tr>
<tr>
<td>
&quot;%U&quot;</td>
<td>
User UID</td>
<td>
This is the numeric UID of the configured user of the unit, or (if none is set) the user running the systemd user instance. Note that this specifier is not available for units run by the systemd system instance (as opposed to those run by a systemd user instance), unless the user has been configured as a numeric UID in the first place or the configured user is the root user.</td>
</tr>
<tr>
<td>
&quot;%h&quot;</td>
<td>
User home directory</td>
<td>
This is the home directory of the configured user of the unit, or (if none is set) the user running the systemd user instance. Similar to &quot;%U&quot;, this specifier is not available for units run by the systemd system instance, unless the configured user is the root user.</td>
</tr>
<tr>
<td>
&quot;%s&quot;</td>
<td>
User shell</td>
<td>
This is the shell of the configured user of the unit, or (if none is set) the user running the systemd user instance. Similar to &quot;%U&quot;, this specifier is not available for units run by the systemd system instance, unless the configured user is the root user.</td>
</tr>
<tr>
<td>
&quot;%m&quot;</td>
<td>
Machine ID</td>
<td>
The machine ID of the running system, formatted as string. See <b>machine-id</b>(5) for more information.</td>
</tr>
<tr>
<td>
&quot;%b&quot;</td>
<td>
Boot ID</td>
<td>
The boot ID of the running system, formatted as string. See <b>random</b>(4) for more information.</td>
</tr>
<tr>
<td>
&quot;%H&quot;</td>
<td>
Host name</td>
<td>
The hostname of the running system at the point in time the unit configuration is loaded.</td>
</tr>
<tr>
<td>
&quot;%v&quot;</td>
<td>
Kernel release</td>
<td>
Identical to <b>uname -r</b> output</td>
</tr>
<tr>
<td>
&quot;%%&quot;</td>
<td>
Single percent sign</td>
<td>
Use &quot;%%&quot; in place of &quot;%&quot; to specify a single percent sign.</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Please note that specifiers<div style="height: 0.00em;">
&#160;</div>
&quot;%U&quot;, &quot;%h&quot;, &quot;%s&quot; are mostly useless when systemd is running in system mode. PID 1 cannot query the user account database for information, so the specifiers only work as shortcuts for things which are already specified in a different way in the unit file. They are fully functional when systemd is running in  <b>--user</b> mode.</div>
<div class="section">
<h1>EXAMPLES</h1>  <b>Example&#160;1.&#160;Allowing units to be enabled</b><div class="spacer">
</div>
The following snippet (highlighted) allows a unit (e.g. foo.service) to be enabled via  <b>systemctl enable</b>:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
[Unit]<br/>
Description=Foo<div class="spacer">
</div>
<br/>
[Service]<br/>
ExecStart=/usr/sbin/foo-daemon<div class="spacer">
</div>
<br/>
<i>[Install]</i><br/>
<i>WantedBy=multi-user.target</i><br/>
</div>
<div class="spacer">
</div>
After running  <b>systemctl enable</b>, a symlink /etc/systemd/system/multi-user.target.wants/foo.service linking to the actual unit will be created. It tells systemd to pull in the unit when starting multi-user.target. The inverse  <b>systemctl disable</b> will remove that symlink again.<div class="spacer">
</div>
<b>Example&#160;2.&#160;Overriding vendor settings</b><div class="spacer">
</div>
There are two methods of overriding vendor settings in unit files: copying the unit file from /usr/lib/systemd/system to /etc/systemd/system and modifying the chosen settings. Alternatively, one can create a directory named  <i>unit</i>.d/ within /etc/systemd/system and place a drop-in file  <i>name</i>.conf there that only changes the specific settings one is interested in. Note that multiple such drop-in files are read if present.<div class="spacer">
</div>
The advantage of the first method is that one easily overrides the complete unit, the vendor unit is not parsed at all anymore. It has the disadvantage that improvements to the unit file by the vendor are not automatically incorporated on updates.<div class="spacer">
</div>
The advantage of the second method is that one only overrides the settings one specifically wants, where updates to the unit by the vendor automatically apply. This has the disadvantage that some future updates by the vendor might be incompatible with the local changes.<div class="spacer">
</div>
Note that for drop-in files, if one wants to remove entries from a setting that is parsed as a list (and is not a dependency), such as  <i>ConditionPathExists=</i> (or e.g.  <i>ExecStart=</i> in service units), one needs to first clear the list before re-adding all entries except the one that is to be removed. See below for an example.<div class="spacer">
</div>
This also applies for user instances of systemd, but with different locations for the unit files. See the section on unit load paths for further details.<div class="spacer">
</div>
Suppose there is a vendor-supplied unit /usr/lib/systemd/system/httpd.service with the following contents:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
[Unit]<br/>
Description=Some HTTP server<br/>
After=remote-fs.target sqldb.service<br/>
Requires=sqldb.service<br/>
AssertPathExists=/srv/webserver<div class="spacer">
</div>
<br/>
[Service]<br/>
Type=notify<br/>
ExecStart=/usr/sbin/some-fancy-httpd-server<br/>
Nice=5<div class="spacer">
</div>
<br/>
[Install]<br/>
WantedBy=multi-user.target<br/>
</div>
<div class="spacer">
</div>
Now one wants to change some settings as an administrator: firstly, in the local setup, /srv/webserver might not exist, because the HTTP server is configured to use /srv/www instead. Secondly, the local configuration makes the HTTP server also depend on a memory cache service, memcached.service, that should be pulled in ( <i>Requires=</i>) and also be ordered appropriately (<i>After=</i>). Thirdly, in order to harden the service a bit more, the administrator would like to set the  <i>PrivateTmp=</i> setting (see  <b>systemd.service</b>(5) for details). And lastly, the administrator would like to reset the niceness of the service to its default value of 0.<div class="spacer">
</div>
The first possibility is to copy the unit file to /etc/systemd/system/httpd.service and change the chosen settings:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
[Unit]<br/>
Description=Some HTTP server<br/>
After=remote-fs.target sqldb.service <i>memcached.service</i><br/>
Requires=sqldb.service <i>memcached.service</i><br/>
AssertPathExists=<i>/srv/www</i><div class="spacer">
</div>
<br/>
[Service]<br/>
Type=notify<br/>
ExecStart=/usr/sbin/some-fancy-httpd-server<br/>
<i>Nice=0</i><br/>
<i>PrivateTmp=yes</i><div class="spacer">
</div>
<br/>
[Install]<br/>
WantedBy=multi-user.target<br/>
</div>
<div class="spacer">
</div>
Alternatively, the administrator could create a drop-in file /etc/systemd/system/httpd.service.d/local.conf with the following contents:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
[Unit]<br/>
After=memcached.service<br/>
Requires=memcached.service<br/>
# Reset all assertions and then re-add the condition we want<br/>
AssertPathExists=<br/>
AssertPathExists=/srv/www<div class="spacer">
</div>
<br/>
[Service]<br/>
Nice=0<br/>
PrivateTmp=yes<br/>
</div>
<div class="spacer">
</div>
Note that dependencies (<i>After=</i>, etc.) cannot be reset to an empty list, so dependencies can only be added in drop-ins. If you want to remove dependencies, you have to override the entire unit.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>systemd</b>(1),  <b>systemctl</b>(1),  <b>systemd.special</b>(7),  <b>systemd.service</b>(5),  <b>systemd.socket</b>(5),  <b>systemd.device</b>(5),  <b>systemd.mount</b>(5),  <b>systemd.automount</b>(5),  <b>systemd.swap</b>(5),  <b>systemd.target</b>(5),  <b>systemd.path</b>(5),  <b>systemd.timer</b>(5),  <b>systemd.snapshot</b>(5),  <b>systemd.scope</b>(5),  <b>systemd.slice</b>(5),  <b>systemd.time</b>(7),  <b>systemd-analyze</b>(1),  <b>capabilities</b>(7),  <b>systemd.directives</b>(7),  <b>uname</b>(1)</div>
<div class="section">
<h1>NOTES</h1><dl>
<dt>
 1.</dt>
<dd>
XDG Desktop Entry Specification</dd>
</dl>
<div style="margin-left: 4.00ex;">
http://standards.freedesktop.org/desktop-entry-spec/latest/</div>
<dl>
<dt>
 2.</dt>
<dd>
Interface Stability Promise</dd>
</dl>
<div style="margin-left: 4.00ex;">
http://www.freedesktop.org/wiki/Software/systemd/InterfaceStabilityPromise</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
systemd 226</td>
</tr>
</table>
</div>
</body>
</html>

