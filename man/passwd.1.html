<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
PASSWD(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PASSWD(1)</td>
<td class="head-vol">
User Commands</td>
<td class="head-rtitle">
PASSWD(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> passwd - change user password</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 7.00ex;text-indent: -7.00ex;" class="spacer">
<b>passwd</b> [<i>options</i>] [<i>LOGIN</i>]</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <b>passwd</b> command changes passwords for user accounts. A normal user may only change the password for his/her own account, while the superuser may change the password for any account.  <b>passwd</b> also changes the account or associated password validity period.<div class="subsection">
<h2>Password Changes</h2> The user is first prompted for his/her old password, if one is present. This password is then encrypted and compared against the stored password. The user has only one chance to enter the correct password. The superuser is permitted to bypass this step so that forgotten passwords may be changed.<div class="spacer">
</div>
After the password has been entered, password aging information is checked to see if the user is permitted to change the password at this time. If not,  <b>passwd</b> refuses to change the password and exits.<div class="spacer">
</div>
The user is then prompted twice for a replacement password. The second entry is compared against the first and both are required to match in order for the password to be changed.<div class="spacer">
</div>
Then, the password is tested for complexity. As a general guideline, passwords should consist of 6 to 8 characters including one or more characters from each of the following sets:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;lower case alphabetics</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;digits 0 thru 9</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;punctuation marks</div>
<div class="spacer">
</div>
Care must be taken not to include the system default erase or kill characters.  <b>passwd</b> will reject any password which is not suitably complex.</div>
<div class="subsection">
<h2>Hints for user passwords</h2> The security of a password depends upon the strength of the encryption algorithm and the size of the key space. The legacy  <i>UNIX</i> System encryption method is based on the NBS DES algorithm. More recent methods are now recommended (see  <b>ENCRYPT_METHOD</b>). The size of the key space depends upon the randomness of the password which is selected.<div class="spacer">
</div>
Compromises in password security normally result from careless password selection or handling. For this reason, you should not select a password which appears in a dictionary or which must be written down. The password should also not be a proper name, your license number, birth date, or street address. Any of these may be used as guesses to violate system security.<div class="spacer">
</div>
You can find advices on how to choose a strong password on http://en.wikipedia.org/wiki/Password_strength</div>
</div>
<div class="section">
<h1>OPTIONS</h1> The options which apply to the  <b>passwd</b> command are:<div class="spacer">
</div>
<b>-a</b>, <b>--all</b><div style="margin-left: 4.00ex;">
This option can be used only with  <b>-S</b> and causes show status for all users.</div>
<div class="spacer">
</div>
<b>-d</b>, <b>--delete</b><div style="margin-left: 4.00ex;">
Delete a user's password (make it empty). This is a quick way to disable a password for an account. It will set the named account passwordless.</div>
<div class="spacer">
</div>
<b>-e</b>, <b>--expire</b><div style="margin-left: 4.00ex;">
Immediately expire an account's password. This in effect can force a user to change his/her password at the user's next login.</div>
<div class="spacer">
</div>
<b>-h</b>, <b>--help</b><div style="margin-left: 4.00ex;">
Display help message and exit.</div>
<div class="spacer">
</div>
<b>-i</b>, <b>--inactive</b>&#160;<i>INACTIVE</i><div style="margin-left: 4.00ex;">
This option is used to disable an account after the password has been expired for a number of days. After a user account has had an expired password for  <i>INACTIVE</i> days, the user may no longer sign on to the account.</div>
<div class="spacer">
</div>
<b>-k</b>, <b>--keep-tokens</b><div style="margin-left: 4.00ex;">
Indicate password change should be performed only for expired authentication tokens (passwords). The user wishes to keep their non-expired tokens as before.</div>
<div class="spacer">
</div>
<b>-l</b>, <b>--lock</b><div style="margin-left: 4.00ex;">
Lock the password of the named account. This option disables a password by changing it to a value which matches no possible encrypted value (it adds a &#180;!&#180; at the beginning of the password).<div style="height: 1.00em;">
&#160;</div>
Note that this does not disable the account. The user may still be able to login using another authentication token (e.g. an SSH key). To disable the account, administrators should use  <b>usermod --expiredate 1</b> (this set the account's expire date to Jan 2, 1970).<div style="height: 1.00em;">
&#160;</div>
Users with a locked password are not allowed to change their password.</div>
<div class="spacer">
</div>
<b>-n</b>, <b>--mindays</b>&#160;<i>MIN_DAYS</i><div style="margin-left: 4.00ex;">
Set the minimum number of days between password changes to  <i>MIN_DAYS</i>. A value of zero for this field indicates that the user may change his/her password at any time.</div>
<div class="spacer">
</div>
<b>-q</b>, <b>--quiet</b><div style="margin-left: 4.00ex;">
Quiet mode.</div>
<div class="spacer">
</div>
<b>-r</b>, <b>--repository</b>&#160;<i>REPOSITORY</i><div style="margin-left: 4.00ex;">
change password in  <i>REPOSITORY</i> repository</div>
<div class="spacer">
</div>
<b>-R</b>, <b>--root</b>&#160;<i>CHROOT_DIR</i><div style="margin-left: 4.00ex;">
Apply changes in the  <i>CHROOT_DIR</i> directory and use the configuration files from the  <i>CHROOT_DIR</i> directory.</div>
<div class="spacer">
</div>
<b>-S</b>, <b>--status</b><div style="margin-left: 4.00ex;">
Display account status information. The status information consists of 7 fields. The first field is the user's login name. The second field indicates if the user account has a locked password (L), has no password (NP), or has a usable password (P). The third field gives the date of the last password change. The next four fields are the minimum age, maximum age, warning period, and inactivity period for the password. These ages are expressed in days.</div>
<div class="spacer">
</div>
<b>-u</b>, <b>--unlock</b><div style="margin-left: 4.00ex;">
Unlock the password of the named account. This option re-enables a password by changing the password back to its previous value (to the value before using the  <b>-l</b> option).</div>
<div class="spacer">
</div>
<b>-w</b>, <b>--warndays</b>&#160;<i>WARN_DAYS</i><div style="margin-left: 4.00ex;">
Set the number of days of warning before a password change is required. The  <i>WARN_DAYS</i> option is the number of days prior to the password expiring that a user will be warned that his/her password is about to expire.</div>
<div class="spacer">
</div>
<b>-x</b>, <b>--maxdays</b>&#160;<i>MAX_DAYS</i><div style="margin-left: 4.00ex;">
Set the maximum number of days a password remains valid. After  <i>MAX_DAYS</i>, the password is required to be changed.</div>
</div>
<div class="section">
<h1>CAVEATS</h1> Password complexity checking may vary from site to site. The user is urged to select a password as complex as he or she feels comfortable with.<div class="spacer">
</div>
Users may not be able to change their password on a system if NIS is enabled and they are not logged into the NIS server.</div>
<div class="section">
<h1>CONFIGURATION</h1> The following configuration variables in /etc/login.defs change the behavior of this tool:<div class="spacer">
</div>
<b>ENCRYPT_METHOD</b> (string)<div style="margin-left: 4.00ex;">
This defines the system default encryption algorithm for encrypting passwords (if no algorithm are specified on the command line).<div style="height: 1.00em;">
&#160;</div>
It can take one of these values:  <i>DES</i> (default),  <i>MD5</i>, <i>SHA256</i>, <i>SHA512</i>.<div style="height: 1.00em;">
&#160;</div>
Note: this parameter overrides the  <b>MD5_CRYPT_ENAB</b> variable.</div>
<div class="spacer">
</div>
<b>MD5_CRYPT_ENAB</b> (boolean)<div style="margin-left: 4.00ex;">
Indicate if passwords must be encrypted using the MD5-based algorithm. If set to  <i>yes</i>, new passwords will be encrypted using the MD5-based algorithm compatible with the one used by recent releases of FreeBSD. It supports passwords of unlimited length and longer salt strings. Set to  <i>no</i> if you need to copy encrypted passwords to other systems which don't understand the new algorithm. Default is  <i>no</i>.<div style="height: 1.00em;">
&#160;</div>
This variable is superseded by the  <b>ENCRYPT_METHOD</b> variable or by any command line option used to configure the encryption algorithm.<div style="height: 1.00em;">
&#160;</div>
This variable is deprecated. You should use  <b>ENCRYPT_METHOD</b>.</div>
<div class="spacer">
</div>
<b>OBSCURE_CHECKS_ENAB</b> (boolean)<div style="margin-left: 4.00ex;">
Enable additional checks upon password changes.</div>
<div class="spacer">
</div>
<b>PASS_ALWAYS_WARN</b> (boolean)<div style="margin-left: 4.00ex;">
Warn about weak passwords (but still allow them) if you are root.</div>
<div class="spacer">
</div>
<b>PASS_CHANGE_TRIES</b> (number)<div style="margin-left: 4.00ex;">
Maximum number of attempts to change password if rejected (too easy).</div>
<div class="spacer">
</div>
<b>PASS_MAX_LEN</b> (number), <b>PASS_MIN_LEN</b> (number)<div style="margin-left: 4.00ex;">
Number of significant characters in the password for crypt().  <b>PASS_MAX_LEN</b> is 8 by default. Don't change unless your crypt() is better. This is ignored if  <b>MD5_CRYPT_ENAB</b> set to  <i>yes</i>.</div>
<div class="spacer">
</div>
<b>SHA_CRYPT_MIN_ROUNDS</b> (number), <b>SHA_CRYPT_MAX_ROUNDS</b> (number)<div style="margin-left: 4.00ex;">
When  <b>ENCRYPT_METHOD</b> is set to  <i>SHA256</i> or  <i>SHA512</i>, this defines the number of SHA rounds used by the encryption algorithm by default (when the number of rounds is not specified on the command line).<div style="height: 1.00em;">
&#160;</div>
With a lot of rounds, it is more difficult to brute forcing the password. But note also that more CPU resources will be needed to authenticate users.<div style="height: 1.00em;">
&#160;</div>
If not specified, the libc will choose the default number of rounds (5000).<div style="height: 1.00em;">
&#160;</div>
The values must be inside the 1000-999,999,999 range.<div style="height: 1.00em;">
&#160;</div>
If only one of the  <b>SHA_CRYPT_MIN_ROUNDS</b> or  <b>SHA_CRYPT_MAX_ROUNDS</b> values is set, then this value will be used.<div style="height: 1.00em;">
&#160;</div>
If  <b>SHA_CRYPT_MIN_ROUNDS</b> &gt;  <b>SHA_CRYPT_MAX_ROUNDS</b>, the highest value will be used.</div>
</div>
<div class="section">
<h1>FILES</h1> /etc/passwd<div style="margin-left: 4.00ex;">
User account information.</div>
<div class="spacer">
</div>
/etc/shadow<div style="margin-left: 4.00ex;">
Secure user account information.</div>
<div class="spacer">
</div>
/etc/login.defs<div style="margin-left: 4.00ex;">
Shadow password suite configuration.</div>
</div>
<div class="section">
<h1>EXIT VALUES</h1> The  <b>passwd</b> command exits with the following values:<div class="spacer">
</div>
<i>0</i><div style="margin-left: 4.00ex;">
success</div>
<div class="spacer">
</div>
<i>1</i><div style="margin-left: 4.00ex;">
permission denied</div>
<div class="spacer">
</div>
<i>2</i><div style="margin-left: 4.00ex;">
invalid combination of options</div>
<div class="spacer">
</div>
<i>3</i><div style="margin-left: 4.00ex;">
unexpected failure, nothing done</div>
<div class="spacer">
</div>
<i>4</i><div style="margin-left: 4.00ex;">
unexpected failure, passwd file missing</div>
<div class="spacer">
</div>
<i>5</i><div style="margin-left: 4.00ex;">
passwd file busy, try again</div>
<div class="spacer">
</div>
<i>6</i><div style="margin-left: 4.00ex;">
invalid argument to option</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>chpasswd</b>(8),  <b>passwd</b>(5),  <b>shadow</b>(5),  <b>login.defs</b>(5),<b>usermod</b>(8).</div>
<table class="foot">
<tr>
<td class="foot-date">
05/09/2014</td>
<td class="foot-os">
shadow-utils 4.2.1</td>
</tr>
</table>
</div>
</body>
</html>

