<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
SD_BUS_CREDS_NEW_FROM_PID(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
SD_BUS_CREDS_NEW_FROM_PID(3)</td>
<td class="head-vol">
sd_bus_creds_new_from_pid</td>
<td class="head-rtitle">
SD_BUS_CREDS_NEW_FROM_PID(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sd_bus_creds_new_from_pid, sd_bus_creds_get_mask, sd_bus_creds_get_augmented_mask, sd_bus_creds_ref, sd_bus_creds_unref - Retrieve credentials object for the specified PID</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
#include &lt;systemd/sd-bus.h&gt;<br/>
<div class="spacer">
</div>
<div style="margin-left: 30.00ex;text-indent: -30.00ex;" class="spacer">
<b>int sd_bus_creds_new_from_pid(pid_t&#160;</b><i>pid</i><b>, uint64_t&#160;</b><i>creds_mask</i><b>, sd_bus_creds&#160;**</b><i>ret</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 31.00ex;text-indent: -31.00ex;" class="spacer">
<b>uint64_t sd_bus_creds_get_mask(const&#160;sd_bus_creds&#160;*</b><i>c</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 41.00ex;text-indent: -41.00ex;" class="spacer">
<b>uint64_t sd_bus_creds_get_augmented_mask(const&#160;sd_bus_creds&#160;*</b><i>c</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 31.00ex;text-indent: -31.00ex;" class="spacer">
<b>sd_bus_creds *sd_bus_creds_ref(sd_bus_creds&#160;*</b><i>c</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 33.00ex;text-indent: -33.00ex;" class="spacer">
<b>sd_bus_creds *sd_bus_creds_unref(sd_bus_creds&#160;*</b><i>c</i><b>);</b></div>
<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
<b>SD_BUS_CREDS_PID</b>,  <b>SD_BUS_CREDS_PPID</b>,  <b>SD_BUS_CREDS_TID</b>,  <b>SD_BUS_CREDS_UID</b>,  <b>SD_BUS_CREDS_EUID</b>,  <b>SD_BUS_CREDS_SUID</b>,  <b>SD_BUS_CREDS_FSUID</b>,  <b>SD_BUS_CREDS_GID</b>,  <b>SD_BUS_CREDS_EGID</b>,  <b>SD_BUS_CREDS_SGID</b>,  <b>SD_BUS_CREDS_FSGID</b>,  <b>SD_BUS_CREDS_SUPPLEMENTARY_GIDS</b>,  <b>SD_BUS_CREDS_COMM</b>,  <b>SD_BUS_CREDS_TID_COMM</b>,  <b>SD_BUS_CREDS_EXE</b>,  <b>SD_BUS_CREDS_CMDLINE</b>,  <b>SD_BUS_CREDS_CGROUP</b>,  <b>SD_BUS_CREDS_UNIT</b>,  <b>SD_BUS_CREDS_SLICE</b>,  <b>SD_BUS_CREDS_USER_UNIT</b>,  <b>SD_BUS_CREDS_USER_SLICE</b>,  <b>SD_BUS_CREDS_SESSION</b>,  <b>SD_BUS_CREDS_OWNER_UID</b>,  <b>SD_BUS_CREDS_EFFECTIVE_CAPS</b>,  <b>SD_BUS_CREDS_PERMITTED_CAPS</b>,  <b>SD_BUS_CREDS_INHERITABLE_CAPS</b>,  <b>SD_BUS_CREDS_BOUNDING_CAPS</b>,  <b>SD_BUS_CREDS_SELINUX_CONTEXT</b>,  <b>SD_BUS_CREDS_AUDIT_SESSION_ID</b>,  <b>SD_BUS_CREDS_AUDIT_LOGIN_UID</b>,  <b>SD_BUS_CREDS_TTY</b>,  <b>SD_BUS_CREDS_UNIQUE_NAME</b>,  <b>SD_BUS_CREDS_WELL_KNOWN_NAMES</b>,  <b>SD_BUS_CREDS_DESCRIPTION</b>,  <b>SD_BUS_CREDS_AUGMENT</b>,  <b>_SD_BUS_CREDS_ALL</b></div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>sd_bus_creds_new_from_pid()</b> creates a new credentials object and fills it with information about the process  <i>pid</i>. The pointer to this object will be stored in  <i>ret</i> pointer. Note that credential objects may also be created and retrieved via  <b>sd_bus_get_name_creds</b>(3),  <b>sd_bus_get_owner_creds</b>(3) and  <b>sd_bus_message_get_creds</b>(3).<div class="spacer">
</div>
The information that will be stored is determined by  <i>creds_mask</i>. It may contain a subset of ORed constants  <b>SD_BUS_CREDS_PID</b>,  <b>SD_BUS_CREDS_PPID</b>,  <b>SD_BUS_CREDS_TID</b>,  <b>SD_BUS_CREDS_UID</b>,  <b>SD_BUS_CREDS_EUID</b>,  <b>SD_BUS_CREDS_SUID</b>,  <b>SD_BUS_CREDS_FSUID</b>,  <b>SD_BUS_CREDS_GID</b>,  <b>SD_BUS_CREDS_EGID</b>,  <b>SD_BUS_CREDS_SGID</b>,  <b>SD_BUS_CREDS_FSGID</b>,  <b>SD_BUS_CREDS_SUPPLEMENTARY_GIDS</b>,  <b>SD_BUS_CREDS_COMM</b>,  <b>SD_BUS_CREDS_TID_COMM</b>,  <b>SD_BUS_CREDS_EXE</b>,  <b>SD_BUS_CREDS_CMDLINE</b>,  <b>SD_BUS_CREDS_CGROUP</b>,  <b>SD_BUS_CREDS_UNIT</b>,  <b>SD_BUS_CREDS_SLICE</b>,  <b>SD_BUS_CREDS_USER_UNIT</b>,  <b>SD_BUS_CREDS_USER_SLICE</b>,  <b>SD_BUS_CREDS_SESSION</b>,  <b>SD_BUS_CREDS_OWNER_UID</b>,  <b>SD_BUS_CREDS_EFFECTIVE_CAPS</b>,  <b>SD_BUS_CREDS_PERMITTED_CAPS</b>,  <b>SD_BUS_CREDS_INHERITABLE_CAPS</b>,  <b>SD_BUS_CREDS_BOUNDING_CAPS</b>,  <b>SD_BUS_CREDS_SELINUX_CONTEXT</b>,  <b>SD_BUS_CREDS_AUDIT_SESSION_ID</b>,  <b>SD_BUS_CREDS_AUDIT_LOGIN_UID</b>,  <b>SD_BUS_CREDS_TTY</b>,  <b>SD_BUS_CREDS_UNIQUE_NAME</b>,  <b>SD_BUS_CREDS_WELL_KNOWN_NAMES</b>,  <b>SD_BUS_CREDS_DESCRIPTION</b>. Use the special value  <b>_SD_BUS_CREDS_ALL</b> to request all supported fields. The  <b>SD_BUS_CREDS_AUGMENT</b> may not be ORed into the mask for invocations of  <b>sd_bus_creds_new_from_pid()</b>.<div class="spacer">
</div>
Fields can be retrieved from the credentials object using  <b>sd_bus_creds_get_pid</b>(3) and other functions which correspond directly to the constants listed above.<div class="spacer">
</div>
A mask of fields which were actually successfully retrieved can be retrieved with  <b>sd_bus_creds_get_mask()</b>. If the credentials object was created with  <b>sd_bus_creds_new_from_pid()</b>, this will be a subset of fields requested in  <i>creds_mask</i>.<div class="spacer">
</div>
Similar to  <b>sd_bus_creds_get_mask()</b> the function  <b>sd_bus_creds_get_augmented_mask()</b> returns a bitmask of field constants. The mask indicates which credential fields have been retrieved in a non-atomic fashion. For credential objects created via  <b>sd_bus_creds_new_from_pid()</b> this mask will be identical to the mask returned by  <b>sd_bus_creds_get_mask()</b>. However, for credential objects retrieved via  <b>sd_bus_get_name_creds()</b> this mask will be set for the credential fields that could not be determined atomically at peer connection time, and which were later added by reading augmenting credential data from /proc. Similar, for credential objects retrieved via  <b>sd_bus_get_owner_creds()</b> the mask is set for the fields that could not be determined atomically at bus creation time, but have been augmented. Similar, for credential objects retrieved via  <b>sd_bus_message_get_creds()</b> the mask is set for the fields that could not be determined atomically at message send time, but have been augmented. The mask returned by  <b>sd_bus_creds_get_augmented_mask()</b> is always a subset of (or identical to) the mask returned by  <b>sd_bus_creds_get_mask()</b> for the same object. The latter call hence returns all credential fields available in the credential object, the former then marks the subset of those that have been augmented. Note that augmented fields are unsuitable for authorization decisions as they may be retrieved at different times, thus being subject to races. Hence augmented fields should be used exclusively for informational purposes.<div class="spacer">
</div>
<b>sd_bus_creds_ref()</b> creates a new reference to the credentials object  <i>c</i>. This object will not be destroyed until  <b>sd_bus_creds_unref()</b> has been called as many times plus once more. Once the reference count has dropped to zero,  <i>c</i> cannot be used anymore, so further calls to  <b>sd_bus_creds_ref(c)</b> or  <b>sd_bus_creds_unref(c)</b> are illegal.<div class="spacer">
</div>
<b>sd_bus_creds_unref()</b> destroys a reference to  <i>c</i>.</div>
<div class="section">
<h1>RETURN VALUE</h1> On success,  <b>sd_bus_creds_new_from_pid()</b> returns 0 or a positive integer. On failure, it returns a negative errno-style error code.<div class="spacer">
</div>
<b>sd_bus_creds_get_mask()</b> returns the mask of successfully acquired fields.<div class="spacer">
</div>
<b>sd_bus_creds_get_augmented_mask()</b> returns the mask of fields that have been augmented from data in /proc, and are thus not suitable for authorization decisions.<div class="spacer">
</div>
<b>sd_bus_creds_ref()</b> always returns the argument.<div class="spacer">
</div>
<b>sd_bus_creds_unref()</b> always returns  <b>NULL</b>.</div>
<div class="section">
<h1>REFERENCE OWNERSHIP</h1> Function  <b>sd_bus_creds_new_from_pid()</b> creates a new object and the caller owns the sole reference. When not needed anymore, this reference should be destroyed with  <b>sd_bus_creds_unref</b>(3).</div>
<div class="section">
<h1>ERRORS</h1> Returned errors may indicate the following problems:<div class="spacer">
</div>
<b>-ESRCH</b><div style="margin-left: 4.00ex;">
Specified  <i>pid</i> could not be found.</div>
<div class="spacer">
</div>
<b>-EINVAL</b><div style="margin-left: 4.00ex;">
Specified parameter is invalid (<b>NULL</b> in case of output parameters).</div>
<div class="spacer">
</div>
<b>-ENOMEM</b><div style="margin-left: 4.00ex;">
Memory allocation failed.</div>
<div class="spacer">
</div>
<b>-EOPNOTSUPP</b><div style="margin-left: 4.00ex;">
One of the requested fields is unknown to the local system.</div>
</div>
<div class="section">
<h1>NOTES</h1>  <b>sd_bus_creds_new_from_pid()</b> and the other calls described here are available as a shared library, which can be compiled and linked to with the  <b>libsystemd</b>&#160;<b>pkg-config</b>(1) file.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>systemd</b>(1),  <b>sd-bus</b>(3),  <b>sd_bus_creds_get_pid</b>(3),  <b>sd_bus_get_name_creds</b>(3),  <b>sd_bus_get_owner_creds</b>(3),  <b>sd_bus_message_get_creds</b>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
systemd 226</td>
</tr>
</table>
</div>
</body>
</html>

