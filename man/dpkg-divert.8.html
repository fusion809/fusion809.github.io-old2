<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Tue Jun 21 13:46:53 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>dpkg&minus;divert</title>

</head>
<body>

<h1 align="center">dpkg&minus;divert</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#FILES">FILES</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">dpkg&minus;divert
&minus; override a package&rsquo;s version of a file</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>dpkg&minus;divert</b>
[<i>option</i>...] <i>command</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><b>dpkg&minus;divert</b></i>
is the utility used to set up and update the list of
diversions.</p>

<p style="margin-left:11%; margin-top: 1em">File
<i>diversions</i> are a way of forcing <b>dpkg</b>(1) not to
install a file into its location, but to a <i>diverted</i>
location. Diversions can be used through the Debian package
scripts to move a file away when it causes a conflict.
System administrators can also use it to override some
package&rsquo;s configuration file, or whenever some files
(which aren&rsquo;t marked as &rsquo;conffiles&rsquo;) need
to be preserved by <b>dpkg</b>, when installing a newer
version of a package which contains those files.</p>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">[<b>&minus;&minus;add</b>]
<i>file</i></p>

<p style="margin-left:22%;">Add a diversion for
<i>file</i>.</p>

<p style="margin-left:11%;"><b>&minus;&minus;remove</b>
<i>file</i></p>

<p style="margin-left:22%;">Remove a diversion for
<i>file</i>.</p>

<p style="margin-left:11%;"><b>&minus;&minus;list</b>
<i>glob-pattern</i></p>

<p style="margin-left:22%;">List diversions matching
<i>glob-pattern</i>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;listpackage</b>
<i>file</i></p>

<p style="margin-left:22%;">Print the name of the package
that diverts <i>file</i>. Prints LOCAL if <i>file</i> is
locally diverted and nothing if <i>file</i> is not
diverted.</p>

<p style="margin-left:11%;"><b>&minus;&minus;truename</b>
<i>file</i></p>

<p style="margin-left:22%;">Print the real name for a
diverted file.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;admindir</b>
<i>directory</i></p>

<p style="margin-left:22%;">Set the <b>dpkg</b> data
directory to <i>directory</i> (default:
<i>/var/lib/dpkg</i>).</p>

<p style="margin-left:11%;"><b>&minus;&minus;divert</b>
<i>divert-to</i></p>

<p style="margin-left:22%;"><i>divert-to</i> is the
location where the versions of <i>file</i>, as provided by
other packages, will be diverted.</p>

<p style="margin-left:11%;"><b>&minus;&minus;local</b></p>

<p style="margin-left:22%;">Specifies that all
packages&rsquo; versions of this file are diverted. This
means, that there are no exceptions, and whatever package is
installed, the file is diverted. This can be used by an
admin to install a locally modified version.</p>

<p style="margin-left:11%;"><b>&minus;&minus;package</b>
<i>package</i></p>

<p style="margin-left:22%;"><i>package</i> is the name of a
package whose copy of <i>file</i> will not be diverted. i.e.
<i>file</i> will be diverted for all packages except
<i>package</i>.</p>

<p style="margin-left:11%;"><b>&minus;&minus;quiet</b></p>

<p style="margin-left:22%;">Quiet mode, i.e. no verbose
output.</p>


<p style="margin-left:11%;"><b>&minus;&minus;rename</b></p>

<p style="margin-left:22%;">Actually move the file aside
(or back). <b>dpkg&minus;divert</b> will abort operation in
case the destination file already exists.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;test</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Test mode, i.e. don&rsquo;t actually perform any
changes, just demonstrate.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;?</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">Show the usage message and
exit.</p>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:22%;">Show the version and exit.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>DPKG_ADMINDIR</b></p>

<p style="margin-left:22%;">If set and the
<b>&minus;&minus;admindir</b> option has not been specified,
it will be used as the <b>dpkg</b> data directory.</p>


<p style="margin-left:11%;"><b>DPKG_MAINTSCRIPT_PACKAGE</b></p>

<p style="margin-left:22%;">If set and the
<b>&minus;&minus;local</b> and <b>&minus;&minus;package</b>
options have not been specified, <b>dpkg&minus;divert</b>
will use it as the package name.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>/var/lib/dpkg/diversions</i></p>

<p style="margin-left:22%;">File which contains the current
list of diversions of the system. It is located in the
<b>dpkg</b> administration directory, along with other files
important to <b>dpkg</b>, such as <i>status</i> or
<i>available</i>. <br>
Note: <b>dpkg&minus;divert</b> preserves the old copy of
this file, with extension <i>&minus;old</i>, before
replacing it with the new one.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When adding,
default is <b>&minus;&minus;local</b> and
<b>&minus;&minus;divert</b> <i>original</i><b>.distrib</b>.
When removing, <b>&minus;&minus;package</b> or
<b>&minus;&minus;local</b> and <b>&minus;&minus;divert</b>
must match if specified.</p>

<p style="margin-left:11%; margin-top: 1em">Directories
can&rsquo;t be diverted with <b>dpkg&minus;divert</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Care should be
taken when diverting shared libraries, <b>ldconfig</b>(8)
creates a symbolic link based on the DT_SONAME field
embedded in the library. Because <b>ldconfig</b>
doesn&rsquo;t honour diverts (only <b>dpkg</b> does), the
symlink may end up pointing at the diverted library, if a
diverted library has the same SONAME as the undiverted
one.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To divert all
copies of a <i>/usr/bin/example</i> to
<i>/usr/bin/example.foo</i>, i.e. directs all packages
providing <i>/usr/bin/example</i> to install it as
<i>/usr/bin/example.foo</i>, performing the rename if
required:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">dpkg&minus;divert
&minus;&minus;divert /usr/bin/example.foo
&minus;&minus;rename /usr/bin/example</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To remove that
diversion:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="71%">


<p style="margin-top: 1em">dpkg&minus;divert
&minus;&minus;rename &minus;&minus;remove
/usr/bin/example</p> </td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To divert any
package trying to install <i>/usr/bin/example</i> to
<i>/usr/bin/example.foo</i>, except your own <i>wibble</i>
package:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">dpkg&minus;divert
&minus;&minus;package wibble &minus;&minus;divert
/usr/bin/example.foo &minus;&minus;rename
/usr/bin/example</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To remove that
diversion:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">dpkg&minus;divert
&minus;&minus;package wibble &minus;&minus;rename
&minus;&minus;remove /usr/bin/example</p></td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>dpkg</b>(1).</p>
<hr>
</body>
</html>
