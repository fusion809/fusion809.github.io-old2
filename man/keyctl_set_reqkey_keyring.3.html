<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
KEYCTL_SET_REQKEY_KEYRING(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
KEYCTL_SET_REQKEY_KEYRING(3)</td>
<td class="head-vol">
Linux Key Management Calls</td>
<td class="head-rtitle">
KEYCTL_SET_REQKEY_KEYRING(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> keyctl_set_reqkey_keyring - Set the implicit destination keyring</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>#include &lt;keyutils.h&gt;</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>long keyctl_set_reqkey_keyring(int </b><i>reqkey_defl</i><b>);</b></div>
<div class="section">
<h1>DESCRIPTION</h1> <b>keyctl_set_reqkey_keyring</b>() sets the default destination for implicit key requests for the current thread and returns the old setting.<div class="spacer">
</div>
After this operation has been issued, keys acquired by implicit key requests, such as might be performed by open() on an AFS or NFS filesystem, will be linked by default to the specified keyring by this function.<div class="spacer">
</div>
The valid values of <i>reqkey_defl</i> are:<dl>
<dt>
<b>KEY_REQKEY_DEFL_NO_CHANGE</b></dt>
<dd>
This makes no change to the current setting.</dd>
</dl>
<dl>
<dt>
<b>KEY_REQKEY_DEFL_THREAD_KEYRING</b></dt>
<dd>
This makes the thread-specific keyring the default destination.</dd>
</dl>
<dl>
<dt>
<b>KEY_REQKEY_DEFL_PROCESS_KEYRING</b></dt>
<dd>
This makes the process-specific keyring the default destination.</dd>
</dl>
<dl>
<dt>
<b>KEY_REQKEY_DEFL_SESSION_KEYRING</b></dt>
<dd>
This makes the session keyring the default destination.</dd>
</dl>
<dl>
<dt>
<b>KEY_REQKEY_DEFL_USER_KEYRING</b></dt>
<dd>
This makes the UID-specific keyring the default destination.</dd>
</dl>
<dl>
<dt>
<b>KEY_REQKEY_DEFL_USER_SESSION_KEYRING</b></dt>
<dd>
This makes the UID-specific session keyring the default destination.</dd>
</dl>
<dl>
<dt>
<b>KEY_REQKEY_DEFL_DEFAULT</b></dt>
<dd>
This selects the default behaviour which is to use the thread-specific keyring if there is one, otherwise the process-specific keyring if there is one, otherwise the session keyring if there is one, otherwise the UID-specific session keyring.</dd>
</dl>
<div class="spacer">
</div>
This setting is inherited across <b>fork</b>() and <b>exec</b>().<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>RETURN VALUE</h1> On success <b>keyctl_set_reqkey_keyring</b>() returns <b>0</b>. On error, the value <b>-1</b> will be returned and errno will have been set to an appropriate error.</div>
<div class="section">
<h1>ERRORS</h1><dl>
<dt>
<b>EINVAL</b></dt>
<dd>
The value of <i>reqkey_defl</i> is invalid.</dd>
</dl>
</div>
<div class="section">
<h1>LINKING</h1> This is a library function that can be found in <i>libkeyutils</i>. When linking, <b>-lkeyutils</b> should be specified to the linker.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>keyctl</b>(1),<div style="height: 0.00em;">
&#160;</div>
<b>add_key</b>(2),<div style="height: 0.00em;">
&#160;</div>
<b>keyctl</b>(2),<div style="height: 0.00em;">
&#160;</div>
<b>request_key</b>(2),<div style="height: 0.00em;">
&#160;</div>
<b>keyctl</b>(3),<div style="height: 0.00em;">
&#160;</div>
<b>request-key</b>(8),<div style="height: 0.00em;">
&#160;</div>
<b>keyutils</b>(7),<div style="height: 0.00em;">
&#160;</div>
<b>keyrings</b>(7)</div>
<table class="foot">
<tr>
<td class="foot-date">
4 May 2006</td>
<td class="foot-os">
Linux</td>
</tr>
</table>
</div>
</body>
</html>

