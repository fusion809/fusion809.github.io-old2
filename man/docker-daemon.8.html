<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
DOCKER(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
DOCKER(1)</td>
<td class="head-vol">
SEPTEMBER 2015</td>
<td class="head-rtitle">
DOCKER(1)</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="section">
<h1>NAME</h1> docker-daemon - Enable daemon mode<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>docker daemon</b> [ <b>--api-cors-header</b>=[=<i>API-CORS-HEADER</i>]] [ <b>-b</b>|<b>--bridge</b>[=<i>BRIDGE</i>]] [ <b>--bip</b>[=<i>BIP</i>]] [ <b>--cluster-store</b>[=<i>[]</i>]] [ <b>--cluster-advertise</b>[=<i>[]</i>]] [ <b>--cluster-store-opt</b>[=<i>map[]</i>]] [ <b>-D</b>|<b>--debug</b>[=<i>false</i>]] [ <b>--default-gateway</b>[=<i>DEFAULT-GATEWAY</i>]] [ <b>--default-gateway-v6</b>[=<i>DEFAULT-GATEWAY-V6</i>]] [ <b>--default-ulimit</b>[=<i>[]</i>]] [ <b>--disable-legacy-registry</b>[=<i>false</i>]] [ <b>--dns</b>[=<i>[]</i>]] [ <b>--dns-opt</b>[=<i>[]</i>]] [ <b>--dns-search</b>[=<i>[]</i>]] [ <b>-e</b>|<b>--exec-driver</b>[=<i>native</i>]] [ <b>--exec-opt</b>[=<i>[]</i>]] [ <b>--exec-root</b>[=<i>/var/run/docker</i>]] [ <b>--fixed-cidr</b>[=<i>FIXED-CIDR</i>]] [ <b>--fixed-cidr-v6</b>[=<i>FIXED-CIDR-V6</i>]] [ <b>-G</b>|<b>--group</b>[=<i>docker</i>]] [ <b>-g</b>|<b>--graph</b>[=<i>/var/lib/docker</i>]] [ <b>-H</b>|<b>--host</b>[=<i>[]</i>]] [ <b>--help</b>] [ <b>--icc</b>[=<i>true</i>]] [ <b>--insecure-registry</b>[=<i>[]</i>]] [ <b>--ip</b>[=<i>0.0.0.0</i>]] [ <b>--ip-forward</b>[=<i>true</i>]] [ <b>--ip-masq</b>[=<i>true</i>]] [ <b>--iptables</b>[=<i>true</i>]] [ <b>--ipv6</b>[=<i>false</i>]] [ <b>-l</b>|<b>--log-level</b>[=<i>info</i>]] [ <b>--label</b>[=<i>[]</i>]] [ <b>--log-driver</b>[=<i>json-file</i>]] [ <b>--log-opt</b>[=<i>map[]</i>]] [ <b>--mtu</b>[=<i>0</i>]] [ <b>-p</b>|<b>--pidfile</b>[=<i>/var/run/docker.pid</i>]] [ <b>--registry-mirror</b>[=<i>[]</i>]] [ <b>-s</b>|<b>--storage-driver</b>[=<i>STORAGE-DRIVER</i>]] [ <b>--selinux-enabled</b>[=<i>false</i>]] [ <b>--storage-opt</b>[=<i>[]</i>]] [ <b>--tls</b>[=<i>false</i>]] [ <b>--tlscacert</b>[=<i>&#160;/.docker/ca.pem</i>]] [ <b>--tlscert</b>[=<i>&#160;/.docker/cert.pem</i>]] [ <b>--tlskey</b>[=<i>&#160;/.docker/key.pem</i>]] [ <b>--tlsverify</b>[=<i>false</i>]] [ <b>--userland-proxy</b>[=<i>true</i>]]<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>docker</b> has two distinct functions. It is used for starting the Docker daemon and to run the CLI (i.e., to command the daemon to manage images, containers etc.) So  <b>docker</b> is both a server, as a daemon, and a client to the daemon, through the CLI.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
To run the Docker daemon you can specify <b>docker daemon</b>. You can check the daemon options using  <b>docker daemon --help</b>. Daemon options should be specified after the  <b>daemon</b> keyword in the following format.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>docker daemon [OPTIONS]</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1>  <b>--api-cors-header</b>=&quot;&quot;<br/>
  Set CORS headers in the remote API. Default is cors disabled. Give urls like &quot; &#10216;http://foo&#10217;, &#10216;http://bar&#10217;, ...&quot;. Give &quot;*&quot; to allow all.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-b</b>, <b>--bridge</b>=&quot;&quot;<br/>
  Attach containers to a pre-existing network bridge; use 'none' to disable container networking<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--bip</b>=&quot;&quot;<br/>
  Use the provided CIDR notation address for the dynamically created bridge (docker0); Mutually exclusive of -b<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--cluster-store</b>=&quot;&quot;<br/>
  URL of the distributed storage backend<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--cluster-advertise</b>=&quot;&quot;<br/>
  Specifies the 'host:port' or <b></b>interface:port combination that this particular<br/>
  daemon instance should use when advertising itself to the cluster. The daemon<br/>
  is reached through this value.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--cluster-store-opt</b>=&quot;&quot;<br/>
  Specifies options for the Key/Value store.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-D</b>, <b>--debug</b>=<i>true</i>|<i>false</i><br/>
  Enable debug mode. Default is false.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--default-gateway</b>=&quot;&quot;<br/>
  IPv4 address of the container default gateway; this address must be part of the bridge subnet (which is defined by -b or --bip)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--default-gateway-v6</b>=&quot;&quot;<br/>
  IPv6 address of the container default gateway<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--default-ulimit</b>=[]<br/>
  Set default ulimits for containers.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--disable-legacy-registry</b>=<i>true</i>|<i>false</i><br/>
  Do not contact legacy registries<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--dns</b>=&quot;&quot;<br/>
  Force Docker to use specific DNS servers<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--dns-opt</b>=&quot;&quot;<br/>
  DNS options to use.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--dns-search</b>=[]<br/>
  DNS search domains to use.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-e</b>, <b>--exec-driver</b>=&quot;&quot;<br/>
  Force Docker to use specific exec driver. Default is <b></b>native.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--exec-opt</b>=[]<br/>
  Set exec driver options. See EXEC DRIVER OPTIONS.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--exec-root</b>=&quot;&quot;<br/>
  Path to use as the root of the Docker exec driver. Default is <b></b>/var/run/docker.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--fixed-cidr</b>=&quot;&quot;<br/>
  IPv4 subnet for fixed IPs (e.g., 10.20.0.0/16); this subnet must be nested in the bridge subnet (which is defined by -b or --bip)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--fixed-cidr-v6</b>=&quot;&quot;<br/>
  IPv6 subnet for global IPv6 addresses (e.g., 2a00:1450::/64)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-G</b>, <b>--group</b>=&quot;&quot;<br/>
  Group to assign the unix socket specified by -H when running in daemon mode.<br/>
  use '' (the empty string) to disable setting of a group. Default is <b></b>docker.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-g</b>, <b>--graph</b>=&quot;&quot;<br/>
  Path to use as the root of the Docker runtime. Default is <b></b>/var/lib/docker.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-H</b>, <b>--host</b>=[unix:///var/run/docker.sock]: tcp://[host:port] to bind or unix://[/path/to/socket] to use.<br/>
  The socket(s) to bind to in daemon mode specified using one or more<br/>
  tcp://host:port, unix:///path/to/socket, fd://* or fd://socketfd.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--help</b><br/>
  Print usage statement<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--icc</b>=<i>true</i>|<i>false</i><br/>
  Allow unrestricted inter-container and Docker daemon host communication. If disabled, containers can still be linked together using the <b>--link</b> option (see <b>docker-run(1)</b>). Default is true.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--insecure-registry</b>=[]<br/>
  Enable insecure registry communication, i.e., enable un-encrypted and/or untrusted communication.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
List of insecure registries can contain an element with CIDR notation to specify a whole subnet. Insecure registries accept HTTP and/or accept HTTPS with certificates from unknown CAs.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Enabling <b></b>--insecure-registry is useful when running a local registry.  However, because its use creates security vulnerabilities it should ONLY be enabled for testing purposes.  For increased security, users should add their CA to their system's list of trusted CAs instead of using <b></b>--insecure-registry.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--ip</b>=&quot;&quot;<br/>
  Default IP address to use when binding container ports. Default is <b></b>0.0.0.0.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--ip-forward</b>=<i>true</i>|<i>false</i><br/>
  Enables IP forwarding on the Docker host. The default is <b></b>true. This flag interacts with the IP forwarding setting on your host system's kernel. If your system has IP forwarding disabled, this setting enables it. If your system has IP forwarding enabled, setting this flag to <b></b>--ip-forward=false has no effect.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
This setting will also enable IPv6 forwarding if you have both <b></b>--ip-forward=true and <b></b>--fixed-cidr-v6 set. Note that this may reject Router Advertisements and interfere with the host's existing IPv6 configuration. For more information, please consult the documentation about &quot;Advanced Networking - IPv6&quot;.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--ip-masq</b>=<i>true</i>|<i>false</i><br/>
  Enable IP masquerading for bridge's IP range. Default is true.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--iptables</b>=<i>true</i>|<i>false</i><br/>
  Enable Docker's addition of iptables rules. Default is true.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--ipv6</b>=<i>true</i>|<i>false</i><br/>
  Enable IPv6 support. Default is false. Docker will create an IPv6-enabled bridge with address fe80::1 which will allow you to create IPv6-enabled containers. Use together with <b></b>--fixed-cidr-v6 to provide globally routable IPv6 addresses. IPv6 forwarding will be enabled if not used with <b></b>--ip-forward=false. This may collide with your host's current IPv6 settings. For more information please consult the documentation about &quot;Advanced Networking - IPv6&quot;.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-l</b>, <b>--log-level</b>=&quot;<i>debug</i>|<i>info</i>|<i>warn</i>|<i>error</i>|<i>fatal</i>&quot;&quot;<br/>
  Set the logging level. Default is <b></b>info.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--label</b>=&quot;[]&quot;<br/>
  Set key=value labels to the daemon (displayed in <b></b>docker info)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--log-driver</b>=&quot;<i>json-file</i>|<i>syslog</i>|<i>journald</i>|<i>gelf</i>|<i>fluentd</i>|<i>awslogs</i>|<i>none</i>&quot;<br/>
  Default driver for container logs. Default is <b></b>json-file.<br/>
  <b>Warning</b>: <b></b>docker logs command works only for <b></b>json-file logging driver.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--log-opt</b>=[]<br/>
  Logging driver specific options.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--mtu</b>=VALUE<br/>
  Set the containers network mtu. Default is <b></b>0.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-p</b>, <b>--pidfile</b>=&quot;&quot;<br/>
  Path to use for daemon PID file. Default is <b></b>/var/run/docker.pid<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--registry-mirror</b>=&lt;scheme&gt;://&lt;host&gt;<br/>
  Prepend a registry mirror to be used for image pulls. May be specified multiple times.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>-s</b>, <b>--storage-driver</b>=&quot;&quot;<br/>
  Force the Docker runtime to use a specific storage driver.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--selinux-enabled</b>=<i>true</i>|<i>false</i><br/>
  Enable selinux support. Default is false. SELinux does not presently support the BTRFS storage driver.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--storage-opt</b>=[]<br/>
  Set storage driver options. See STORAGE DRIVER OPTIONS.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--tls</b>=<i>true</i>|<i>false</i><br/>
  Use TLS; implied by --tlsverify. Default is false.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--tlscacert</b>=&#160;/.docker/ca.pem<br/>
  Trust certs signed only by this CA.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--tlscert</b>=&#160;/.docker/cert.pem<br/>
  Path to TLS certificate file.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--tlskey</b>=&#160;/.docker/key.pem<br/>
  Path to TLS key file.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--tlsverify</b>=<i>true</i>|<i>false</i><br/>
  Use TLS and verify the remote (daemon: verify client, client: verify daemon).<br/>
  Default is false.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>--userland-proxy</b>=<i>true</i>|<i>false</i><br/>
    Rely on a userland proxy implementation for inter-container and outside-to-container loopback communications. Default is true.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>STORAGE DRIVER OPTIONS</h1> Docker uses storage backends (known as &quot;graphdrivers&quot; in the Docker internals) to create writable containers from images.  Many of these backends use operating system level technologies and can be configured.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Specify options to the storage backend with <b>--storage-opt</b> flags. The only backend that currently takes options is  <i>devicemapper</i>. Therefore use these flags with  <b>-s=</b>devicemapper.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Specifically for devicemapper, the default is a &quot;loopback&quot; model which requires no pre-configuration, but is extremely inefficient.  Do not use it in production.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
To make the best use of Docker with the devicemapper backend, you must have a recent version of LVM.  Use  <b></b>lvm to create a thin pool; for more information see  <b></b>man lvmthin.  Then, use <b></b>--storage-opt dm.thinpooldev to tell the Docker engine to use that pool for allocating images and container snapshots.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Here is the list of <i>devicemapper</i> options:<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>dm.thinpooldev</h2> Specifies a custom block storage device to use for the thin pool.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
If using a block device for device mapper storage, it is best to use  <b></b>lvm to create and manage the thin-pool volume. This volume is then handed to Docker to create snapshot volumes needed for images and containers.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Managing the thin-pool outside of Docker makes for the most feature-rich method of having Docker utilize device mapper thin provisioning as the backing storage for Docker's containers. The highlights of the LVM-based thin-pool management feature include: automatic or interactive thin-pool resize support, dynamically changing thin-pool features, automatic thinp metadata checking when lvm activates the thin-pool, etc.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.thinpooldev=/dev/mapper/thin-pool<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.basesize</h2> Specifies the size to use when creating the base device, which limits the size of images and containers. The default value is 100G. Note, thin devices are inherently &quot;sparse&quot;, so a 100G device which is mostly empty doesn't use 100 GB of space on the pool. However, the filesystem will use more space for base images the larger the device is.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
This value affects the system-wide &quot;base&quot; empty filesystem that may already be initialized and inherited by pulled images. Typically, a change to this value requires additional steps to take effect:<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<br/>
    $ sudo service docker stop<br/>
    $ sudo rm -rf /var/lib/docker<br/>
    $ sudo service docker start<div class="spacer">
</div>
<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.basesize=20G<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.fs</h2> Specifies the filesystem type to use for the base device. The supported options are  <b></b>ext4 and <b></b>xfs. The default is <b></b>ext4.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.fs=xfs<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.mkfsarg</h2> Specifies extra mkfs arguments to be used when creating the base device.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt &quot;dm.mkfsarg=-O ^has_journal&quot;<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.mountopt</h2> Specifies extra mount options used when mounting the thin devices.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.mountopt=nodiscard<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.use_deferred_removal</h2> Enables use of deferred device removal if  <b></b>libdm and the kernel driver support the mechanism.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Deferred device removal means that if device is busy when devices are being removed/deactivated, then a deferred removal is scheduled on device. And devices automatically go away when last user of the device exits.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
For example, when a container exits, its associated thin device is removed. If that device has leaked into some other mount namespace and can't be removed, the container exit still succeeds and this option causes the system to schedule the device for deferred removal. It does not wait in a loop trying to remove a busy device.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.use_deferred_removal=true<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.use_deferred_deletion</h2> Enables use of deferred device deletion for thin pool devices. By default, thin pool device deletion is synchronous. Before a container is deleted, the Docker daemon removes any associated devices. If the storage driver can not remove a device, the container deletion fails and daemon returns.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b></b>Error deleting container: Error response from daemon: Cannot destroy container<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
To avoid this failure, enable both deferred device deletion and deferred device removal on the daemon.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b></b>docker daemon --storage-opt dm.use_deferred_deletion=true --storage-opt dm.use_deferred_removal=true<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
With these two options enabled, if a device is busy when the driver is deleting a container, the driver marks the device as deleted. Later, when the device isn't in use, the driver deletes it.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
In general it should be safe to enable this option by default. It will help when unintentional leaking of mount point happens across multiple mount namespaces.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.loopdatasize</h2>  <b>Note</b>: This option configures devicemapper loopback, which should not be used in production.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Specifies the size to use when creating the loopback file for the &quot;data&quot; device which is used for the thin pool. The default size is 100G. The file is sparse, so it will not initially take up this much space.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.loopdatasize=200G<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.loopmetadatasize</h2>  <b>Note</b>: This option configures devicemapper loopback, which should not be used in production.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Specifies the size to use when creating the loopback file for the &quot;metadata&quot; device which is used for the thin pool. The default size is 2G. The file is sparse, so it will not initially take up this much space.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.loopmetadatasize=4G<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.datadev</h2> (Deprecated, use  <b></b>dm.thinpooldev)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Specifies a custom blockdevice to use for data for a Docker-managed thin pool.  It is better to use  <b></b>dm.thinpooldev - see the documentation for it above for discussion of the advantages.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.metadatadev</h2> (Deprecated, use  <b></b>dm.thinpooldev)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Specifies a custom blockdevice to use for metadata for a Docker-managed thin pool.  See  <b></b>dm.datadev for why this is deprecated.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.blocksize</h2> Specifies a custom blocksize to use for the thin pool.  The default blocksize is 64K.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.blocksize=512K<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.blkdiscard</h2> Enables or disables the use of  <b></b>blkdiscard when removing devicemapper devices.  This is disabled by default due to the additional latency, but as a special case with loopback devices it will be enabled, in order to re-sparsify the loopback file on image/container removal.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Disabling this on loopback can lead to <i>much</i> faster container removal times, but it also prevents the space used in  <b></b>/var/lib/docker directory from being returned to the system for other use when containers are removed.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Example use: <b></b>docker daemon --storage-opt dm.blkdiscard=false<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>dm.override_udev_sync_check</h2> By default, the devicemapper backend attempts to synchronize with the  <b></b>udev device manager for the Linux kernel.  This option allows disabling that synchronization, to continue even though the configuration may be buggy.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
To view the <b></b>udev sync support of a Docker daemon that is using the  <b></b>devicemapper driver, run:<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<br/>
    $ docker info<br/>
    [...]<br/>
     Udev Sync Supported: true<br/>
    [...]<div class="spacer">
</div>
<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
When <b></b>udev sync support is <b></b>true, then <b></b>devicemapper and <b></b>udev can coordinate the activation and deactivation of devices for containers.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
When <b></b>udev sync support is <b></b>false, a race condition occurs between the  <b></b>devicemapper and <b></b>udev during create and cleanup. The race condition results in errors and failures. (For information on these failures, see<div style="height: 1.00em;">
&#160;</div>
&#10216;https://github.com/docker/docker/issues/4036&#10217;)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
To allow the <b></b>docker daemon to start, regardless of whether <b></b>udev sync is  <b></b>false, set <b></b>dm.override_udev_sync_check to true:<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<br/>
    $ docker daemon --storage-opt dm.override_udev_sync_check=true<div class="spacer">
</div>
<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
When this value is <b></b>true, the driver continues and simply warns you the errors are happening.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>Note</b>: The ideal is to pursue a <b></b>docker daemon and environment that does support synchronizing with  <b></b>udev. For further discussion on this topic, see<div style="height: 1.00em;">
&#160;</div>
&#10216;https://github.com/docker/docker/issues/4036&#10217;. Otherwise, set this flag for migrating existing Docker daemons to a daemon with a supported environment.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>CLUSTER STORE OPTIONS</h1> The daemon uses libkv to advertise the node within the cluster.  Some Key/Value backends support mutual TLS, and the client TLS settings used by the daemon can be configured using the  <b>--cluster-store-opt</b> flag, specifying the paths to PEM encoded files.<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>kv.cacertfile</h2> Specifies the path to a local file with PEM encoded CA certificates to trust<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>kv.certfile</h2> Specifies the path to a local file with a PEM encoded certificate.  This certificate is used as the client cert for communication with the Key/Value store.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>kv.keyfile</h2> Specifies the path to a local file with a PEM encoded private key.  This private key is used as the client key for communication with the Key/Value store.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>HISTORY</h1> Sept 2015, Originally compiled by Shishir Mahajan &#10216;shishir.mahajan@redhat.com&#10217; based on docker.com source material and internal work.</div>
<table class="foot">
<tr>
<td class="foot-date">
 Docker User Manuals</td>
<td class="foot-os">
Shishir Mahajan</td>
</tr>
</table>
</div>
</body>
</html>

