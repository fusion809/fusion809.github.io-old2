<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
RC_DEPTREE(3) (smm)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">rc_deptree_update</b>, <b class="name">rc_deptree_update_needed</b>, <b class="name">rc_deptree_load</b>, <b class="name">rc_deptree_depend</b>, <b class="name">rc_deptree_depends</b>, <b class="name">rc_deptree_order</b>, <b class="name">rc_deptree_free</b> &#8212; <span class="desc">RC dependency tree functions</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> Run Command library (librc, -lrc)</div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">rc.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">bool</i><br/>
<b class="fname">rc_deptree_update</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">bool</i><br/>
<b class="fname">rc_deptree_update_needed</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">RC_DEPTREE</i><br/>
<b class="fname">rc_deptree_load</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">RC_STRINGLIST *</i><br/>
<b class="fname">rc_deptree_depend</b>(<i class="farg">const RC_DEPTREE *deptree</i>, <i class="farg">const char *type</i>, <i class="farg">const char *service</i>);<div class="spacer">
</div>
<i class="ftype">bool</i><br/>
<b class="fname">rc_deptree_depends</b>(<i class="farg">const RC_DEPTREE *deptree</i>, <i class="farg">const char *const *types</i>, <i class="farg">const char *const *services</i>, <i class="farg">const char *runlevel</i>, <i class="farg">int options</i>);<div class="spacer">
</div>
<i class="ftype">RC_STRINGLIST *</i><br/>
<b class="fname">rc_deptree_order</b>(<i class="farg">const RC_DEPTREE *deptree</i>, <i class="farg">const char *runlevel</i>, <i class="farg">int options</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">rc_deptree_free</b>(<i class="farg" style="white-space:nowrap;">RC_DEPTREE *deptree</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions provide a means of querying the dependencies of OpenRC services.<div class="spacer">
</div>
<b class="fname">rc_deptree_update</b>() updates the service dependency tree, normally <i class="file">/lib/rc/init.d/deptree</i>. <b class="fname">rc_deptree_update_needed</b>() checks to see if the dependency tree needs updated based on the mtime of it compared to <i class="file">/etc/init.d</i>, <i class="file">/etc/conf.d</i>, <i class="file">/usr/local/etc/init.d</i>, <i class="file">/usr/local/etc/conf.d</i>, <i class="file">/etc/rc.conf</i> and any files specified by a service.<div class="spacer">
</div>
<b class="fname">rc_deptree_load</b>() loads the deptree and returns a pointer to it which needs to be freed by <b class="fname">rc_deptree_free</b>() when done.<div class="spacer">
</div>
<b class="fname">rc_deptree_depend</b>(), <b class="fname">rc_deptree_depends</b>() and <b class="fname">rc_deptree_order</b>() return a list of services from the <i class="farg">deptree</i> based on the <i class="farg">type</i> or <i class="farg">types</i> of dependency. <i class="farg">options</i> can be a bitmask of <b class="var">RC_DEP_TRACE</b> and <b class="var">RC_DEP_STRICT</b>. <b class="var">RC_DEP_TRACE</b> follows each services dependencies right down to the first service needed and <b class="var">RC_DEP_STRICT</b> only lists services actually needed or in the <b class="var">runlevel</b>.</div>
<div class="section">
<h1 id="x494d504c454d454e544154494f4e204e4f544553">IMPLEMENTATION NOTES</h1> Each function that returns <span class="emph">RC_STRINGLIST *</span> should be freed by calling <b class="fname">rc_stringlist_free</b>() when done.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man">malloc(3)</a>, <a class="link-man">free(3)</a>, <a class="link-man">rc_stringlist_free(3)</a>, <a class="link-man">openrc-run(8)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Roy Marples &lt;roy@marples.name&gt;</span></div>
</div>
</body>
</html>

