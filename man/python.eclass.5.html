<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
PYTHON.ECLASS(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PYTHON.ECLASS(5)</td>
<td class="head-vol">
portage</td>
<td class="head-rtitle">
PYTHON.ECLASS(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> python.eclass - Eclass for Python packages</div>
<div class="section">
<h1>DESCRIPTION</h1> The python eclass contains miscellaneous, useful functions for Python packages.<div style="height: 1.00em;">
&#160;</div>
This eclass is DEPRECATED. Please use python-r1, python-single-r1 or python-any-r1 instead.</div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
<b>python_pkg_setup</b></dt>
<dd>
Perform sanity checks and initialize environment.<div style="height: 1.00em;">
&#160;</div>
This function is exported in EAPI 2 and 3 when PYTHON_USE_WITH or PYTHON_USE_WITH_OR variable is set and always in EAPI &gt;=4. Calling of this function is mandatory in EAPI &gt;=4.</dd>
</dl>
<dl>
<dt>
<b>python_convert_shebangs</b> [-q|--quiet] [-r|--recursive] [-x|--only-executables] [--] &lt;Python_ABI|Python_version&gt; &lt;file|directory&gt; [files|directories]</dt>
<dd>
Convert shebangs in specified files. Directories can be specified only with --recursive option.</dd>
</dl>
<dl>
<dt>
<b>python_clean_py-compile_files</b> [-q|--quiet]</dt>
<dd>
Clean py-compile files to disable byte-compilation.</dd>
</dl>
<dl>
<dt>
<b>python_clean_installation_image</b> [-q|--quiet]</dt>
<dd>
Delete needless files in installation image.<div style="height: 1.00em;">
&#160;</div>
This function can be used only in src_install() phase.</dd>
</dl>
<dl>
<dt>
<b>python_execute_function</b> [--action-message message] [-d|--default-function] [--failure-message message] [-f|--final-ABI] [--nonfatal] [-q|--quiet] [-s|--separate-build-dirs] [--source-dir source_directory] [--] &lt;function&gt; [arguments]</dt>
<dd>
Execute specified function for each value of PYTHON_ABIS, optionally passing additional arguments. The specified function can use PYTHON_ABI and BUILDDIR variables.</dd>
</dl>
<dl>
<dt>
<b>python_copy_sources</b> &lt;directory=&quot;${S}&quot;&gt; [directory]</dt>
<dd>
Copy unpacked sources of current package to separate build directory for each Python ABI.</dd>
</dl>
<dl>
<dt>
<b>python_generate_wrapper_scripts</b> [-E|--respect-EPYTHON] [-f|--force] [-q|--quiet] [--] &lt;file&gt; [files]</dt>
<dd>
Generate wrapper scripts. Existing files are overwritten only with --force option. If --respect-EPYTHON option is specified, then generated wrapper scripts will respect EPYTHON variable at run time.<div style="height: 1.00em;">
&#160;</div>
This function can be used only in src_install() phase.</dd>
</dl>
<dl>
<dt>
<b>python_merge_intermediate_installation_images</b> [-q|--quiet] [--] &lt;intermediate_installation_images_directory&gt;</dt>
<dd>
Merge intermediate installation images into installation image.<div style="height: 1.00em;">
&#160;</div>
This function can be used only in src_install() phase.</dd>
</dl>
<dl>
<dt>
<b>python_set_active_version</b> &lt;Python_ABI|2|3&gt;</dt>
<dd>
Set locally active version of Python. If Python_ABI argument is specified, then version of Python corresponding to Python_ABI is used. If 2 argument is specified, then active version of CPython 2 is used. If 3 argument is specified, then active version of CPython 3 is used.<div style="height: 1.00em;">
&#160;</div>
This function can be used only in pkg_setup() phase.</dd>
</dl>
<dl>
<dt>
<b>python_need_rebuild</b></dt>
<dd>
Mark current package for rebuilding by python-updater after switching of active version of Python.</dd>
</dl>
<dl>
<dt>
<b>PYTHON</b> [-2] [-3] [--ABI] [-a|--absolute-path] [-f|--final-ABI] [--] &lt;Python_ABI=&quot;${PYTHON_ABI}&quot;&gt;</dt>
<dd>
Print filename of Python interpreter for specified Python ABI. If Python_ABI argument is ommitted, then PYTHON_ABI environment variable must be set and is used. If -2 option is specified, then active version of CPython 2 is used. If -3 option is specified, then active version of CPython 3 is used. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used. -2, -3 and --final-ABI options and Python_ABI argument cannot be specified simultaneously. If --ABI option is specified, then only specified Python ABI is printed instead of filename of Python interpreter. If --absolute-path option is specified, then absolute path to Python interpreter is printed. --ABI and --absolute-path options cannot be specified simultaneously.</dd>
</dl>
<dl>
<dt>
<b>python_get_implementation</b> [-f|--final-ABI]</dt>
<dd>
Print name of Python implementation. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_implementational_package</b> [-f|--final-ABI]</dt>
<dd>
Print category, name and slot of package providing Python implementation. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_includedir</b> [-b|--base-path] [-f|--final-ABI]</dt>
<dd>
Print path to Python include directory. If --base-path option is specified, then path not prefixed with &quot;/&quot; is printed. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_libdir</b> [-b|--base-path] [-f|--final-ABI]</dt>
<dd>
Print path to Python standard library directory. If --base-path option is specified, then path not prefixed with &quot;/&quot; is printed. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_sitedir</b> [-b|--base-path] [-f|--final-ABI]</dt>
<dd>
Print path to Python site-packages directory. If --base-path option is specified, then path not prefixed with &quot;/&quot; is printed. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_library</b> [-b|--base-path] [-f|--final-ABI] [-l|--linker-option]</dt>
<dd>
Print path to Python library. If --base-path option is specified, then path not prefixed with &quot;/&quot; is printed. If --linker-option is specified, then &quot;-l${library}&quot; linker option is printed. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_version</b> [-f|--final-ABI] [-l|--language] [--full] [--major] [--minor] [--micro]</dt>
<dd>
Print version of Python implementation. --full, --major, --minor and --micro options cannot be specified simultaneously. If --full, --major, --minor and --micro options are not specified, then &quot;${major_version}.${minor_version}&quot; is printed. If --language option is specified, then version of Python language is printed. --language and --full options cannot be specified simultaneously. --language and --micro options cannot be specified simultaneously. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_get_implementation_and_version</b> [-f|--final-ABI]</dt>
<dd>
Print name and version of Python implementation. If version of Python implementation is not bound to version of Python language, then version of Python language is additionally printed. If --final-ABI option is specified, then final ABI from the list of enabled ABIs is used.</dd>
</dl>
<dl>
<dt>
<b>python_execute_nosetests</b> [-P|--PYTHONPATH PYTHONPATH] [-s|--separate-build-dirs] [--] [arguments]</dt>
<dd>
Execute nosetests for all enabled Python ABIs. In ebuilds of packages supporting installation for multiple Python ABIs, this function calls python_execute_nosetests_pre_hook() and python_execute_nosetests_post_hook(), if they are defined.</dd>
</dl>
<dl>
<dt>
<b>python_execute_py.test</b> [-P|--PYTHONPATH PYTHONPATH] [-s|--separate-build-dirs] [--] [arguments]</dt>
<dd>
Execute py.test for all enabled Python ABIs. In ebuilds of packages supporting installation for multiple Python ABIs, this function calls python_execute_py.test_pre_hook() and python_execute_py.test_post_hook(), if they are defined.</dd>
</dl>
<dl>
<dt>
<b>python_execute_trial</b> [-P|--PYTHONPATH PYTHONPATH] [-s|--separate-build-dirs] [--] [arguments]</dt>
<dd>
Execute trial for all enabled Python ABIs. In ebuilds of packages supporting installation for multiple Python ABIs, this function calls python_execute_trial_pre_hook() and python_execute_trial_post_hook(), if they are defined.</dd>
</dl>
<dl>
<dt>
<b>python_enable_pyc</b></dt>
<dd>
Tell Python to automatically recompile modules to .pyc/.pyo if the timestamps/version stamps have changed.</dd>
</dl>
<dl>
<dt>
<b>python_disable_pyc</b></dt>
<dd>
Tell Python not to automatically recompile modules to .pyc/.pyo even if the timestamps/version stamps do not match. This is done to protect sandbox.</dd>
</dl>
<dl>
<dt>
<b>python_mod_optimize</b> [--allow-evaluated-non-sitedir-paths] [-d directory] [-f] [-l] [-q] [-x regular_expression] [--] &lt;file|directory&gt; [files|directories]</dt>
<dd>
Byte-compile specified Python modules. -d, -f, -l, -q and -x options passed to this function are passed to compileall.py.<div style="height: 1.00em;">
&#160;</div>
This function can be used only in pkg_postinst() phase.</dd>
</dl>
<dl>
<dt>
<b>python_mod_cleanup</b> [--allow-evaluated-non-sitedir-paths] [--] &lt;file|directory&gt; [files|directories]</dt>
<dd>
Delete orphaned byte-compiled Python modules corresponding to specified Python modules.<div style="height: 1.00em;">
&#160;</div>
This function can be used only in pkg_postrm() phase.</dd>
</dl>
</div>
<div class="section">
<h1>ECLASS VARIABLES</h1><dl>
<dt>
<b>PYTHON_DEPEND</b></dt>
<dd>
Specification of dependency on dev-lang/python. Syntax:<br/>
  PYTHON_DEPEND:             [[!]USE_flag? ]&lt;version_components_group&gt;[ version_components_group]<br/>
  version_components_group:  &lt;major_version[:[minimal_version][:maximal_version]]&gt;<br/>
  major_version:             &lt;2|3|*&gt;<br/>
  minimal_version:           &lt;minimal_major_version.minimal_minor_version&gt;<br/>
  maximal_version:           &lt;maximal_major_version.maximal_minor_version&gt;</dd>
</dl>
<dl>
<dt>
<b>PYTHON_USE_WITH</b></dt>
<dd>
Set this to a space separated list of USE flags the Python slot in use must be built with.</dd>
</dl>
<dl>
<dt>
<b>PYTHON_USE_WITH_OR</b></dt>
<dd>
Set this to a space separated list of USE flags of which one must be turned on for the slot in use.</dd>
</dl>
<dl>
<dt>
<b>PYTHON_USE_WITH_OPT</b></dt>
<dd>
Set this to a name of a USE flag if you need to make either PYTHON_USE_WITH or PYTHON_USE_WITH_OR atoms conditional under a USE flag.</dd>
</dl>
<dl>
<dt>
<b>PYTHON_COLORS</b> = <i>&quot;${PYTHON_COLORS:-0}&quot;</i></dt>
<dd>
User-configurable colored output.</dd>
</dl>
<dl>
<dt>
<b>SUPPORT_PYTHON_ABIS</b></dt>
<dd>
Set this in EAPI &lt;= 4 to indicate that current package supports installation for multiple Python ABIs.</dd>
</dl>
<dl>
<dt>
<b>PYTHON_TESTS_RESTRICTED_ABIS</b></dt>
<dd>
Space-separated list of Python ABI patterns. Testing in Python ABIs matching any Python ABI patterns specified in this list is skipped.</dd>
</dl>
<dl>
<dt>
<b>PYTHON_EXPORT_PHASE_FUNCTIONS</b></dt>
<dd>
Set this to export phase functions for the following ebuild phases: src_prepare(), src_configure(), src_compile(), src_test(), src_install().</dd>
</dl>
<dl>
<dt>
<b>PYTHON_VERSIONED_SCRIPTS</b></dt>
<dd>
Array of regular expressions of paths to versioned Python scripts. Python scripts in /usr/bin and /usr/sbin are versioned by default.</dd>
</dl>
<dl>
<dt>
<b>PYTHON_VERSIONED_EXECUTABLES</b></dt>
<dd>
Array of regular expressions of paths to versioned executables (including Python scripts).</dd>
</dl>
<dl>
<dt>
<b>PYTHON_NONVERSIONED_EXECUTABLES</b></dt>
<dd>
Array of regular expressions of paths to nonversioned executables (including Python scripts).</dd>
</dl>
<dl>
<dt>
<b>PYTHON_TEST_VERBOSITY</b> = <i>&quot;${PYTHON_TEST_VERBOSITY:-1}&quot;</i></dt>
<dd>
User-configurable verbosity of tests of Python modules. Supported values: 0, 1, 2, 3, 4.</dd>
</dl>
</div>
<div class="section">
<h1>MAINTAINERS</h1><br/>
Gentoo Python Project &lt;python@gentoo.org&gt;<br/>
</div>
<div class="section">
<h1>REPORTING BUGS</h1> Please report bugs via http://bugs.gentoo.org/</div>
<div class="section">
<h1>FILES</h1> <b>/usr/portage/eclass/python.eclass</b></div>
<div class="section">
<h1>SEE ALSO</h1> <b>ebuild</b>(5)<br/>
https://gitweb.gentoo.org/repo/gentoo.git/log/eclass/python.eclass<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
Aug 2015</td>
<td class="foot-os">
Portage</td>
</tr>
</table>
</div>
</body>
</html>

