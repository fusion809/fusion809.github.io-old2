<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
MYISAMCHK(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
MYISAMCHK(1)</td>
<td class="head-vol">
MariaDB Database System</td>
<td class="head-rtitle">
MYISAMCHK(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> myisamchk - MyISAM table-maintenance utility</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 36.00ex;text-indent: -36.00ex;" class="spacer">
<b>myisamchk [</b><b></b><i>options</i><b>] </b><b></b><i>tbl_name</i><b> ...</b></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <b>myisamchk</b> utility gets information about your database tables or checks, repairs, or optimizes them.  <b>myisamchk</b> works with MyISAM tables (tables that have .MYD and .MYI files for storing data and indexes).<div class="spacer">
</div>
The use of  <b>myisamchk</b> with partitioned tables is not supported.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Caution</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
<div class="spacer">
</div>
It is best to make a backup of a table before performing a table repair operation; under some circumstances the operation might cause data loss. Possible causes include but are not limited to file system errors.<div style="height: 0.50em;">
&#160;</div>
</div>
<div class="spacer">
</div>
Invoke  <b>myisamchk</b> like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk [</b><b></b><i>options</i><b>] </b><b></b><i>tbl_name</i><b> ...</b><br/>
</div>
<div class="spacer">
</div>
The  <i>options</i> specify what you want  <b>myisamchk</b> to do. They are described in the following sections. You can also get a list of options by invoking  <b>myisamchk --help</b>.<div class="spacer">
</div>
With no options,  <b>myisamchk</b> simply checks your table as the default operation. To get more information or to tell  <b>myisamchk</b> to take corrective action, specify options as described in the following discussion.<div class="spacer">
</div>
<i>tbl_name</i> is the database table you want to check or repair. If you run  <b>myisamchk</b> somewhere other than in the database directory, you must specify the path to the database directory, because  <b>myisamchk</b> has no idea where the database is located. In fact,  <b>myisamchk</b> does not actually care whether the files you are working on are located in a database directory. You can copy the files that correspond to a database table into some other location and perform recovery operations on them there.<div class="spacer">
</div>
You can name several tables on the  <b>myisamchk</b> command line if you wish. You can also specify a table by naming its index file (the file with the .MYI suffix). This allows you to specify all tables in a directory by using the pattern *.MYI. For example, if you are in a database directory, you can check all the MyISAM tables in that directory like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk *.MYI</b><br/>
</div>
<div class="spacer">
</div>
If you are not in the database directory, you can check all the tables there by specifying the path to the directory:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk </b><b></b><i>/path/to/database_dir/</i><b>*.MYI</b><br/>
</div>
<div class="spacer">
</div>
You can even check all tables in all databases by specifying a wildcard with the path to the MariaDB data directory:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk </b><b></b><i>/path/to/datadir/*/*</i><b>.MYI</b><br/>
</div>
<div class="spacer">
</div>
The recommended way to quickly check all MyISAM tables is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk --silent --fast </b><b></b><i>/path/to/datadir/*/*</i><b>.MYI</b><br/>
</div>
<div class="spacer">
</div>
If you want to check all MyISAM tables and repair any that are corrupted, you can use the following command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk --silent --force --fast --update-state \</b><br/>
          <b>--key_buffer_size=64M --sort_buffer_size=64M \</b><br/>
          <b>--read_buffer_size=1M --write_buffer_size=1M \</b><br/>
          <b></b><i>/path/to/datadir/*/*</i><b>.MYI</b><br/>
</div>
<div class="spacer">
</div>
This command assumes that you have more than 64MB free. For more information about memory allocation with  <b>myisamchk</b>, see the section called &#8220;MYISAMCHK MEMORY USAGE&#8221;.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Important</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
<div class="spacer">
</div>
<i>You must ensure that no other program is using the tables while you are running </i><i></i><b>myisamchk</b>. The most effective means of doing so is to shut down the MariaDB server while running  <b>myisamchk</b>, or to lock all tables that  <b>myisamchk</b> is being used on.<div class="spacer">
</div>
Otherwise, when you run  <b>myisamchk</b>, it may display the following error message:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
warning: clients are using or haven&#180;t closed the table properly<br/>
</div>
<div class="spacer">
</div>
This means that you are trying to check a table that has been updated by another program (such as the  <b>mysqld</b> server) that hasn&#180;t yet closed the file or that has died without closing the file properly, which can sometimes lead to the corruption of one or more MyISAM tables.<div class="spacer">
</div>
If  <b>mysqld</b> is running, you must force it to flush any table modifications that are still buffered in memory by using FLUSH TABLES. You should then ensure that no one is using the tables while you are running  <b>myisamchk</b><div class="spacer">
</div>
However, the easiest way to avoid this problem is to use CHECK TABLE instead of  <b>myisamchk</b> to check tables.<div style="height: 0.50em;">
&#160;</div>
</div>
<div class="spacer">
</div>
<b>myisamchk</b> supports the following options, which can be specified on the command line or in the [myisamchk] option file group.</div>
<div class="section">
<h1>MYISAMCHK GENERAL OPTIONS</h1> The options described in this section can be used for any type of table maintenance operation performed by  <b>myisamchk</b>. The sections following this one describe options that pertain only to specific operations, such as table checking or repairing.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--help</b>,  <b>-?</b><div style="height: 1.00em;">
&#160;</div>
Display a help message and exit. Options are grouped by type of operation.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--HELP</b>,  <b>-H</b><div style="height: 1.00em;">
&#160;</div>
Display a help message and exit. Options are presented in a single list.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--debug=</b><b></b><i>debug_options</i>,  <b>-# </b><b></b><i>debug_options</i><div style="height: 1.00em;">
&#160;</div>
Write a debugging log. A typical  <i>debug_options</i> string is &#180;d:t:o, <i>file_name</i>&#180;. The default is &#180;d:t:o,/tmp/myisamchk.trace&#180;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--silent</b>,  <b>-s</b><div style="height: 1.00em;">
&#160;</div>
Silent mode. Write output only when errors occur. You can use  <b>-s</b> twice ( <b>-ss</b>) to make  <b>myisamchk</b> very silent.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--verbose</b>,  <b>-v</b><div style="height: 1.00em;">
&#160;</div>
Verbose mode. Print more information about what the program does. This can be used with  <b>-d</b> and  <b>-e</b>. Use  <b>-v</b> multiple times ( <b>-vv</b>,  <b>-vvv</b>) for even more output.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--version</b>,  <b>-V</b><div style="height: 1.00em;">
&#160;</div>
Display version information and exit.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--wait</b>,  <b>-w</b><div style="height: 1.00em;">
&#160;</div>
Instead of terminating with an error if the table is locked, wait until the table is unlocked before continuing. If you are running  <b>mysqld</b> with external locking disabled, the table can be locked only by another  <b>myisamchk</b> command.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--print-defaults</b><div style="height: 1.00em;">
&#160;</div>
Print the program argument list and exit.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--no-defaults</b><div style="height: 1.00em;">
&#160;</div>
Don't read default options from any option file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--defaults-file=#</b><div style="height: 1.00em;">
&#160;</div>
Only read default options from the given file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--defaults-extra-file=#</b><div style="height: 1.00em;">
&#160;</div>
Read this file after the global files are read.</div>
<div class="spacer">
</div>
You can also set the following variables by using  <b>--</b><b></b><i>var_name</i><b>=</b><b></b><i>value</i> syntax:<table class="tbl">
<col style="width: 20.00ex;"/>
<col style="width: 19.00ex;"/>
<tbody>
<tr>
<td>
<b>Variable</b></td>
<td>
<b>Default Value</b></td>
</tr>
<tr>
<td>
decode_bits</td>
<td>
9</td>
</tr>
<tr>
<td>
ft_max_word_len</td>
<td>
version-dependent</td>
</tr>
<tr>
<td>
ft_min_word_len</td>
<td>
4</td>
</tr>
<tr>
<td>
ft_stopword_file</td>
<td>
built-in list</td>
</tr>
<tr>
<td>
key_buffer_size</td>
<td>
523264</td>
</tr>
<tr>
<td>
key_cache_block_size</td>
<td>
1024</td>
</tr>
<tr>
<td>
myisam_block_size</td>
<td>
1024</td>
</tr>
<tr>
<td>
read_buffer_size</td>
<td>
262136</td>
</tr>
<tr>
<td>
sort_buffer_size</td>
<td>
2097144</td>
</tr>
<tr>
<td>
sort_key_blocks</td>
<td>
16</td>
</tr>
<tr>
<td>
stats_method</td>
<td>
nulls_unequal</td>
</tr>
<tr>
<td>
write_buffer_size</td>
<td>
262136</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The possible  <b>myisamchk</b> variables and their default values can be examined with  <b>myisamchk --help</b>:<div class="spacer">
</div>
sort_buffer_size is used when the keys are repaired by sorting keys, which is the normal case when you use  <b>--recover</b>.<div class="spacer">
</div>
key_buffer_size is used when you are checking the table with  <b>--extend-check</b> or when the keys are repaired by inserting keys row by row into the table (like when doing normal inserts). Repairing through the key buffer is used in the following cases:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;You use  <b>--safe-recover</b>.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The temporary files needed to sort the keys would be more than twice as big as when creating the key file directly. This is often the case when you have large key values for CHAR, VARCHAR, or TEXT columns, because the sort operation needs to store the complete key values as it proceeds. If you have lots of temporary space and you can force  <b>myisamchk</b> to repair by sorting, you can use the  <b>--sort-recover</b> option.</div>
<div class="spacer">
</div>
Repairing through the key buffer takes much less disk space than using sorting, but is also much slower.<div class="spacer">
</div>
If you want a faster repair, set the key_buffer_size and sort_buffer_size variables to about 25% of your available memory. You can set both variables to large values, because only one of them is used at a time.<div class="spacer">
</div>
myisam_block_size is the size used for index blocks.<div class="spacer">
</div>
stats_method influences how NULL values are treated for index statistics collection when the  <b>--analyze</b> option is given. It acts like the myisam_stats_method system variable. For more information, see the description of myisam_stats_method in Section&#160;5.1.4, &#8220;Server System Variables&#8221;, and Section&#160;7.4.7, &#8220;MyISAM Index Statistics Collection&#8221;.<div class="spacer">
</div>
ft_min_word_len and ft_max_word_len indicate the minimum and maximum word length for FULLTEXT indexes. ft_stopword_file names the stopword file. These need to be set under the following circumstances.<div class="spacer">
</div>
If you use  <b>myisamchk</b> to perform an operation that modifies table indexes (such as repair or analyze), the FULLTEXT indexes are rebuilt using the default full-text parameter values for minimum and maximum word length and the stopword file unless you specify otherwise. This can result in queries failing.<div class="spacer">
</div>
The problem occurs because these parameters are known only by the server. They are not stored in MyISAM index files. To avoid the problem if you have modified the minimum or maximum word length or the stopword file in the server, specify the same ft_min_word_len, ft_max_word_len, and ft_stopword_file values to  <b>myisamchk</b> that you use for  <b>mysqld</b>. For example, if you have set the minimum word length to 3, you can repair a table with  <b>myisamchk</b> like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk --recover --ft_min_word_len=3 </b><b></b><i>tbl_name</i><b>.MYI</b><br/>
</div>
<div class="spacer">
</div>
To ensure that  <b>myisamchk</b> and the server use the same values for full-text parameters, you can place each one in both the [mysqld] and [myisamchk] sections of an option file:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
[mysqld]<br/>
ft_min_word_len=3<br/>
[myisamchk]<br/>
ft_min_word_len=3<br/>
</div>
<div class="spacer">
</div>
An alternative to using  <b>myisamchk</b> is to use the REPAIR TABLE, ANALYZE TABLE, OPTIMIZE TABLE, or ALTER TABLE. These statements are performed by the server, which knows the proper full-text parameter values to use.</div>
<div class="section">
<h1>MYISAMCHK CHECK OPTIONS</h1>  <b>myisamchk</b> supports the following options for table checking operations:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--check</b>,  <b>-c</b><div style="height: 1.00em;">
&#160;</div>
Check the table for errors. This is the default operation if you specify no option that selects an operation type explicitly.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--check-only-changed</b>,  <b>-C</b><div style="height: 1.00em;">
&#160;</div>
Check only tables that have changed since the last check.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--extend-check</b>,  <b>-e</b><div style="height: 1.00em;">
&#160;</div>
Check the table very thoroughly. This is quite slow if the table has many indexes. This option should only be used in extreme cases. Normally,  <b>myisamchk</b> or  <b>myisamchk --medium-check</b> should be able to determine whether there are any errors in the table.<div style="height: 1.00em;">
&#160;</div>
If you are using  <b>--extend-check</b> and have plenty of memory, setting the key_buffer_size variable to a large value helps the repair operation run faster.<div style="height: 1.00em;">
&#160;</div>
For a description of the output format, see the section called &#8220;MYISAMCHK TABLE INFORMATION&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--fast</b>,  <b>-F</b><div style="height: 1.00em;">
&#160;</div>
Check only tables that haven&#180;t been closed properly.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--force</b>,  <b>-f</b><div style="height: 1.00em;">
&#160;</div>
Do a repair operation automatically if  <b>myisamchk</b> finds any errors in the table. The repair type is the same as that specified with the  <b>--recover</b> or  <b>-r</b> option. States will be updated as with  <b>--update-state</b>.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--information</b>,  <b>-i</b><div style="height: 1.00em;">
&#160;</div>
Print informational statistics about the table that is checked.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--medium-check</b>,  <b>-m</b><div style="height: 1.00em;">
&#160;</div>
Do a check that is faster than an  <b>--extend-check</b> operation. This finds only 99.99% of all errors, which should be good enough in most cases.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--read-only</b>,  <b>-T</b><div style="height: 1.00em;">
&#160;</div>
Do not mark the table as checked. This is useful if you use  <b>myisamchk</b> to check a table that is in use by some other application that does not use locking, such as  <b>mysqld</b> when run with external locking disabled.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--update-state</b>,  <b>-U</b><div style="height: 1.00em;">
&#160;</div>
Store information in the .MYI file to indicate when the table was checked and whether the table crashed. This should be used to get full benefit of the  <b>--check-only-changed</b> option, but you shouldn&#180;t use this option if the  <b>mysqld</b> server is using the table and you are running it with external locking disabled.</div>
</div>
<div class="section">
<h1>MYISAMCHK REPAIR OPTIONS</h1>  <b>myisamchk</b> supports the following options for table repair operations (operations performed when an option such as  <b>--recover</b> or  <b>--safe-recover</b> is given):<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--backup</b>,  <b>-B</b><div style="height: 1.00em;">
&#160;</div>
Make a backup of the .MYD file as  <i>file_name</i>-<i>time</i>.BAK</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--character-sets-dir=</b><b></b><i>path</i><div style="height: 1.00em;">
&#160;</div>
The directory where character sets are installed.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--correct-checksum</b><div style="height: 1.00em;">
&#160;</div>
Correct the checksum information for the table.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--create-missing-keys</b><div style="height: 1.00em;">
&#160;</div>
Create missing keys. This assumes that the data file is correct and that the number of rows stored in the index file is correct. Enables  <b>--quick</b>.<div style="height: 1.00em;">
&#160;</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--data-file-length=</b><b></b><i>len</i>,  <b>-D </b><b></b><i>len</i><div style="height: 1.00em;">
&#160;</div>
The maximum length of the data file (when re-creating data file when it is &#8220;full&#8221;).</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--extend-check</b>,  <b>-e</b><div style="height: 1.00em;">
&#160;</div>
Do a repair that tries to recover every possible row from the data file. Normally, this also finds a lot of garbage rows. Do not use this option unless you are desperate.<div style="height: 1.00em;">
&#160;</div>
For a description of the output format, see the section called &#8220;MYISAMCHK TABLE INFORMATION&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--force</b>,  <b>-f</b><div style="height: 1.00em;">
&#160;</div>
Overwrite old intermediate files (files with names like  <i>tbl_name</i>.TMD) instead of aborting. Add another  <b>--force</b> to avoid 'myisam_sort_buffer_size is too small' errors. In this case we will attempt to do the repair with the given  <b>myisam_sort_buffer_size</b> and dynamically allocate as many management buffers as needed.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--keys-used=</b><b></b><i>val</i>,  <b>-k </b><b></b><i>val</i><div style="height: 1.00em;">
&#160;</div>
For  <b>myisamchk</b>, the option value is a bit-value that indicates which indexes to update. Each binary bit of the option value corresponds to a table index, where the first index is bit 0. An option value of 0 disables updates to all indexes, which can be used to get faster inserts. Deactivated indexes can be reactivated by using  <b>myisamchk -r</b>.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--max-record-length=</b><b></b><i>len</i><div style="height: 1.00em;">
&#160;</div>
Skip rows larger than the given length if  <b>myisamchk</b> cannot allocate memory to hold them.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--parallel-recover</b>,  <b>-p</b><div style="height: 1.00em;">
&#160;</div>
Use the same technique as  <b>-r</b> and  <b>-n</b>, but create all the keys in parallel, using different threads.  <i>This is beta-quality code. Use at your own risk!</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--quick</b>,  <b>-q</b><div style="height: 1.00em;">
&#160;</div>
Achieve a faster repair by modifying only the index file, not the data file. You can specify this option twice to force  <b>myisamchk</b> to modify the original data file in case of duplicate keys. NOTE: Tables where the data file is corrupted can't be fixed with this option.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--recover</b>,  <b>-r</b><div style="height: 1.00em;">
&#160;</div>
Do a repair that can fix almost any problem except unique keys that are not unique (which is an extremely unlikely error with MyISAM tables). If you want to recover a table, this is the option to try first. You should try  <b>--safe-recover</b> only if  <b>myisamchk</b> reports that the table cannot be recovered using  <b>--recover</b>. (In the unlikely case that  <b>--recover</b> fails, the data file remains intact.)<div style="height: 1.00em;">
&#160;</div>
If you have lots of memory, you should increase the value of sort_buffer_size.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--safe-recover</b>,  <b>-o</b><div style="height: 1.00em;">
&#160;</div>
Do a repair using an old recovery method that reads through all rows in order and updates all index trees based on the rows found. This is an order of magnitude slower than  <b>--recover</b>, but can handle a couple of very unlikely cases that  <b>--recover</b> cannot. This recovery method also uses much less disk space than  <b>--recover</b>. Normally, you should repair first using  <b>--recover</b>, and then with  <b>--safe-recover</b> only if  <b>--recover</b> fails.<div style="height: 1.00em;">
&#160;</div>
If you have lots of memory, you should increase the value of key_buffer_size.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--set-collation=</b><b></b><i>name</i><div style="height: 1.00em;">
&#160;</div>
Specify the collation to use for sorting table indexes. The character set name is implied by the first part of the collation name.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--sort-recover</b>,  <b>-n</b><div style="height: 1.00em;">
&#160;</div>
Force  <b>myisamchk</b> to use sorting to resolve the keys even if the temporary files would be very large.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--tmpdir=</b><b></b><i>path</i>,  <b>-t </b><b></b><i>path</i><div style="height: 1.00em;">
&#160;</div>
The path of the directory to be used for storing temporary files. If this is not set,  <b>myisamchk</b> uses the value of the TMPDIR environment variable. tmpdir can be set to a list of directory paths that are used successively in round-robin fashion for creating temporary files. The separator character between directory names is the colon (&#8220;:&#8221;) on Unix and the semicolon (&#8220;;&#8221;) on Windows, NetWare, and OS/2.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--unpack</b>,  <b>-u</b><div style="height: 1.00em;">
&#160;</div>
Unpack a table that was packed with  <b>myisampack</b>.</div>
</div>
<div class="section">
<h1>OTHER MYISAMCHK OPTIONS</h1>  <b>myisamchk</b> supports the following options for actions other than table checks and repairs:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--analyze</b>,  <b>-a</b><div style="height: 1.00em;">
&#160;</div>
Analyze the distribution of key values. This improves join performance by enabling the join optimizer to better choose the order in which to join the tables and which indexes it should use. To obtain information about the key distribution, use a  <b>myisamchk --description --verbose </b><b></b><i>tbl_name</i> command or the SHOW INDEX FROM  <i>tbl_name</i> statement.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--block-search=</b><b></b><i>offset</i>,  <b>-b </b><b></b><i>offset</i><div style="height: 1.00em;">
&#160;</div>
Find the record that a block at the given offset belongs to.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--description</b>,  <b>-d</b><div style="height: 1.00em;">
&#160;</div>
Print some descriptive information about the table. Specifying the  <b>--verbose</b> option once or twice produces additional information. See the section called &#8220;MYISAMCHK TABLE INFORMATION&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--set-auto-increment[=</b><b></b><i>value</i><b>]</b>,  <b>-A[</b><b></b><i>value</i><b>]</b><div style="height: 1.00em;">
&#160;</div>
Force AUTO_INCREMENT numbering for new records to start at the given value (or higher, if there are existing records with AUTO_INCREMENT values this large). If  <i>value</i> is not specified, AUTO_INCREMENT numbers for new records begin with the largest value currently in the table, plus one.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--sort-index</b>,  <b>-S</b><div style="height: 1.00em;">
&#160;</div>
Sort the index tree blocks in high-low order. This optimizes seeks and makes table scans that use indexes faster.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--sort-records=</b><b></b><i>N</i>,  <b>-R </b><b></b><i>N</i><div style="height: 1.00em;">
&#160;</div>
Sort records according to a particular index. This makes your data much more localized and may speed up range-based SELECT and ORDER BY operations that use this index. (The first time you use this option to sort a table, it may be very slow.) To determine a table&#180;s index numbers, use SHOW INDEX, which displays a table&#180;s indexes in the same order that  <b>myisamchk</b> sees them. Indexes are numbered beginning with 1.<div style="height: 1.00em;">
&#160;</div>
If keys are not packed (PACK_KEYS=0), they have the same length, so when  <b>myisamchk</b> sorts and moves records, it just overwrites record offsets in the index. If keys are packed (PACK_KEYS=1),  <b>myisamchk</b> must unpack key blocks first, then re-create indexes and pack the key blocks again. (In this case, re-creating indexes is faster than updating offsets for each index.)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>--stats-method=name</b><div style="height: 1.00em;">
&#160;</div>
Specifies how index statistics collection code should treat NULLs. Possible values of name are &quot;nulls_unequal&quot; (default), &quot;nulls_equal&quot; (emulate MySQL 4 behavior), and &quot;nulls_ignored&quot;.</div>
</div>
<div class="section">
<h1>MYISAMCHK TABLE INFORMATION</h1> To obtain a description of a MyISAM table or statistics about it, use the commands shown here. The output from these commands is explained later in this section.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>myisamchk -d </b><b></b><i>tbl_name</i><div style="height: 1.00em;">
&#160;</div>
Runs  <b>myisamchk</b> in &#8220;describe mode&#8221; to produce a description of your table. If you start the MariaDB server with external locking disabled,  <b>myisamchk</b> may report an error for a table that is updated while it runs. However, because  <b>myisamchk</b> does not change the table in describe mode, there is no risk of destroying data.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>myisamchk -dv </b><b></b><i>tbl_name</i><div style="height: 1.00em;">
&#160;</div>
Adding  <b>-v</b> runs  <b>myisamchk</b> in verbose mode so that it produces more information about the table. Adding  <b>-v</b> a second time produces even more information.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>myisamchk -eis </b><b></b><i>tbl_name</i><div style="height: 1.00em;">
&#160;</div>
Shows only the most important information from a table. This operation is slow because it must read the entire table.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>myisamchk -eiv </b><b></b><i>tbl_name</i><div style="height: 1.00em;">
&#160;</div>
This is like  <b>-eis</b>, but tells you what is being done.</div>
<div class="spacer">
</div>
The  <i>tbl_name</i> argument can be either the name of a MyISAM table or the name of its index file, as described in  <b>myisamchk</b>(1). Multiple  <i>tbl_name</i> arguments can be given.<div class="spacer">
</div>
Suppose that a table named person has the following structure. (The MAX_ROWS table option is included so that in the example output from  <b>myisamchk</b> shown later, some values are smaller and fit the output format more easily.)<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
CREATE TABLE person<br/>
(<br/>
  id         INT NOT NULL AUTO_INCREMENT,<br/>
  last_name  VARCHAR(20) NOT NULL,<br/>
  first_name VARCHAR(20) NOT NULL,<br/>
  birth      DATE,<br/>
  death      DATE,<br/>
  PRIMARY KEY (id),<br/>
  INDEX (last_name, first_name),<br/>
  INDEX (birth)<br/>
) MAX_ROWS = 1000000;<br/>
</div>
<div class="spacer">
</div>
Suppose also that the table has these data and index file sizes:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
-rw-rw----  1 mysql  mysql  9347072 Aug 19 11:47 person.MYD<br/>
-rw-rw----  1 mysql  mysql  6066176 Aug 19 11:47 person.MYI<br/>
</div>
<div class="spacer">
</div>
Example of  <b>myisamchk -dvv</b> output:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
MyISAM file:         person<br/>
Record format:       Packed<br/>
Character set:       latin1_swedish_ci (8)<br/>
File-version:        1<br/>
Creation time:       2009-08-19 16:47:41<br/>
Recover time:        2009-08-19 16:47:56<br/>
Status:              checked,analyzed,optimized keys<br/>
Auto increment key:              1  Last value:                306688<br/>
Data records:               306688  Deleted blocks:                 0<br/>
Datafile parts:             306688  Deleted data:                   0<br/>
Datafile pointer (bytes):        4  Keyfile pointer (bytes):        3<br/>
Datafile length:           9347072  Keyfile length:           6066176<br/>
Max datafile length:    4294967294  Max keyfile length:   17179868159<br/>
Recordlength:                   54<br/>
table description:<br/>
Key Start Len Index   Type                 Rec/key         Root  Blocksize<br/>
1   2     4   unique  long                       1        99328       1024<br/>
2   6     20  multip. varchar prefix           512      3563520       1024<br/>
    27    20          varchar                  512<br/>
3   48    3   multip. uint24 NULL           306688      6065152       1024<br/>
Field Start Length Nullpos Nullbit Type<br/>
1     1     1<br/>
2     2     4                      no zeros<br/>
3     6     21                     varchar<br/>
4     27    21                     varchar<br/>
5     48    3      1       1       no zeros<br/>
6     51    3      1       2       no zeros<br/>
</div>
<div class="spacer">
</div>
Explanations for the types of information  <b>myisamchk</b> produces are given here. &#8220;Keyfile&#8221; refers to the index file. &#8220;Record&#8221; and &#8220;row&#8221; are synonymous, as are &#8220;field&#8221; and &#8220;column.&#8221;<div class="spacer">
</div>
The initial part of the table description contains these values:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;MyISAM file<div style="height: 1.00em;">
&#160;</div>
Name of the MyISAM (index) file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Record format<div style="height: 1.00em;">
&#160;</div>
The format used to store table rows. The preceding examples use Fixed length. Other possible values are Compressed and Packed. (Packed corresponds to what SHOW TABLE STATUS reports as Dynamic.)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Chararacter set<div style="height: 1.00em;">
&#160;</div>
The table default character set.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;File-version<div style="height: 1.00em;">
&#160;</div>
Version of MyISAM format. Currently always 1.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Creation time<div style="height: 1.00em;">
&#160;</div>
When the data file was created.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Recover time<div style="height: 1.00em;">
&#160;</div>
When the index/data file was last reconstructed.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Status<div style="height: 1.00em;">
&#160;</div>
Table status flags. Possible values are crashed, open, changed, analyzed, optimized keys, and sorted index pages.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Auto increment key, Last value<div style="height: 1.00em;">
&#160;</div>
The key number associated the table&#180;s AUTO_INCREMENT column, and the most recently generated value for this column. These fields do not appear if there is no such column.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Data records<div style="height: 1.00em;">
&#160;</div>
The number of rows in the table.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Deleted blocks<div style="height: 1.00em;">
&#160;</div>
How many deleted blocks still have reserved space. You can optimize your table to minimize this space. See Section&#160;6.6.4, &#8220;MyISAM Table Optimization&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Datafile parts<div style="height: 1.00em;">
&#160;</div>
For dynamic-row format, this indicates how many data blocks there are. For an optimized table without fragmented rows, this is the same as Data records.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Deleted data<div style="height: 1.00em;">
&#160;</div>
How many bytes of unreclaimed deleted data there are. You can optimize your table to minimize this space. See Section&#160;6.6.4, &#8220;MyISAM Table Optimization&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Datafile pointer<div style="height: 1.00em;">
&#160;</div>
The size of the data file pointer, in bytes. It is usually 2, 3, 4, or 5 bytes. Most tables manage with 2 bytes, but this cannot be controlled from MariaDB yet. For fixed tables, this is a row address. For dynamic tables, this is a byte address.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Keyfile pointer<div style="height: 1.00em;">
&#160;</div>
The size of the index file pointer, in bytes. It is usually 1, 2, or 3 bytes. Most tables manage with 2 bytes, but this is calculated automatically by MariaDB. It is always a block address.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Max datafile length<div style="height: 1.00em;">
&#160;</div>
How long the table data file can become, in bytes.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Max keyfile length<div style="height: 1.00em;">
&#160;</div>
How long the table index file can become, in bytes.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Recordlength<div style="height: 1.00em;">
&#160;</div>
How much space each row takes, in bytes.</div>
<div class="spacer">
</div>
The table description part of the output includes a list of all keys in the table. For each key,  <b>myisamchk</b> displays some low-level information:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Key<div style="height: 1.00em;">
&#160;</div>
This key&#180;s number. This value is shown only for the first column of the key. If this value is missing, the line corresponds to the second or later column of a multiple-column key. For the table shown in the example, there are two table description lines for the second index. This indicates that it is a multiple-part index with two parts.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Start<div style="height: 1.00em;">
&#160;</div>
Where in the row this portion of the index starts.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Len<div style="height: 1.00em;">
&#160;</div>
How long this portion of the index is. For packed numbers, this should always be the full length of the column. For strings, it may be shorter than the full length of the indexed column, because you can index a prefix of a string column. The total length of a multiple-part key is the sum of the Len values for all key parts.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Index<div style="height: 1.00em;">
&#160;</div>
Whether a key value can exist multiple times in the index. Possible values are unique or multip. (multiple).</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Type<div style="height: 1.00em;">
&#160;</div>
What data type this portion of the index has. This is a MyISAM data type with the possible values packed, stripped, or empty.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Root<div style="height: 1.00em;">
&#160;</div>
Address of the root index block.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Blocksize<div style="height: 1.00em;">
&#160;</div>
The size of each index block. By default this is 1024, but the value may be changed at compile time when MariaDB is built from source.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Rec/key<div style="height: 1.00em;">
&#160;</div>
This is a statistical value used by the optimizer. It tells how many rows there are per value for this index. A unique index always has a value of 1. This may be updated after a table is loaded (or greatly changed) with  <b>myisamchk -a</b>. If this is not updated at all, a default value of 30 is given.</div>
<div class="spacer">
</div>
The last part of the output provides information about each column:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Field<div style="height: 1.00em;">
&#160;</div>
The column number.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Start<div style="height: 1.00em;">
&#160;</div>
The byte position of the column within table rows.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Length<div style="height: 1.00em;">
&#160;</div>
The length of the column in bytes.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Nullpos, Nullbit<div style="height: 1.00em;">
&#160;</div>
For columns that can be NULL, MyISAM stores NULL values as a flag in a byte. Depending on how many nullable columns there are, there can be one or more bytes used for this purpose. The Nullpos and Nullbit values, if nonempty, indicate which byte and bit contains that flag indicating whether the column is NULL.<div style="height: 1.00em;">
&#160;</div>
The position and number of bytes used to store NULL flags is shown in the line for field 1. This is why there are six Field lines for the person table even though it has only five columns.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Type<div style="height: 1.00em;">
&#160;</div>
The data type. The value may contain any of the following descriptors:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;constant<div style="height: 1.00em;">
&#160;</div>
All rows have the same value.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;no endspace<div style="height: 1.00em;">
&#160;</div>
Do not store endspace.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;no endspace, not_always<div style="height: 1.00em;">
&#160;</div>
Do not store endspace and do not do endspace compression for all values.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;no endspace, no empty<div style="height: 1.00em;">
&#160;</div>
Do not store endspace. Do not store empty values.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;table-lookup<div style="height: 1.00em;">
&#160;</div>
The column was converted to an ENUM.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;zerofill(<i>N</i>)<div style="height: 1.00em;">
&#160;</div>
The most significant  <i>N</i> bytes in the value are always 0 and are not stored.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;no zeros<div style="height: 1.00em;">
&#160;</div>
Do not store zeros.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;always zero<div style="height: 1.00em;">
&#160;</div>
Zero values are stored using one bit.</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Huff tree<div style="height: 1.00em;">
&#160;</div>
The number of the Huffman tree associated with the column.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Bits<div style="height: 1.00em;">
&#160;</div>
The number of bits used in the Huffman tree.</div>
<div class="spacer">
</div>
The Huff tree and Bits fields are displayed if the table has been compressed with  <b>myisampack</b>. See  <b>myisampack</b>(1), for an example of this information.<div class="spacer">
</div>
Example of  <b>myisamchk -eiv</b> output:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
Checking MyISAM file: person<br/>
Data records:  306688   Deleted blocks:       0<br/>
- check file-size<br/>
- check record delete-chain<br/>
No recordlinks<br/>
- check key delete-chain<br/>
block_size 1024:<br/>
- check index reference<br/>
- check data record references index: 1<br/>
Key:  1:  Keyblocks used:  98%  Packed:    0%  Max levels:  3<br/>
- check data record references index: 2<br/>
Key:  2:  Keyblocks used:  99%  Packed:   97%  Max levels:  3<br/>
- check data record references index: 3<br/>
Key:  3:  Keyblocks used:  98%  Packed:  -14%  Max levels:  3<br/>
Total:    Keyblocks used:  98%  Packed:   89%<br/>
- check records and index references<br/>
<i>*** LOTS OF ROW NUMBERS DELETED ***</i><br/>
Records:            306688  M.recordlength:       25  Packed:            83%<br/>
Recordspace used:       97% Empty space:           2% Blocks/Record:   1.00<br/>
Record blocks:      306688  Delete blocks:         0<br/>
Record data:       7934464  Deleted data:          0<br/>
Lost space:         256512  Linkdata:        1156096<br/>
User time 43.08, System time 1.68<br/>
Maximum resident set size 0, Integral resident set size 0<br/>
Non-physical pagefaults 0, Physical pagefaults 0, Swaps 0<br/>
Blocks in 0 out 7, Messages in 0 out 0, Signals 0<br/>
Voluntary context switches 0, Involuntary context switches 0<br/>
Maximum memory usage: 1046926 bytes (1023k)<br/>
</div>
<div class="spacer">
</div>
<b>myisamchk -eiv</b> output includes the following information:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Data records<div style="height: 1.00em;">
&#160;</div>
The number of rows in the table.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Deleted blocks<div style="height: 1.00em;">
&#160;</div>
How many deleted blocks still have reserved space. You can optimize your table to minimize this space. See Section&#160;6.6.4, &#8220;MyISAM Table Optimization&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Key<div style="height: 1.00em;">
&#160;</div>
The key number.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Keyblocks used<div style="height: 1.00em;">
&#160;</div>
What percentage of the keyblocks are used. When a table has just been reorganized with  <b>myisamchk</b>, the values are very high (very near theoretical maximum).</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Packed<div style="height: 1.00em;">
&#160;</div>
MariaDB tries to pack key values that have a common suffix. This can only be used for indexes on CHAR and VARCHAR columns. For long indexed strings that have similar leftmost parts, this can significantly reduce the space used. In the preceding example, the second key is 40 bytes long and a 97% reduction in space is achieved.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Max levels<div style="height: 1.00em;">
&#160;</div>
How deep the B-tree for this key is. Large tables with long key values get high values.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Records<div style="height: 1.00em;">
&#160;</div>
How many rows are in the table.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;M.recordlength<div style="height: 1.00em;">
&#160;</div>
The average row length. This is the exact row length for tables with fixed-length rows, because all rows have the same length.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Packed<div style="height: 1.00em;">
&#160;</div>
MariaDB strips spaces from the end of strings. The Packed value indicates the percentage of savings achieved by doing this.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Recordspace used<div style="height: 1.00em;">
&#160;</div>
What percentage of the data file is used.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Empty space<div style="height: 1.00em;">
&#160;</div>
What percentage of the data file is unused.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Blocks/Record<div style="height: 1.00em;">
&#160;</div>
Average number of blocks per row (that is, how many links a fragmented row is composed of). This is always 1.0 for fixed-format tables. This value should stay as close to 1.0 as possible. If it gets too large, you can reorganize the table. See Section&#160;6.6.4, &#8220;MyISAM Table Optimization&#8221;.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Recordblocks<div style="height: 1.00em;">
&#160;</div>
How many blocks (links) are used. For fixed-format tables, this is the same as the number of rows.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Deleteblocks<div style="height: 1.00em;">
&#160;</div>
How many blocks (links) are deleted.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Recorddata<div style="height: 1.00em;">
&#160;</div>
How many bytes in the data file are used.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Deleted data<div style="height: 1.00em;">
&#160;</div>
How many bytes in the data file are deleted (unused).</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Lost space<div style="height: 1.00em;">
&#160;</div>
If a row is updated to a shorter length, some space is lost. This is the sum of all such losses, in bytes.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Linkdata<div style="height: 1.00em;">
&#160;</div>
When the dynamic table format is used, row fragments are linked with pointers (4 to 7 bytes each). Linkdata is the sum of the amount of storage used by all such pointers.</div>
</div>
<div class="section">
<h1>MYISAMCHK MEMORY USAGE</h1> Memory allocation is important when you run  <b>myisamchk</b>.  <b>myisamchk</b> uses no more memory than its memory-related variables are set to. If you are going to use  <b>myisamchk</b> on very large tables, you should first decide how much memory you want it to use. The default is to use only about 3MB to perform repairs. By using larger values, you can get  <b>myisamchk</b> to operate faster. For example, if you have more than 32MB RAM, you could use options such as these (in addition to any other options you might specify):<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
shell&gt; <b>myisamchk --sort_buffer_size=16M \</b><br/>
           <b>--key_buffer_size=16M \</b><br/>
           <b>--read_buffer_size=1M \</b><br/>
           <b>--write_buffer_size=1M ...</b><br/>
</div>
<div class="spacer">
</div>
Using  <b>--sort_buffer_size=16M</b> should probably be enough for most cases.<div class="spacer">
</div>
Be aware that  <b>myisamchk</b> uses temporary files in TMPDIR. If TMPDIR points to a memory file system, out of memory errors can easily occur. If this happens, run  <b>myisamchk</b> with the  <b>--tmpdir=</b><b></b><i>path</i> option to specify a directory located on a file system that has more space.<div class="spacer">
</div>
When performing repair operations,  <b>myisamchk</b> also needs a lot of disk space:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Twice the size of the data file (the original file and a copy). This space is not needed if you do a repair with  <b>--quick</b>; in this case, only the index file is re-created.  <i>This space must be available on the same file system as the original data file</i>, as the copy is created in the same directory as the original.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Space for the new index file that replaces the old one. The old index file is truncated at the start of the repair operation, so you usually ignore this space. This space must be available on the same file system as the original data file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;When using  <b>--recover</b> or  <b>--sort-recover</b> (but not when using  <b>--safe-recover</b>), you need space on disk for sorting. This space is allocated in the temporary directory (specified by TMPDIR or  <b>--tmpdir=</b><b></b><i>path</i>). The following formula yields the amount of space required:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
(<i>largest_key</i> + <i>row_pointer_length</i>) &#215; <i>number_of_rows</i> &#215; 2<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
You can check the length of the keys and the  <i>row_pointer_length</i> with  <b>myisamchk -dv </b><b></b><i>tbl_name</i> (see the section called &#8220;MYISAMCHK TABLE INFORMATION&#8221;). The  <i>row_pointer_length</i> and  <i>number_of_rows</i> values are the Datafile pointer and Data records values in the table description. To determine the  <i>largest_key</i> value, check the Key lines in the table description. The Len column indicates the number of bytes for each key part. For a multiple-column index, the key size is the sum of the Len values for all key parts.</div>
<div class="spacer">
</div>
If you have a problem with disk space during repair, you can try  <b>--safe-recover</b> instead of  <b>--recover</b>.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 2007-2008 MySQL AB, 2008-2010 Sun Microsystems, Inc., 2010-2015 MariaDB Foundation<div class="spacer">
</div>
This documentation is free software; you can redistribute it and/or modify it only under the terms of the GNU General Public License as published by the Free Software Foundation; version 2 of the License.<div class="spacer">
</div>
This documentation is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.<div class="spacer">
</div>
You should have received a copy of the GNU General Public License along with the program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA or see http://www.gnu.org/licenses/.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> For more information, please refer to the MariaDB Knowledge Base, available online at https://mariadb.com/kb/</div>
<div class="section">
<h1>AUTHOR</h1> MariaDB Foundation (http://www.mariadb.org/).</div>
<table class="foot">
<tr>
<td class="foot-date">
04/08/2015</td>
<td class="foot-os">
MariaDB 10.0</td>
</tr>
</table>
</div>
</body>
</html>

